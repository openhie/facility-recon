webpackJsonp([1],{"2xOm":function(e,t){},"4hxi":function(e,t){},"6k/U":function(e,t){},"7zck":function(e,t){},"J/Fn":function(e,t){e.exports={BACKEND_HOST:".",BACKEND_PORT:"3000",BACKEND_PROTOCOL:"http"}},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),s=a.n(r),o=a("7+uW"),i=a("pFYg"),n=a.n(i),l=a("BO1k"),c=a.n(l),u=a("Dd8w"),d=a.n(u),v=a("fZjL"),p=a.n(v),h=a("mtWM"),g=a.n(h),f=a("//Fk"),m=a.n(f),_=a("NYxO"),y=a("/ocq"),x=a("+cKO"),b=a("ppUw"),S=a.n(b),$=a("fzx2"),w={validations:{username:{required:x.required},password:{required:x.required}},data:function(){return{username:"",password:"",authStatus:!1,signupEnabled:!1}},methods:{authenticate:function(){var e=this,t=new FormData;t.append("username",this.username),t.append("password",this.password),g.a.post("/authenticate/",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.auth.token=t.data.token,e.$store.state.auth.username=e.username,e.$store.state.auth.userID=t.data.userID,e.$store.state.auth.role=t.data.role,e.$store.state.auth.tasks=t.data.tasks,S.a.config("30d"),S.a.set("token",e.$store.state.auth.token,"infinity"),S.a.set("userID",e.$store.state.auth.userID,"infinity"),S.a.set("role",e.$store.state.auth.role,"infinity"),S.a.set("tasks",s()(e.$store.state.auth.tasks),"infinity"),S.a.set("username",e.$store.state.auth.username,"infinity"),e.$store.state.auth.role=t.data.role,t.data.token?(e.$store.state.clientId=$.a.v4(),e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,Gt.$emit("getConfig")):e.authStatus=!0}).catch(function(e){e.hasOwnProperty("response")&&console.log(e.response.data.error)})},displaySignup:function(){this.$router.push({name:"Signup"})}},computed:{usernameErrors:function(){var e=[];return this.$v.username.$dirty?(!this.$v.username.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e}},created:function(){var e=this;g.a.get("/getSignupConf").then(function(t){t.data&&(e.signupEnabled=!0,e.$store.state.signupFields=t.data.allSignupFields,e.$store.state.customSignupFields=t.data.customSignupFields,S.a.set("signupFields",t.data.allSignupFields,"infinity"),S.a.set("customSignupFields",t.data.customSignupFields,"infinity"))})},beforeCreate:function(){this.$store.state.config.generalConfig.authDisabled&&(this.$store.state.clientId=$.a.v4(),this.$store.state.initializingApp=!0,this.$store.state.denyAccess=!1,this.$router.push({name:"DHIS2Auth"}))}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("center",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}}),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-alert",{attrs:{type:"error",value:e.authStatus}},[e._v("\n          Authentication Failed\n        ")])],1)],1),e._v(" "),a("v-card",{attrs:{width:"430px",hover:""}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{color:"white"},attrs:{color:"primary"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs2:"","text-xs-left":""}},[a("v-icon",{attrs:{"x-large":"",color:"white"}},[e._v("lock")])],1),e._v(" "),a("v-flex",{attrs:{xs9:"","text-xs-right":""}},[a("b",[e._v("Login")])])],1)],1)],1),e._v(" "),a("v-card-text",[a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,box:"",color:"deep-purple",label:"Username"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authenticate()},blur:function(t){return e.$v.username.$touch()},change:function(t){return e.$v.username.$touch()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,box:"",type:"password",color:"deep-purple",label:"Password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authenticate()},blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),e._v(" "),a("v-card-actions",[a("v-toolbar",[e.$store.state.config.generalConfig.selfRegistration.enabled?a("v-btn",{attrs:{color:"primary"},on:{click:e.displaySignup}},[e._v("Signup")]):e._e(),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"primary",depressed:""},on:{click:function(t){return e.authenticate()}}},[e._v("Login")])],1)],1)],1)],1)],1)},staticRenderFns:[]},C=a("VU/8")(w,D,!1,null,null,null).exports,k={validations:{username:{required:x.required},retype_password:{required:x.required},password:{required:x.required},firstname:{required:x.required},surname:{required:x.required},phone:{required:x.required},email:{required:x.required}},data:function(){return{firstname:"",othername:"",surname:"",phone:"",email:"",username:"",password:"",retype_password:"",customFields:[],phoneErrors:[],emailErrors:[],alertFail:!1,alertSuccess:!1,alertMsg:""}},methods:{validateEmail:function(){if(this.emailErrors=[],!this.email)return this.emailErrors.push("Email is required"),!1;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)?void 0:(this.emailErrors.push("Invalid Email"),!1)},validatePhone:function(){if(this.phoneErrors=[],!this.phone)return this.phoneErrors.push("Phone is required");return/^[+]?[\s./0-9]*[(]?[0-9]{1,4}[)]?[-\s./0-9]*$/g.test(this.phone)?void 0:this.phoneErrors.push("Invalid phone number")},signup:function(){var e=this;this.password!==this.retype_password&&(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorDescription="Password mismatch"),this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Creating Account";var t=new FormData;for(var a in t.append("firstName",this.firstname),t.append("otherName",this.othername),t.append("surname",this.surname),t.append("phone",this.phone),t.append("email",this.email),t.append("password",this.password),t.append("userName",this.username),this.$store.state.config.generalConfig.selfRegistration.requiresApproval&&t.append("status","Pending"),this.customFields)t.append(a,this.customFields[a]);g.a.post("/addUser/",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){var t=p()(e.$v.$params),a=!0,r=!1,s=void 0;try{for(var o,i=c()(t);!(a=(o=i.next()).done);a=!0){var n=o.value;e.$v[n].$reset()}}catch(e){r=!0,s=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw s}}e.$refs.form.reset(),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.$store.state.config.generalConfig.selfRegistration.requiresApproval?e.alertMsg="Account created and waiting for approval, you will receive an email once approved":e.alertMsg="Account created successfully"}).catch(function(t){e.$store.state.dynamicProgress=!1,e.alertFail=!0,e.alertMsg="This account was not added, try different username",console.log(t.response.data.error)})},displayLogin:function(){this.$router.push({name:"Login"})}},computed:{codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},firstnameErrors:function(){var e=[];return this.$v.firstname.$dirty?(!this.$v.firstname.required&&e.push("First Name is required"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},usernameErrors:function(){var e=[];return this.$v.username.$dirty?(!this.$v.username.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e}},created:function(){this.$store.state.signupFields=S.a.get("signupFields"),this.$store.state.customSignupFields=S.a.get("customSignupFields")}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-alert",{staticStyle:{width:"900px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),e._v(" "),a("v-alert",{staticStyle:{width:"900px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),e._v(" "),a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"1500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),e._v(" "),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Create Account")])],1),e._v(" "),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,box:"",color:"deep-purple",label:"First Name"},on:{blur:function(t){return e.$v.firstname.$touch()},change:function(t){return e.$v.firstname.$touch()}},model:{value:e.firstname,callback:function(t){e.firstname=t},expression:"firstname"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,box:"",color:"deep-purple",label:"Surname"},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}})],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Middle Names"},model:{value:e.othername,callback:function(t){e.othername=t},expression:"othername"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.phoneErrors,box:"",color:"deep-purple",label:"Phone"},on:{blur:e.validatePhone,change:e.validatePhone,input:e.validatePhone},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.emailErrors,box:"",color:"deep-purple",label:"Email*"},on:{blur:e.validateEmail,change:e.validateEmail,input:e.validateEmail},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,box:"",color:"deep-purple",label:"Username"},on:{blur:function(t){return e.$v.username.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",box:"",color:"deep-purple",label:"Password"},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",box:"",color:"deep-purple",label:"Re-type Password"},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}})],1)],1)],1)],1),e._v(" "),e._l(e.$store.state.customSignupFields,function(t,r){return a("label",{key:r},[(t.required,a("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:t.display},model:{value:e.customFields[r],callback:function(t){e.$set(e.customFields,r,t)},expression:"customFields[name]"}}))],1)})],2),e._v(" "),a("v-divider"),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(t){return e.$refs.form.reset()}}},[a("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:""},on:{click:e.displayLogin}},[a("v-icon",[e._v("lock")]),e._v("Back To Login\n          ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.signup()}}},[a("v-icon",{attrs:{left:""}},[e._v("how_to_reg")]),e._v("Add\n          ")],1)],1)],1)],1),e._v(" "),a("v-spacer")],1)],1)},staticRenderFns:[]},T=a("VU/8")(k,P,!1,null,null,null).exports,A=a("Gu7T"),I=a.n(A),R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.syncProgrIndeter,callback:function(t){e.syncProgrIndeter=t},expression:"syncProgrIndeter"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v("\n        "+e._s(e.syncStatus)+"\n        "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",width:"270"},model:{value:e.syncProgrPercent,callback:function(t){e.syncProgrPercent=t},expression:"syncProgrPercent"}},[a("v-card",{attrs:{color:"white",dark:""}},[a("v-card-text",[a("center",[a("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.syncStatus))]),a("br"),e._v(" "),a("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.syncPercent,color:"primary"}},[a("v-avatar",{attrs:{color:"indigo",size:"50px"}},[a("span",{staticClass:"white--text"},[a("b",[e._v(e._s(e.syncPercent)+"%")])])])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},F={props:["syncType","serverName","userID","sourceOwner","mode"],data:function(){return{syncProgrIndeter:!1,syncStatus:"Waiting for sync status",syncPercent:null,syncProgrPercent:!1,syncProgressTimer:"",syncRunning:!1}},methods:{sync:function(){var e=this,t=this.mode;t||(t="full");var a=new FormData,r=this.$store.state.clientId;a.append("name",this.serverName),a.append("userID",this.userID),a.append("sourceOwner",this.sourceOwner),a.append("clientId",r),a.append("mode",t),this.syncRunning=!0,this.syncProgrIndeter=!0,g.a.post("/"+this.syncType+"/",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.syncProgressTimer=setInterval(e.checkSyncProgress,1e3)}).catch(function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data.error+". cross check host,user and password",clearInterval(e.syncProgressTimer),console.log(t.response.data.error)})},checkSyncProgress:function(){var e=this,t=this.$store.state.clientId,a=void 0;"dhisSync"===this.syncType?a="dhisSyncRequest":"fhirSync"===this.syncType&&(a="fhirSyncRequest"),g.a.get("/progress/"+a+"/"+t).then(function(t){return null===t.data||void 0===t.data||!1===t.data?(e.$store.state.uploadRunning=!1,e.syncProgrIndeter=!1,e.syncProgrPercent=!1,void clearInterval(e.syncProgressTimer)):null!==t.data.error?(e.$store.state.uploadRunning=!1,e.syncProgrIndeter=!1,e.syncProgrPercent=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.data.error,clearInterval(e.syncProgressTimer),void console.log(t.data.error)):null===t.data.status?(e.$store.state.uploadRunning=!1,e.syncProgrIndeter=!1,e.syncProgrPercent=!1,void clearInterval(e.syncProgressTimer)):(e.syncStatus=t.data.status,t.data.percent&&(e.syncProgrPercent||(e.syncProgrIndeter=!1,e.syncProgrPercent=!0),e.syncPercent=t.data.percent),void("Done"===t.data.status&&(e.syncStatus="Waiting for sync status",clearInterval(e.syncProgressTimer),e.syncProgrPercent=!1,e.$store.state.uploadRunning=!1,Gt.$emit("getDataSources"))))}).catch(function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",console.log(t.response.data.error+". cross check host,user and password"),e.$store.state.errorDescription=t.response.data.error+". cross check host,user and password",clearInterval(e.syncProgressTimer)})}},created:function(){Gt.$on("runRemoteSync",this.sync)},beforeDestroy:function(){Gt.$off("runRemoteSync",this.sync)},components:{appSyncProgress:a("VU/8")({props:["syncProgrIndeter","syncStatus","syncProgrPercent","syncPercent"]},R,!1,null,null,null).exports}},M={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-container",[t("app-syncProgress",{attrs:{syncProgrIndeter:this.syncProgrIndeter,syncStatus:this.syncStatus,syncProgrPercent:this.syncProgrPercent,syncPercent:this.syncPercent}})],1)},staticRenderFns:[]},L=a("VU/8")(F,M,!1,null,null,null).exports,U={data:function(){return{roles:[],tasks:[]}},computed:{canAddDataset:function(){var e=this;if(this.$store.state.config.generalConfig.reconciliation.singleDataSource){var t=0,a=function(a){if(a._id===e.$store.state.config.generalConfig.reconciliation.fixSource2To)return"continue";var r=e.$store.state.auth.userID,s=e.$store.state.dhis.user.orgId,o=a.shared.users.find(function(e){return e._id===r}),i=a.owner.id===r,n=!0===a.shareToAll.activated,l=!1;if(a.owner.orgId&&a.owner.orgId===s&&(l=!0),!(i||o||n||l))return"continue";t++},r=!0,s=!1,o=void 0;try{for(var i,n=c()(this.$store.state.dataSources);!(r=(i=n.next()).done);r=!0)a(i.value)}catch(e){s=!0,o=e}finally{try{!r&&n.return&&n.return()}finally{if(s)throw o}}return!(t>=1)||(this.datasetLimitWarn=!0,!1)}return!0}},methods:{getCodeSystem:function(e,t){g.a.get("/FR/getCodeSystem",{params:{codeSystemType:e}}).then(function(e){return t(null,e.data)}).catch(function(e){return console.log(e),t(e,null)})},getTree:function(e,t){g.a.get("/FR/getTree",{params:{includeBuilding:e}}).then(function(e){if(e.data){return t(!1,e.data)}}).catch(function(e){return t(e,[])})},clearProgress:function(e){g.a.get("/clearProgress/"+e+"/"+this.$store.state.clientId)},getGeneralConfig:function(e){var t=this,a=s()(this.$store.state.config.generalConfig);g.a.get("/getGeneralConfig?defaultGenerConfig="+a).then(function(a){return a&&(t.$store.state.config.generalConfig=a.data),e()}).catch(function(){return e()})},toTitleCase:function(e){return e.toLowerCase().split(" ").map(function(e){return e.replace(e[0],e[0].toUpperCase())}).join("").toLowerCase()},translateDataHeader:function(e,t){var a=this.$store.state.config.userConfig.reconciliation.useCSVHeader,r=this.$store.state.levelMapping;if(!a||a&&r[e]["level"+t]==="level"+t)return"Level "+t;if(p()(this.$store.state.levelMapping[e]).length>0){var s=this.$store.state.levelMapping[e],o=1;for(var i in s)0===i.indexOf("level")&&o++;var n=void 0;"source1"===e&&(n=this.$store.state.totalSource1Levels),"source2"===e&&(n=this.$store.state.totalSource2Levels),t+=o- --n;var l=this.$store.state.levelMapping[e]["level"+t];return l&&"null"!==l&&"undefined"!==l&&"false"!==l?l:this.$store.state.levelMapping[e].facility}return"Level "+t},getActiveDataSourcePair:function(){var e=this,t=void 0,a={};return this.$store.state.dataSourcePairs.forEach(function(r){r.userID._id===e.$store.state.auth.userID&&"active"===r.status&&(a=r),p()(a).length>0?t=void 0:r.userID._id!==e.$store.state.auth.userID&&-1!==r.shared.activeUsers.indexOf(e.$store.state.auth.userID)&&(t=r)}),t&&(a=t),a},getDatasourceOwner:function(){var e={source1Owner:"",source2Owner:""};return this.$store.state.activePair.source1.hasOwnProperty("userID")&&(e.source1Owner=this.$store.state.activePair.source1.userID),this.$store.state.activePair.source2.hasOwnProperty("userID")&&(e.source2Owner=this.$store.state.activePair.source2.userID),e},getLimitOrgIdOnActivePair:function(){var e=this,t={source1LimitOrgId:"",source2LimitOrgId:""},a=this.$store.state.dataSources.find(function(t){return t._id===e.$store.state.activePair.source1.id}),r=this.$store.state.dataSources.find(function(t){return t._id===e.$store.state.activePair.source2.id});if(a&&a.hasOwnProperty("userID")&&a.userID._id!==this.$store.state.auth.userID){var s=a.sharedLocation.find(function(t){return t.user===e.$store.state.auth.userID});s?t.source1LimitOrgId=s.location:a.shareToAll.activated&&a.shareToAll.limitByUserLocation&&(t.source1LimitOrgId=this.$store.state.dhis.user.orgId,t.source1LimitOrgId||(t.source1LimitOrgId="undefined"))}if(r&&r.hasOwnProperty("userID")&&r.userID._id!==this.$store.state.auth.userID){var o=r.sharedLocation.find(function(t){return t.user===e.$store.state.auth.userID});o?t.source2LimitOrgId=o.location:r.shareToAll.activated&&r.shareToAll.limitByUserLocation&&(t.source2LimitOrgId=this.$store.state.dhis.user.orgId,t.source2LimitOrgId||(t.source2LimitOrgId="undefined"))}return t},getLimitOrgIdOnDataSource:function(e){var t=this,a=void 0;if(e&&e.hasOwnProperty("userID")&&e.userID._id!==this.$store.state.auth.userID){var r=e.sharedLocation.find(function(e){return e.user===t.$store.state.auth.userID});r?a=r.location:e.shareToAll.activated&&e.shareToAll.limitByUserLocation&&((a=this.$store.state.dhis.user.orgId)||(a="undefined"))}return a},getRoles:function(){var e=this;g.a.get("/getRoles").then(function(t){var a=!0,r=!1,s=void 0;try{for(var o,i=c()(t.data);!(a=(o=i.next()).done);a=!0){var n=o.value;e.roles.push({text:n.name,value:n._id,tasks:n.tasks})}}catch(e){r=!0,s=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw s}}}).catch(function(e){console.log(e.response)})},getTasks:function(){var e=this;g.a.get("/getTasks").then(function(t){e.tasks=t.data}).catch(function(e){console.log(e.response)})},saveConfiguration:function(e,t){var a=this,r=this.$store.state.auth.userID,o=new FormData;o.append("config",s()(this.$store.state.config)),o.append("userID",r);var i=void 0;i="generalConfig"===e?"/updateGeneralConfig":"/updateUserConfig",g.a.post(""+i,o,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){"useCSVHeader"===t&&Gt.$emit("changeCSVHeaderNames"),"authDisabled"===t&&a.$router.push({name:"Logout"})})},setDHIS2Credentials:function(){return this.$store.state.auth.token="",!(location.href.split("api").length<2)&&(this.$store.state.dhis.host=location.href.split("api").shift(),g.a.defaults.params={authDisabled:!0},!0)}}},E={mixins:[U],validations:{facility:{required:x.required},code:{required:x.required},uploadName:{required:x.required}},data:function(){return{autoDisableSingleDatasourceDialog:!1,selectDatasourceDialog:!1,fixSource2To:"",searchDatasource:"",dataSourceHeaders:[{sortable:!1},{text:"Source Name",align:"left",value:"name"},{text:"Owner",value:"owner",sortable:!1},{text:"Created Time",value:"createdTime"}],cronDataSourceHeaders:[{text:"Source Name",align:"left",value:"name"},{text:"Owner",value:"owner",sortable:!1},{text:"Created Time",value:"createdTime"},{text:"Enabled",value:"enabled"}],datasetsAutosyncState:{},useCSVHeader:!1,moreFields:!1,fieldLabel:"",fieldName:"",required:"No",requiredText:["Yes","No"],signupFields:[],notification_endpoint:"",notification_username:"",notification_password:"",dhis2Roles:[],loadingDhis2Roles:!1,datasetNameErrors:[],defineSuperuserRole:!1}},methods:{controlDatasetsCronjobs:function(e){var t=new FormData;t.append("id",e._id),t.append("enabled",this.datasetsAutosyncState[e._id]),g.a.post("/updateDatasetAutosync",t)},checkDatasetsAdditionWays:function(e){if(0===this.$store.state.config.generalConfig.datasetsAdditionWays.length){this.$store.state.errorTitle="Cant disable both ways",this.$store.state.errorDescription="There must be atleast one way of adding a dataset",this.$store.state.dialogError=!0;var t=void 0;"remote"===e?t="Remote Servers Sync":"upload"===e&&(t="CSV Upload"),this.$store.state.config.generalConfig.datasetsAdditionWays.push(t)}else this.saveConfiguration("generalConfig","datasetsAdditionWays")},autoDisableSingleDatasource:function(e){"ok"===e?(this.$store.state.config.generalConfig.reconciliation.singleDataSource=!1,this.saveConfiguration("generalConfig","fixSource2"),this.saveConfiguration("generalConfig","singleDataSource")):"cancel"===e&&(this.$store.state.config.generalConfig.reconciliation.fixSource2=!0),this.autoDisableSingleDatasourceDialog=!1},singleDatasource:function(){var e=this;this.$store.state.config.generalConfig.reconciliation.singleDataSource?this.$store.state.config.generalConfig.reconciliation.fixSource2To&&this.$store.state.config.generalConfig.reconciliation.fixSource2?this.saveConfiguration("generalConfig","singleDataSource"):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorColor="error",this.$store.state.errorDescription="This feature can only be enabled if there is a defined datasource to serve as Source 2 for all reconciliation",setTimeout(function(){e.$store.state.config.generalConfig.reconciliation.singleDataSource=!1})):this.saveConfiguration("generalConfig","singleDataSource")},displayDatasourceDialog:function(){!0===this.$store.state.config.generalConfig.reconciliation.fixSource2?(this.fixSource2To=this.$store.state.config.generalConfig.reconciliation.fixSource2To,this.selectDatasourceDialog=!0,this.saveConfiguration("generalConfig","fixSource2")):this.$store.state.config.generalConfig.reconciliation.singleDataSource?this.autoDisableSingleDatasourceDialog=!0:this.saveConfiguration("generalConfig","fixSource2")},closeDatasourceDialog:function(){this.selectDatasourceDialog=!1,this.$store.state.config.generalConfig.reconciliation.fixSource2To||(this.$store.state.config.generalConfig.reconciliation.fixSource2=!1,this.saveConfiguration("generalConfig","fixSource2"))},savefixSource2To:function(){this.$store.state.config.generalConfig.reconciliation.fixSource2To=this.fixSource2To,this.saveConfiguration("generalConfig","fixSource2To"),this.selectDatasourceDialog=!1},disableGOFRAuth:function(){var e=this;if(this.$store.state.config.generalConfig.authDisabled){if(this.$store.state.config.generalConfig.authDisabled){if(!this.setDHIS2Credentials())return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorColor="error",this.$store.state.errorDescription="App doesnt appear to be running inside DHIS2, cant disable authentication",void setTimeout(function(){e.$store.state.config.generalConfig.authDisabled=!1});this.loadingDhis2Roles=!0,this.getDHIS2Roles(function(t){e.loadingDhis2Roles=!1,e.dhis2Roles=[].concat(I()(t.data.userRoles))}),this.defineSuperuserRole=!0}}else this.saveConfiguration("generalConfig","authDisabled")},recoProgressNotificationChanged:function(){this.$store.state.config.generalConfig.hasOwnProperty("recoProgressNotification")||(this.$store.state.config.generalConfig.recoProgressNotification={}),this.$store.state.config.generalConfig.recoProgressNotification.url=this.notification_endpoint,this.$store.state.config.generalConfig.recoProgressNotification.username=this.notification_username,this.$store.state.config.generalConfig.recoProgressNotification.password=this.notification_password,this.saveConfiguration("generalConfig")},addMoreFields:function(){var e=this;if(this.$store.state.progressTitle="Saving field",this.signupFields[0].children.find(function(t){return t.id===e.fieldName}))this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorDescription="Field name must be unique";else{var t=new FormData,a=void 0;a="Yes"===this.required,t.append("fieldName",this.fieldName),t.append("fieldLabel",this.fieldLabel),t.append("fieldRequired",a),t.append("form","signup"),g.a.post("/addFormField",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Info",e.$store.state.errorDescription="Field added successfully",e.$store.state.signupFields[e.fieldName]={type:"String",display:e.fieldLabel},e.$store.state.customSignupFields[e.fieldName]={type:"String",display:e.fieldLabel},S.a.set("signupFields",e.$store.state.signupFields,"infinity"),S.a.set("customSignupFields",e.$store.state.customSignupFields,"infinity"),e.signupFields[0].children.push({id:e.fieldName,name:e.fieldLabel}),e.fieldName="",e.fieldLabel="",e.required="No"})}},pullOrgUnits:function(){this.saveConfiguration("generalConfig","externalAuth");var e=new FormData;e.append("host",this.$store.state.dhis.host),e.append("sourceType","DHIS2"),e.append("source","syncServer"),e.append("shareToAll",this.$store.state.config.generalConfig.externalAuth.shareOrgUnits),e.append("limitByUserLocation",this.$store.state.config.generalConfig.externalAuth.shareByOrgId),e.append("username",this.$store.state.config.generalConfig.externalAuth.userName),e.append("password",this.$store.state.config.generalConfig.externalAuth.password),e.append("name",this.$store.state.config.generalConfig.externalAuth.datasetName),e.append("userID",this.$store.state.auth.userID),g.a.post("/addDataSource",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){Gt.$emit("runRemoteSync")})},getDHIS2Roles:function(e){var t=this.$store.state.dhis.dev.auth;""===t.username&&(t=""),g.a.get(this.$store.state.dhis.host+"api/userRoles",{auth:t}).then(function(t){e(t)})},ensureNameUnique:function(){if(this.datasetNameErrors=[],""===this.$store.state.config.generalConfig.externalAuth.datasetName)return this.datasetNameErrors.push("Dataset name is required");var e=!0,t=!1,a=void 0;try{for(var r,s=c()(this.$store.state.dataSources);!(e=(r=s.next()).done);e=!0){if(r.value.name===this.uploadName)return this.datasetNameErrors.push("This Name Exists"),!1}}catch(e){t=!0,a=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw a}}}},created:function(){var e=this;for(var t in this.$store.state.config.generalConfig.authDisabled&&"dhis2"===this.$store.state.config.generalConfig.authMethod&&(this.loadingDhis2Roles=!0,this.getDHIS2Roles(function(t){e.loadingDhis2Roles=!1,e.dhis2Roles=[].concat(I()(t.data.userRoles))})),this.signupFields.push({id:"signupFields",name:"Self Registration Fields",children:[]}),this.$store.state.signupFields)this.signupFields[0].children.push({id:t,name:t});this.$store.state.config.generalConfig.hasOwnProperty("recoProgressNotification")&&(this.notification_endpoint=this.$store.state.config.generalConfig.recoProgressNotification.url,this.notification_username=this.$store.state.config.generalConfig.recoProgressNotification.username,this.notification_password=this.$store.state.config.generalConfig.recoProgressNotification.password)},computed:{fixedSource2To:function(){var e="",t=!0,a=!1,r=void 0;try{for(var s,o=c()(this.$store.state.dataSources);!(t=(s=o.next()).done);t=!0){var i=s.value;i._id===this.$store.state.config.generalConfig.reconciliation.fixSource2To&&(e=i)}}catch(e){a=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw r}}return e.name},sharedToAllDatasets:function(){var e=[],t=!0,a=!1,r=void 0;try{for(var s,o=c()(this.$store.state.dataSources);!(t=(s=o.next()).done);t=!0){var i=s.value;i.shareToAll.activated,e.push(i)}}catch(e){a=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw r}}return e},remoteDatasets:function(){var e=[],t=!0,a=!1,r=void 0;try{for(var s,o=c()(this.$store.state.dataSources);!(t=(s=o.next()).done);t=!0){var i=s.value;"syncServer"===i.source&&(i.enableAutosync?this.datasetsAutosyncState[i._id]=!0:this.datasetsAutosyncState[i._id]=!1,e.push(i))}}catch(e){a=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw r}}return e}},beforeCreate:function(){if(this.$store.state.config.generalConfig.hasOwnProperty("authMethod")||this.$set(this.$store.state.config.generalConfig,"authMethod","dhis2"),!this.$store.state.config.generalConfig.hasOwnProperty("externalAuth")){this.$set(this.$store.state.config.generalConfig,"externalAuth",{pullOrgUnits:!0,shareOrgUnits:!1,shareByOrgId:!1,datasetName:"",adminRole:""})}},components:{appRemoteSync:L}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.autoDisableSingleDatasourceDialog,callback:function(t){e.autoDisableSingleDatasourceDialog=t},expression:"autoDisableSingleDatasourceDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v("\n          Disabling Single Data Source Limit\n        ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.autoDisableSingleDatasource("cancel")}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[e._v("\n        Disabling limiting reconciliation to be done against one choosen data source will also disable the single data source limit, click OK to proceed\n      ")]),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){return e.autoDisableSingleDatasource("cancel")}}},[e._v("Cancel")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){return e.autoDisableSingleDatasource("ok")}}},[e._v("Ok")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",width:"620px"},model:{value:e.defineSuperuserRole,callback:function(t){e.defineSuperuserRole=t},expression:"defineSuperuserRole"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n          DHIS2 superuser role that can be an administrator of GOFR\n        ")])],1),e._v(" "),a("v-card-text",[a("v-select",{attrs:{label:"Superuser Role Name","item-text":"displayName","item-value":"id",loading:e.loadingDhis2Roles,required:"",items:e.dhis2Roles},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.adminRole,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"adminRole",t)},expression:"$store.state.config.generalConfig.externalAuth.adminRole"}})],1),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"success",disabled:!e.$store.state.config.generalConfig.externalAuth.adminRole||0===e.dhis2Roles.length},on:{click:function(t){return e.saveConfiguration("generalConfig","authDisabled")}}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("\n          Save\n        ")],1)],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",width:"800px"},model:{value:e.selectDatasourceDialog,callback:function(t){e.selectDatasourceDialog=t},expression:"selectDatasourceDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n          Select datasource to fix source 2\n        ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchDatasource,callback:function(t){e.searchDatasource=t},expression:"searchDatasource"}}),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeDatasourceDialog(t)}}},[a("v-icon",[e._v("close")])],1)],1),e._v("\n      This lists only those datasets that have been shared to all users\n      "),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.dataSourceHeaders,items:e.sharedToAllDatasets,dark:"",search:e.searchDatasource},scopedSlots:e._u([{key:"items",fn:function(t){return[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.fixSource2To,callback:function(t){e.fixSource2To=t},expression:"fixSource2To"}},[a("td",[a("v-radio",{attrs:{value:t.item._id,color:"blue"}})],1)]),e._v(" "),a("td",[e._v(e._s(t.item.name))]),e._v(" "),a("td",[e._v(e._s(t.item.userID.userName))]),e._v(" "),a("td",[e._v("\n              "+e._s(t.item.createdTime)+"\n            ")])]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},on:{click:e.closeDatasourceDialog}},[a("v-icon",{attrs:{left:""}},[e._v("cancel")]),e._v("\n          Cancel\n        ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"success",disabled:!e.fixSource2To||0===e.sharedToAllDatasets.length},on:{click:e.savefixSource2To}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("\n          Save\n        ")],1)],1)],1)],1),e._v(" "),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("b",[e._v("System Configurations")])]),e._v(" "),a("v-card-text",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v("\n          User Configurations\n        ")]),e._v(" "),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-switch",{attrs:{color:"primary",label:"Apply user defined headers when reconciling"},on:{change:function(t){return e.saveConfiguration("userConfig","useCSVHeader")}},model:{value:e.$store.state.config.userConfig.reconciliation.useCSVHeader,callback:function(t){e.$set(e.$store.state.config.userConfig.reconciliation,"useCSVHeader",t)},expression:"$store.state.config.userConfig.reconciliation.useCSVHeader"}})],1)],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-divider"),e._v(" "),a("v-divider"),e._v(" "),"Admin"==e.$store.state.auth.role?a("v-card",[a("v-card-title",[e._v("\n          Admin Configurations\n        ")]),e._v(" "),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-switch",{attrs:{color:"primary",label:"Perform match based on parent constraint"},on:{change:function(t){return e.saveConfiguration("generalConfig","parentConstraint")}},model:{value:e.$store.state.config.generalConfig.reconciliation.parentConstraint.enabled,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation.parentConstraint,"enabled",t)},expression:"$store.state.config.generalConfig.reconciliation.parentConstraint.enabled"}}),e._v(" "),e.$store.state.config.generalConfig.reconciliation.parentConstraint.enabled?e._e():a("v-card",{staticStyle:{"margin-left":"100px"},attrs:{color:"grey lighten-3"}},[a("v-checkbox",{attrs:{color:"success",label:"Automatch By ID",disabled:""},on:{change:function(t){return e.saveConfiguration("generalConfig","parConstrIdAuto")}},model:{value:e.$store.state.config.generalConfig.reconciliation.parentConstraint.idAutoMatch,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation.parentConstraint,"idAutoMatch",t)},expression:"$store.state.config.generalConfig.reconciliation.parentConstraint.idAutoMatch"}}),e._v(" "),a("v-checkbox",{attrs:{color:"success",label:"Automatch By Name (when parents differ)"},on:{change:function(t){return e.saveConfiguration("generalConfig","parConstrNameAuto")}},model:{value:e.$store.state.config.generalConfig.reconciliation.parentConstraint.nameAutoMatch,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation.parentConstraint,"nameAutoMatch",t)},expression:"$store.state.config.generalConfig.reconciliation.parentConstraint.nameAutoMatch"}})],1),e._v(" "),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                  Choose ways datasets can be added\n                ")]),e._v(" "),a("v-card-text",[a("v-checkbox",{attrs:{label:"CSV Upload",value:"CSV Upload"},on:{change:function(t){return e.checkDatasetsAdditionWays("upload")}},model:{value:e.$store.state.config.generalConfig.datasetsAdditionWays,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAdditionWays",t)},expression:"$store.state.config.generalConfig.datasetsAdditionWays"}}),e._v(" "),a("v-checkbox",{attrs:{label:"Remote Servers Sync",value:"Remote Servers Sync"},on:{change:function(t){return e.checkDatasetsAdditionWays("remote")}},model:{value:e.$store.state.config.generalConfig.datasetsAdditionWays,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAdditionWays",t)},expression:"$store.state.config.generalConfig.datasetsAdditionWays"}})],1)],1),e._v(" "),a("v-switch",{attrs:{color:"primary",label:"Allow non admin users to share datasets will all users"},on:{change:function(t){return e.saveConfiguration("generalConfig","allowShareToAllForNonAdmin")}},model:{value:e.$store.state.config.generalConfig.allowShareToAllForNonAdmin,callback:function(t){e.$set(e.$store.state.config.generalConfig,"allowShareToAllForNonAdmin",t)},expression:"$store.state.config.generalConfig.allowShareToAllForNonAdmin"}}),e._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-switch",{attrs:{slot:"activator",color:"primary",label:"Select a data source to serve as Source 2 for all reconciliation"},on:{change:e.displayDatasourceDialog},slot:"activator",model:{value:e.$store.state.config.generalConfig.reconciliation.fixSource2,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation,"fixSource2",t)},expression:"$store.state.config.generalConfig.reconciliation.fixSource2"}}),e._v(" "),a("span",[e._v("This will limit users to perform reconciliations against the chosen data source")])],1),e._v(" "),e.$store.state.config.generalConfig.reconciliation.fixSource2?[e._v("\n                Source2 Limited To: "),a("v-chip",[e._v(e._s(e.fixedSource2To))]),e._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",fab:"",dark:"",color:"primary",small:""},on:{click:e.displayDatasourceDialog},slot:"activator"},[a("v-icon",{attrs:{dark:""}},[e._v("list")])],1),e._v(" "),a("span",[e._v("Change dataset")])],1)]:e._e(),e._v(" "),a("v-switch",{attrs:{color:"primary",label:"Single data source per user"},on:{change:e.singleDatasource},model:{value:e.$store.state.config.generalConfig.reconciliation.singleDataSource,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation,"singleDataSource",t)},expression:"$store.state.config.generalConfig.reconciliation.singleDataSource"}}),e._v(" "),e.$store.state.dhis.user.orgId?a("v-switch",{attrs:{color:"primary",label:"Single data source pair per org unit"},on:{change:function(t){return e.saveConfiguration("generalConfig","singlePair")}},model:{value:e.$store.state.config.generalConfig.reconciliation.singlePair,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation,"singlePair",t)},expression:"$store.state.config.generalConfig.reconciliation.singlePair"}}):e._e()],2),e._v(" "),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                  GOFR Authentication\n                ")]),e._v(" "),a("v-card-text",[a("v-switch",{attrs:{color:"primary",label:"Disable Authentication"},on:{change:e.disableGOFRAuth},model:{value:e.$store.state.config.generalConfig.authDisabled,callback:function(t){e.$set(e.$store.state.config.generalConfig,"authDisabled",t)},expression:"$store.state.config.generalConfig.authDisabled"}}),e._v(" "),e.$store.state.config.generalConfig.authDisabled?a("v-card",{staticStyle:{"margin-left":"100px"},attrs:{color:"grey lighten-3"}},[e._v("\n                    External Authentication Method\n                    "),a("v-radio-group",{on:{change:function(t){return e.saveConfiguration("generalConfig","useDhis2Auth")}},model:{value:e.$store.state.config.generalConfig.authMethod,callback:function(t){e.$set(e.$store.state.config.generalConfig,"authMethod",t)},expression:"$store.state.config.generalConfig.authMethod"}},[a("v-radio",{attrs:{label:"dhis2",value:"dhis2",disabled:""}}),e._v(" "),a("v-radio",{attrs:{label:"iHRIS",value:"iHRIS",disabled:""}})],1),e._v(" "),a("v-select",{staticStyle:{width:"350px"},attrs:{label:"Superuser Role Name","item-text":"displayName","item-value":"id",loading:e.loadingDhis2Roles,required:"",items:e.dhis2Roles},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.adminRole,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"adminRole",t)},expression:"$store.state.config.generalConfig.externalAuth.adminRole"}}),e._v(" "),e.$store.state.config.generalConfig.authMethod?a("v-checkbox",{attrs:{label:"Pull org units"},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.pullOrgUnits,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"pullOrgUnits",t)},expression:"$store.state.config.generalConfig.externalAuth.pullOrgUnits"}}):e._e(),e._v(" "),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-checkbox",{attrs:{label:"Share orgs with other users"},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.shareOrgUnits,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"shareOrgUnits",t)},expression:"$store.state.config.generalConfig.externalAuth.shareOrgUnits"}}):e._e(),e._v(" "),e.$store.state.config.generalConfig.externalAuth.shareOrgUnits&&e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-checkbox",{attrs:{label:"Limit orgs sharing by user orgid"},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.shareByOrgId,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"shareByOrgId",t)},expression:"$store.state.config.generalConfig.externalAuth.shareByOrgId"}}):e._e(),e._v(" "),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",label:"Dataset Name","error-messages":e.datasetNameErrors,required:""},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.$store.state.config.generalConfig.externalAuth.datasetName,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"datasetName",t)},expression:"$store.state.config.generalConfig.externalAuth.datasetName"}}):e._e(),e._v(" "),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",label:"Username",required:""},model:{value:e.$store.state.config.generalConfig.externalAuth.userName,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"userName",t)},expression:"$store.state.config.generalConfig.externalAuth.userName"}}):e._e(),e._v(" "),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",label:"Password",type:"password",required:""},model:{value:e.$store.state.config.generalConfig.externalAuth.password,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"password",t)},expression:"$store.state.config.generalConfig.externalAuth.password"}}):e._e(),e._v(" "),a("v-flex",{attrs:{xs3:""}},[e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-btn",{attrs:{color:"primary",disabled:e.datasetNameErrors.length>0||!e.$store.state.config.generalConfig.externalAuth.datasetName,small:"",round:""},on:{click:e.pullOrgUnits}},[e._v("start pulling")]):e._e()],1)],1):e._e()],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                  Self Registration\n                ")]),e._v(" "),a("v-card-text",[a("v-switch",{attrs:{color:"primary",label:"Enable self registration"},on:{change:function(t){return e.saveConfiguration("generalConfig","selfRegistration")}},model:{value:e.$store.state.config.generalConfig.selfRegistration.enabled,callback:function(t){e.$set(e.$store.state.config.generalConfig.selfRegistration,"enabled",t)},expression:"$store.state.config.generalConfig.selfRegistration.enabled"}}),e._v(" "),e.$store.state.config.generalConfig.selfRegistration.enabled?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-treeview",{attrs:{items:e.signupFields}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs8:""}},[a("v-btn",{attrs:{small:"",round:"",color:"success"},on:{click:function(t){e.moreFields=!e.moreFields}}},[e._v("Add More Fields")]),e._v(" "),e.moreFields?a("v-text-field",{attrs:{label:"Field Label"},model:{value:e.fieldLabel,callback:function(t){e.fieldLabel=t},expression:"fieldLabel"}}):e._e(),e._v(" "),e.moreFields?a("v-text-field",{attrs:{label:"Unique Name"},model:{value:e.fieldName,callback:function(t){e.fieldName=t},expression:"fieldName"}}):e._e(),e._v(" "),e.moreFields?a("v-select",{attrs:{items:e.requiredText,label:"Required"},model:{value:e.required,callback:function(t){e.required=t},expression:"required"}}):e._e(),e._v(" "),e.moreFields?a("v-btn",{attrs:{color:"info",small:""},on:{click:e.addMoreFields}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v(" Save\n                      ")],1):e._e(),e._v(" "),e.moreFields?a("v-btn",{attrs:{color:"error",small:""},on:{click:function(t){e.moreFields=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("close")]),e._v(" Cancel\n                      ")],1):e._e()],1)],1):e._e(),e._v(" "),a("v-switch",{attrs:{color:"primary",label:"Requires Admin Approval Of Self Registration"},on:{change:function(t){return e.saveConfiguration("generalConfig","selfRegistration")}},model:{value:e.$store.state.config.generalConfig.selfRegistration.requiresApproval,callback:function(t){e.$set(e.$store.state.config.generalConfig.selfRegistration,"requiresApproval",t)},expression:"$store.state.config.generalConfig.selfRegistration.requiresApproval"}})],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                  Cron Jobs\n                ")]),e._v(" "),a("v-card-text",[e._v("\n                  Autosync Below Remote Datasets\n                  "),a("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",name:"cron_time",label:"Cron Time"},on:{blur:function(t){return e.saveConfiguration("generalConfig","datasetsAutosyncTime")}},model:{value:e.$store.state.config.generalConfig.datasetsAutosyncTime,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAutosyncTime",t)},expression:"$store.state.config.generalConfig.datasetsAutosyncTime"}}),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.cronDataSourceHeaders,items:e.remoteDatasets,"hide-actions":"","pagination.sync":"pagination"},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.name))]),e._v(" "),a("td",[e._v(e._s(t.item.userID.userName))]),e._v(" "),a("td",[e._v("\n                        "+e._s(t.item.createdTime)+"\n                      ")]),e._v(" "),a("td",[a("v-switch",{attrs:{color:"primary"},on:{change:function(a){return e.controlDatasetsCronjobs(t.item)}},model:{value:e.datasetsAutosyncState[t.item._id],callback:function(a){e.$set(e.datasetsAutosyncState,t.item._id,a)},expression:"datasetsAutosyncState[props.item._id]"}})],1)]}}],null,!1,1143142968)})],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-switch",{attrs:{color:"primary",label:"Enable Endpoint Notification when reconciliation is done"},on:{change:function(t){return e.saveConfiguration("generalConfig","recoProgressNotification")}},model:{value:e.$store.state.config.generalConfig.recoProgressNotification.enabled,callback:function(t){e.$set(e.$store.state.config.generalConfig.recoProgressNotification,"enabled",t)},expression:"$store.state.config.generalConfig.recoProgressNotification.enabled"}}),e._v(" "),e.$store.state.config.generalConfig.recoProgressNotification.enabled?a("v-card",{staticStyle:{"margin-left":"100px"},attrs:{color:"grey lighten-3"}},[a("v-card-text",[e._v("\n                  End point to send notification when reconciliation is done\n                ")]),e._v(" "),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-text-field",{attrs:{label:"End point URL",box:""},model:{value:e.notification_endpoint,callback:function(t){e.notification_endpoint=t},expression:"notification_endpoint"}})],1),e._v(" "),a("v-flex",[a("v-text-field",{attrs:{label:"End point Username",box:""},model:{value:e.notification_username,callback:function(t){e.notification_username=t},expression:"notification_username"}})],1),e._v(" "),a("v-flex",[a("v-text-field",{attrs:{label:"End point Password",box:""},model:{value:e.notification_password,callback:function(t){e.notification_password=t},expression:"notification_password"}})],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"success"},on:{click:e.recoProgressNotificationChanged}},[a("v-icon",[e._v("save")]),e._v("Save\n                          ")],1)],1)],1)],1)],1)],1)],1):e._e()],1)],1)],1)],1):e._e()],1)],1),e._v(" "),a("appRemoteSync",{attrs:{syncType:"dhisSync",serverName:e.$store.state.config.generalConfig.externalAuth.datasetName,userID:e.$store.state.auth.userID,sourceOwner:e.$store.state.auth.userID,mode:"full"}})],1)},staticRenderFns:[]},q=a("VU/8")(E,N,!1,null,null,null).exports,O={mounted:function(){this.$store.state.auth.token="",S.a.remove("token"),S.a.remove("userID"),S.a.remove("role"),S.a.remove("username"),this.$router.push("login")}},H={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},j=a("VU/8")(O,H,!1,null,null,null).exports,V={mixins:[U],validations:{role:{required:x.required}},data:function(){return{usersHeader:[{text:"Firstname",value:"firstName"},{text:"Surname",value:"surname"},{text:"Othername",value:"otherName"},{text:"Phone",value:"phone"},{text:"Email",value:"email"},{text:"User Name",value:"username"},{text:"Role",value:"role"},{text:"Status",value:"status"}],users:[],user:{},role:"",approveUserDialog:!1,loadingUsers:!1,searchUsers:"",alertSuccess:!1,alertFail:!1,alertMsg:""}},methods:{displayApprovalDialog:function(e){this.user=e,this.approveUserDialog=!0},changeStatus:function(e){var t=this,a=new FormData;a.append("role",this.role),a.append("status",e),a.append("id",this.user._id),g.a.post("/changeAccountStatus/",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){t.approveUserDialog=!1,t.$store.state.errorTitle="Info",t.$store.state.errorDescription="This request was processed successfully",t.$store.state.dialogError=!0,t.getUsers()}).catch(function(e){t.approveUserDialog=!1,t.$store.state.errorTitle="Error",t.$store.state.errorDescription="An error occured while processing this request, please retry",t.$store.state.dialogError=!0,console.log(e.response.data.error)})},getUsers:function(){var e=this,t=new FormData;t.append("username",this.username),t.append("password",this.password),this.users=[],this.loadingUsers=!0,g.a.get("/getUsers/").then(function(t){e.loadingUsers=!1,e.users=t.data}).catch(function(t){e.loadingUsers=!1,t.hasOwnProperty("response")&&console.log(t.response.data.error)})},accountAction:function(e,t){var a=this,r=t._id,o=new FormData;o.append("id",r),"Active"===e||"Inactive"===e?(o.append("status",e),g.a.post("/changeAccountStatus",o,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){a.alertSuccess=!0,"Active"===e?a.alertMsg="Account activated successfully":"Inactive"===e&&(a.alertMsg="Account deactivated successfully"),a.getUsers()}).catch(function(e){console.log(s()(e)),a.alertFail=!0,a.alertMsg="Action failed"})):"reset"===e&&(o.append("surname",t.surname),g.a.post("/resetPassword",o,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a.alertSuccess=!0,a.alertMsg="Password reseted successfully",a.getUsers()}).catch(function(e){console.log(s()(e)),a.alertFail=!0,a.alertMsg="Action failed"}))}},computed:{roleErrors:function(){var e=[];return this.$v.role.$dirty?(!this.$v.role.required&&e.push("Role is required"),e):e}},created:function(){this.getUsers(),this.getRoles()}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n    "+e._s(e.alertMsg)+"\n  ")]),e._v(" "),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n    "+e._s(e.alertMsg)+"\n  ")]),e._v(" "),a("v-dialog",{attrs:{persistent:"",overlay:!1,"max-width":"500px",transition:"dialog-transition"},model:{value:e.approveUserDialog,callback:function(t){e.approveUserDialog=t},expression:"approveUserDialog"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-spacer"),e._v(" "),a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.approveUserDialog=!1}}},[e._v("close")])],1),e._v(" "),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v("\n        User "+e._s(e.user.userName)+"\n      ")]),e._v(" "),a("v-card-text",[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{x5:""}},[e._v("\n                "+e._s(e.user.firstName)+"\n              ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[e._v("\n                "+e._s(e.user.surname)+"\n              ")])],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{x5:""}},[e._v("\n                "+e._s(e.user.phone)+"\n              ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[e._v("\n                "+e._s(e.user.email)+"\n              ")])],1)],1),e._v(" "),a("v-flex",[a("v-select",{attrs:{required:"",items:e.roles,"single-line":"",clearable:"","error-messages":e.roleErrors,box:"",label:"Role"},on:{blur:function(t){return e.$v.role.$touch()},change:function(t){return e.$v.role.$touch()}},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},on:{click:function(t){return e.changeStatus("Rejected")}}},[a("v-icon",[e._v("clear")]),e._v("Reject\n        ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.changeStatus("Active")}}},[a("v-icon",{attrs:{left:""}},[e._v("language")]),e._v("Approve\n        ")],1)],1)],1)],1),e._v(" "),a("v-card",{staticClass:"mx-auto",attrs:{color:"cyan lighten-5",width:"1500px"}},[a("v-card-title",{attrs:{"primary-title":"",width:"1000"}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v("\n        Users List\n        "),a("v-spacer"),e._v(" "),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}})],1)],1),e._v(" "),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers,dark:"",loading:e.$store.state.loadingusers},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.firstName))]),e._v(" "),a("td",[e._v(e._s(t.item.surname))]),e._v(" "),a("td",[e._v(e._s(t.item.otherName))]),e._v(" "),a("td",[e._v(e._s(t.item.phone))]),e._v(" "),a("td",[e._v(e._s(t.item.email))]),e._v(" "),a("td",[e._v(e._s(t.item.userName))]),e._v(" "),t.item.role?a("td",[e._v(e._s(t.item.role.name))]):a("td"),e._v(" "),a("td",[e._v(e._s(t.item.status))]),e._v(" "),"Pending"===t.item.status||"Rejected"===t.item.status?a("td",[a("v-btn",{attrs:{color:"success",small:""},on:{click:function(a){return e.displayApprovalDialog(t.item)}}},[e._v("Approve/Reject")])],1):a("td",["Active"===t.item.status?a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(a){return e.accountAction("Inactive",t.item)}}},[e._v("Deactivate")]):a("v-btn",{attrs:{small:"",color:"success"},on:{click:function(a){return e.accountAction("Active",t.item)}}},[e._v("Activate")]),e._v(" "),a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(a){return e.accountAction("reset",t.item)}}},[a("v-icon",{attrs:{left:""}},[e._v("refresh")]),e._v(" Reset Password\n            ")],1)],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)],1)},staticRenderFns:[]},W=a("VU/8")(V,B,!1,null,null,null).exports,G={mixins:[U],validations:{userName:{required:x.required},retype_password:{required:x.required},password:{required:x.required},role:{required:x.required},firstName:{required:x.required},surname:{required:x.required},phone:{required:x.required},email:{required:x.required}},data:function(){return{firstName:"",otherName:"",surname:"",phone:"",email:"",userName:"",password:"",retype_password:"",role:"",customFields:[],phoneErrors:[],emailErrors:[]}},methods:{validateEmail:function(){if(this.emailErrors=[],!this.email)return this.emailErrors.push("Email is required"),!1;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)?void 0:(this.emailErrors.push("Invalid Email"),!1)},validatePhone:function(){if(this.phoneErrors=[],!this.phone)return this.phoneErrors.push("Phone is required");return/^[+]?[\s./0-9]*[(]?[0-9]{1,4}[)]?[-\s./0-9]*$/g.test(this.phone)?void 0:this.phoneErrors.push("Invalid phone number")},addUser:function(){var e=this;if(this.password!==this.retype_password)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Password mismatch");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Saving User";var t=new FormData;for(var a in t.append("firstName",this.firstName),t.append("otherName",this.otherName),t.append("password",this.password),t.append("userName",this.userName),t.append("surname",this.surname),t.append("phone",this.phone),t.append("email",this.email),t.append("role",this.role),this.customFields)t.append(a,this.customFields[a]);g.a.post("/addUser/",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="User added successfully",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1}).catch(function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="This user was not added, ensure userName is not used",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t.response.data.error)})}},computed:{codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},firstnameErrors:function(){var e=[];return this.$v.firstName.$dirty?(!this.$v.firstName.required&&e.push("First Name is required"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},usernameErrors:function(){var e=[];return this.$v.userName.$dirty?(!this.$v.userName.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e},roleErrors:function(){var e=[];return this.$v.role.$dirty?(!this.$v.role.required&&e.push("Role is required"),e):e}},created:function(){this.getRoles()}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),e._v(" "),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Add New User")])],1),e._v(" "),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,box:"",color:"deep-purple",label:"First Name*"},on:{blur:function(t){return e.$v.firstName.$touch()},change:function(t){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),e._v(" "),a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Middle Names"},model:{value:e.otherName,callback:function(t){e.otherName=t},expression:"otherName"}}),e._v(" "),a("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,box:"",color:"deep-purple",label:"Surname*"},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}}),e._v(" "),a("v-text-field",{attrs:{required:"","error-messages":e.phoneErrors,box:"",color:"deep-purple",label:"Phone*"},on:{blur:e.validatePhone,change:e.validatePhone,input:e.validatePhone},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._v(" "),a("v-text-field",{attrs:{required:"","error-messages":e.emailErrors,box:"",color:"deep-purple",label:"Email*"},on:{blur:e.validateEmail,change:e.validateEmail,input:e.validateEmail},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),a("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,box:"",color:"deep-purple",label:"Username*"},on:{blur:function(t){return e.$v.userName.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),e._v(" "),e._l(e.$store.state.customSignupFields,function(t,r){return a("label",{key:r},[(t.required,a("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:t.display},model:{value:e.customFields[r],callback:function(t){e.$set(e.customFields,r,t)},expression:"customFields[name]"}}))],1)}),e._v(" "),a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",box:"",color:"deep-purple",label:"Password*"},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",box:"",color:"deep-purple",label:"Re-type Password*"},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}}),e._v(" "),a("v-select",{attrs:{required:"",items:e.roles,"single-line":"",clearable:"","error-messages":e.roleErrors,box:"",label:"Role*"},on:{blur:function(t){return e.$v.role.$touch()},change:function(t){return e.$v.role.$touch()}},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],2),e._v(" "),a("v-divider"),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[a("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addUser()}}},[a("v-icon",{attrs:{left:""}},[e._v("language")]),e._v("Add\n          ")],1)],1)],1)],1),e._v(" "),a("v-spacer")],1)],1)},staticRenderFns:[]},J=a("VU/8")(G,z,!1,null,null,null).exports,Y={mixins:[U],data:function(){return{role:{},task:""}},methods:{roleSelected:function(e){this.role=this.roles.find(function(t){return t.value===e})},saveRole:function(){var e=this;this.$store.state.progressTitle="Updating role",this.$store.state.dynamicProgress=!0;var t=new FormData;t.append("role",s()(this.role)),g.a.post("/updateRole",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Info",e.$store.state.errorColor="primary",e.$store.state.errorDescription="Role "+e.role.text+" updated successfully",e.getRoles()}).catch(function(t){e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorColor="error",e.$store.state.errorDescription="An error has occured while updating role "+e.role.text,console.log(t)})}},created:function(){this.getRoles(),this.getTasks()}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[e._v("\n  Select role to edit tasks\n  "),a("v-select",{attrs:{required:"",items:e.roles,"single-line":"",box:"",label:"Select Role"},on:{change:e.roleSelected}}),e._v(" "),e.role.value?a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v("\n      Tasks assigned to role "+e._s(e.role.text)+"\n    ")]),e._v(" "),a("v-card-text",[a("v-data-table",{attrs:{items:e.tasks,height:"10px","hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",[a("v-checkbox",{attrs:{value:t.item._id},model:{value:e.role.tasks,callback:function(t){e.$set(e.role,"tasks",t)},expression:"role.tasks"}})],1),e._v(" "),a("td",[e._v(e._s(t.item.display))])])]}}],null,!1,1275383574)})],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:e.saveRole}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v(" Save\n      ")],1)],1)],1):e._e()],1)},staticRenderFns:[]},X=a("VU/8")(Y,K,!1,null,null,null).exports,Z={validations:{retype_password:{required:x.required},password:{required:x.required},oldPassword:{required:x.required}},data:function(){return{oldPassword:"",password:"",retype_password:""}},methods:{changePassword:function(){var e=this;if(this.password!==this.retype_password)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Password mismatch");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Changing Password";var t=new FormData;t.append("password",this.password),t.append("id",this.$store.state.auth.userID),g.a.post("/changePassword/",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="Password changed successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1}).catch(function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="Password change failed!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t.response.data.error)})},verifyPassword:function(){var e=this,t=new FormData;t.append("username",this.$store.state.auth.username),t.append("password",this.oldPassword),g.a.post("/authenticate/",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){t.data.token?e.changePassword():(e.alertFail=!0,e.alertMsg="Wrong Old Password")}).catch(function(e){console.log(s()(e))})}},computed:{oldPasswordErrors:function(){var e=[];return this.$v.oldPassword.$dirty?(!this.$v.oldPassword.required&&e.push("Old Password is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e}}},Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),e._v(" "),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Change Password")])],1),e._v(" "),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.oldPasswordErrors,type:"password",box:"",color:"deep-purple",label:"Old Password"},on:{blur:function(t){return e.$v.oldPassword.$touch()},change:function(t){return e.$v.oldPassword.$touch()}},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}}),e._v(" "),a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",box:"",color:"deep-purple",label:"Password"},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",box:"",color:"deep-purple",label:"Re-type Password"},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}})],1),e._v(" "),a("v-divider"),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[a("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.verifyPassword()}}},[a("v-icon",{attrs:{left:""}},[e._v("how_to_reg")]),e._v("Change\n          ")],1)],1)],1)],1),e._v(" "),a("v-spacer")],1)],1)},staticRenderFns:[]},ee=a("VU/8")(Z,Q,!1,null,null,null).exports,te=a("woOf"),ae=a.n(te),re=a("ZIfW"),se=g.a.CancelToken,oe={mixins:[U],data:function(){return{loadingSource2Unmatched:!1,loadingSource1Unmatched:!1,topTree:""}},methods:{scoreProgressCheckTimeout:function(){this.$store.state.scoresProgressData.scoreProgressTitle="Server is busy with automatching, please be patient",clearInterval(this.$store.state.scoresProgressData.progressReqTimer);var e=parseInt(this.$store.state.scoresProgressData.scoreProgressPercent);100!==e||100===e&&"final"!==this.$store.state.scoresProgressData.stage?(this.$store.state.scoresProgressData.requestCancelled=!0,this.$store.state.scoresProgressData.cancelTokenSource.cancel("Cancelling request."),this.checkScoreProgress()):this.$store.state.scoresProgressData.scoreProgressTitle="Please be patient, waiting for server response"},scoreSavingProgressCheckTimeout:function(){clearInterval(this.$store.state.scoreSavingProgressData.progressReqTimer),this.$store.state.scoreSavingProgressData.requestCancelled=!0,this.$store.state.scoreSavingProgressData.cancelTokenSource.cancel("Cancelling request."),this.checkScoreSavingStatus()},checkScoreProgress:function(){var e=this;this.$store.state.scoresProgressData.cancelTokenSource=se.source(),this.$store.state.scoresProgressData.progressReqTimer=setInterval(this.scoreProgressCheckTimeout,1e4);var t=this.$store.state.clientId;g.a.get("/progress/scoreResults/"+t,{cancelToken:this.$store.state.scoresProgressData.cancelTokenSource.token}).then(function(t){if(clearInterval(e.$store.state.scoresProgressData.progressReqTimer),!t.data||!(t.data.status||t.data.percent||t.data.error||0!==e.$store.state.scoreResults.length))return e.$store.state.scoresProgressData.scoreDialog=!1,e.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status",e.$store.state.errorTitle="An error has occured",e.$store.state.errorDescription="An error has occured while reaching out to server, please click recalculate scores to restart automatch",e.$store.state.errorColor="error",e.$store.state.dialogError=!0,e.clearProgress("scoreResults"),e.$store.state.scoreSavingProgressData.savingMatches=!0,void e.checkScoreSavingStatus();if(null===t.data.status&&null===t.data.percent&&null===t.data.error&&e.$store.state.scoreResults.length>0)return e.$store.state.scoresProgressData.scoreDialog=!1,e.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status",e.clearProgress("scoreResults"),e.$store.state.scoreSavingProgressData.savingMatches=!0,void e.checkScoreSavingStatus();if(e.$store.state.scoresProgressData.scoreProgressTitle=t.data.status,t.data.percent&&("percent"!==e.$store.state.scoresProgressData.progressType&&(e.$store.state.scoresProgressData.progressType="percent"),e.$store.state.scoresProgressData.scoreProgressPercent=t.data.percent,e.$store.state.scoresProgressData.stage=t.data.stage),"Done"===t.data.status&&0===e.$store.state.scoreResults.length){e.clearProgress("scoreResults"),e.$store.state.scoreSavingProgressData.savingMatches=!0,e.checkScoreSavingStatus(),e.loadingSource1Unmatched=!1,e.loadingSource2Unmatched=!1;var a=t.data.responseData;e.$store.state.source2UnMatched=a.source2Unmatched,e.$store.state.source1UnMatched=[],e.$store.state.matchedContent=[],e.$store.state.noMatchContent=[],e.$store.state.ignoreContent=[],e.$store.state.flagged=[],e.$store.state.scoreResults=a.scoreResults,e.$store.state.source2TotalRecords=a.source2TotalRecords,e.$store.state.source2TotalAllRecords=a.source2TotalAllRecords,e.$store.state.totalAllMapped=a.totalAllMapped,e.$store.state.totalAllFlagged=a.totalAllFlagged,e.$store.state.totalAllNoMatch=a.totalAllNoMatch,e.$store.state.totalAllIgnore=a.totalAllIgnore,e.$store.state.source1TotalAllNotMapped=a.source1TotalAllNotMapped,e.$store.state.source1TotalAllRecords=a.source1TotalAllRecords;var r=!0,s=!1,o=void 0;try{for(var i,n=c()(e.$store.state.scoreResults);!(r=(i=n.next()).done);r=!0){var l=i.value;if(l.source1.hasOwnProperty("tag")&&"flagged"===l.source1.tag)e.$store.state.flagged.push({source1Name:l.source1.name,source1Id:l.source1.id,source1UUID:l.source1.uuid,source1IdHierarchy:l.source1.source1IdHierarchy,source1Parents:l.source1.parents,source2Name:l.exactMatch.name,source2Id:l.exactMatch.id,source2IdHierarchy:l.exactMatch.source2IdHierarchy,mappedParentName:l.exactMatch.mappedParentName,source2Parents:l.exactMatch.parents,flagComment:l.source1.flagComment});else if(l.source1.hasOwnProperty("tag")&&"noMatch"===l.source1.tag){var u=l.source1.parents;e.$store.state.noMatchContent.push({source1Name:l.source1.name,source1Id:l.source1.id,source1UUID:l.source1.uuid,parents:u})}else if(l.source1.hasOwnProperty("tag")&&"ignore"===l.source1.tag){var d=l.source1.parents;e.$store.state.ignoreContent.push({source1Name:l.source1.name,source1Id:l.source1.id,source1UUID:l.source1.uuid,parents:d})}else if(p()(l.exactMatch).length>0)e.$store.state.matchedContent.push({source1Name:l.source1.name,source1Id:l.source1.id,source1UUID:l.source1.uuid,source1Parents:l.source1.parents,source2Name:l.exactMatch.name,source2Id:l.exactMatch.id,source2IdHierarchy:l.exactMatch.source2IdHierarchy,mappedParentName:l.exactMatch.mappedParentName,source2Parents:l.exactMatch.parents,matchComments:l.exactMatch.matchComments});else{for(var v=e.topTree,h=l.source1.parents.length-1;h>=0;h--)v[l.source1.parents[h]]||(v[l.source1.parents[h]]={}),v=v[l.source1.parents[h]];e.$store.state.source1UnMatched.push({name:l.source1.name,id:l.source1.id,UUID:l.source1.uuid,parents:l.source1.parents})}}}catch(e){s=!0,o=e}finally{try{!r&&n.return&&n.return()}finally{if(s)throw o}}e.$store.state.source1Parents=e.topTree,e.$store.state.scoresProgressData.scoreDialog=!1,e.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status"}else e.checkScoreProgress()}).catch(function(t){e.$store.state.scoresProgressData.requestCancelled?e.$store.state.scoresProgressData.requestCancelled=!1:(clearInterval(e.$store.state.scoresProgressData.progressReqTimer),e.checkScoreProgress())})},checkScoreSavingStatus:function(){var e=this;this.$store.state.scoreSavingProgressData.cancelTokenSource=se.source(),this.$store.state.scoreSavingProgressData.progressReqTimer=setInterval(this.scoreSavingProgressCheckTimeout,1e4);var t=this.$store.state.clientId;g.a.get("/progress/scoreSavingStatus/"+t,{cancelToken:this.$store.state.scoreSavingProgressData.cancelTokenSource.token}).then(function(t){return clearInterval(e.$store.state.scoreSavingProgressData.progressReqTimer),t.data&&(t.data.status||t.data.percent||t.data.error||!e.$store.state.scoreSavingProgressData.savingMatches)?t.data.status||t.data.percent||t.data.error||e.$store.state.scoreSavingProgressData.savingMatches?(t.data.percent&&(e.$store.state.scoreSavingProgressData.percent=t.data.percent),void(100===t.data.percent?(e.$store.state.scoreSavingProgressData.savingMatches=!1,e.$store.state.scoreSavingProgressData.percent=0,e.clearProgress("scoreSavingStatus")):e.checkScoreSavingStatus())):(e.$store.state.scoreSavingProgressData.savingMatches=!1,e.$store.state.scoreSavingProgressData.percent=0,void e.clearProgress("scoreSavingStatus")):(e.$store.state.errorTitle="An error has occured",e.$store.state.errorDescription="An error has occured while checking saving status",e.$store.state.errorColor="error",e.$store.state.dialogError=!0,e.$store.state.scoreSavingProgressData.savingMatches=!1,e.$store.state.scoreSavingProgressData.percent=0,void e.clearProgress("scoreSavingStatus"))}).catch(function(t){e.$store.state.scoreSavingProgressData.requestCancelled?e.$store.state.scoreSavingProgressData.requestCancelled=!1:(clearInterval(e.$store.state.scoreSavingProgressData.progressReqTimer),e.checkScoreSavingStatus())})},getScores:function(){var e=this,t=this.getSource1(),a=this.getSource2(),r=this.getDatasourceOwner();if(this.$store.state.source1UnMatched=[],this.$store.state.source2UnMatched=[],this.$store.state.matchedContent=[],this.$store.state.noMatchContent=[],this.$store.state.ignoreContent=[],this.$store.state.flagged=[],this.$store.state.source1TotalAllRecords=0,this.$store.state.totalAllMapped=0,this.$store.state.totalAllFlagged=0,this.$store.state.totalAllNoMatch=0,this.$store.state.totalAllIgnore=0,this.$store.state.source2TotalRecords=0,this.$store.state.scoreResults=[],t&&a){this.loadingSource1Unmatched=!0,this.loadingSource2Unmatched=!0,this.$store.state.scoresProgressData.scoreDialog=!0,this.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status",this.$store.state.scoresProgressData.progressType="indeterminate";var o=this.$store.state.recoLevel,i=this.$store.state.totalSource1Levels,n=this.$store.state.totalSource2Levels,l=this.$store.state.clientId;this.topTree=this.$store.state.source1Parents.slice(0,this.$store.state.source1Parents.length),this.$store.state.levelArray=[];for(var c=1;c<this.$store.state.totalSource1Levels;c++){var u;c+1>this.$store.state.recoLevel||(u=this.translateDataHeader("source1",c),this.$store.state.levelArray.push({text:u,value:c+1}))}var d=this.$store.state.activePair.userID._id,v="source1="+t+"&source2="+a+"&source1Owner="+r.source1Owner+"&source2Owner="+r.source2Owner+"&source1LimitOrgId="+this.getLimitOrgIdOnActivePair().source1LimitOrgId+"&source2LimitOrgId="+this.getLimitOrgIdOnActivePair().source2LimitOrgId+"&totalSource1Levels="+i+"&totalSource2Levels="+n;v+="&recoLevel="+o+"&clientId="+l+"&userID="+d+"&parentConstraint="+s()(this.$store.state.config.generalConfig.reconciliation.parentConstraint),g.a.get("/reconcile/?"+v).then(function(){e.checkScoreProgress()})}},getSource1:function(){var e=this.$store.state.activePair.source1.name;return e&&(e=this.toTitleCase(e)),e},getSource2:function(){var e=this.$store.state.activePair.source2.name;return e&&(e=this.toTitleCase(e)),e},getSource1Name:function(){return this.$store.state.activePair.source1.name},getSource2Name:function(){return this.$store.state.activePair.source2.name}},created:function(){var e=this;Gt.$on("changeCSVHeaderNames",function(){e.$store.state.levelArray=[];for(var t=1;t<e.$store.state.totalSource1Levels;t++){var a;t+1>e.$store.state.recoLevel||(a=e.translateDataHeader("source1",t),e.$store.state.levelArray.push({text:a,value:t+1}))}})}},ie={validations:{editLocationName:{required:x.required}},mixins:[oe,U],data:function(){return{confirmDelete:!1,deleteLocationData:"",deleteSource:{name:"",value:""},editDialog:!1,editLocationName:"",editLocationId:"",editParents:[],editLocationParent:"",editSource:"",helpDialog:!1,lastLevel:[],headerText:{level2:"Level 1",level3:"Level 2",level4:"Level 3",level5:"Level 4",level6:"Level 5",level7:"Level 6",level8:"Level 7",level9:"Level 8",level10:"Level 9",facility:"Facility",latitude:"Latitude",longitude:"Longitude"},headers:[{text:"Level 1",value:"level1"},{text:"Level 2",value:"level2"},{text:"Level 3",value:"level3"},{text:"Level 4",value:"level4"},{text:"Facility",value:"facility"},{text:"Latitude",value:"latitude"},{text:"Longitude",value:"longitude"}],searchSource1:"",searchSource2:"",filterSource1:{text:"",level:""},filterSource2:{text:"",level:""},source2Pagination:{rowsPerPage:20},source1Pagination:{rowsPerPage:20},loadingSource1:!1,loadingSource2:!1,totalSource1Records:0,totalSource2Records:0,source2Grid:[],source1Grid:[],source1Tree:[],source2Tree:[],source1Start:1,source2Start:1,source1Count:10,source2Count:10,loadingSource1Tree:!1,loadingSource2Tree:!1,loadingSource1Grid:!1,loadingSource2Grid:!1,currentSource2Pagination:{},currentSource1Pagination:{},source1SelNodeId:!1,source2SelNodeId:!1,sourceOwner:""}},methods:{edit:function(e,t){var a=this.getDatasourceOwner();"source1"===t?(this.sourceOwner=a.source1Owner,this.editSource=this.source1):"source2"===t&&(this.sourceOwner=a.source1Owner,this.editSource=this.source2),this.editLocationName=e.facility,this.editLocationId=e.id,this.editDialog=!0;var r=p()(this.source2GridHeader).length,s=this.source2GridHeader[r-1].value;this.editLocationParent=e[s+"id"];var o=s.replace("level","");this.getLevelData(o)},saveEdit:function(){var e=this,t=new FormData;t.append("sourceOwner",this.sourceOwner),t.append("source",this.editSource),t.append("locationId",this.editLocationId),t.append("locationName",this.editLocationName),t.append("locationParent",this.editLocationParent),g.a.post("/editLocation",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.editDialog=!1,e.getSource1Grid(!1),e.getSource2Grid(!1),e.getTree()}).catch(function(e){console.log(s()(e))})},deleteLocation:function(e,t,a){var r=this;if("requestConfirmation"===a){var s=this.getDatasourceOwner();"source1"===t?(this.sourceOwner=s.source1Owner,this.deleteSource={name:"source1",sourceId:this.$store.state.activePair.source1.id,sourceName:this.source1}):"source2"===t&&(this.sourceOwner=s.source2Owner,this.deleteSource={name:"source2",sourceId:this.$store.state.activePair.source2.id,sourceName:this.source2}),this.deleteLocationData=e,this.confirmDelete=!0}else{this.confirmDelete=!1;var o=this.$store.state.activePair.userID._id,i="id="+this.deleteLocationData.id+"&sourceId="+this.deleteSource.sourceId+"&sourceName="+this.deleteSource.sourceName+"&userID="+o+"&sourceOwner="+this.sourceOwner;g.a.delete("/deleteLocation?"+i).then(function(e){"source1"===r.deleteSource.name?r.getSource1Grid(!1):r.getSource2Grid(!1)})}},getLevelData:function(e){var t=this;g.a.get("/getLevelData/"+this.editSource+"/"+this.sourceOwner+"/"+e).then(function(e){t.editParents=e.data})},getSource1Grid:function(e){var t=this;if(this.source1){this.loadingSource1=!0,e||(e=""),this.loadingSource1Grid=!0;var a=this.getDatasourceOwner().source1Owner,r=this.getLimitOrgIdOnActivePair().source1LimitOrgId,s=this.$store.state.activePair.userID._id,o="/hierarchy?source="+this.source1+"&start="+this.source1Start+"&count="+this.source1Count+"&id="+e+"&userID="+s+"&sourceOwner="+a+"&sourceLimitOrgId="+r;g.a.get(""+o).then(function(e){if(t.loadingSource1Grid=!1,e.data){var a=t.source1Pagination,r=a.sortBy,s=a.descending;t.source1Pagination.sortBy&&(e.data.tree=e.data.grid.sort(function(e,t){var a=e[r],o=t[r];return s?a<o?1:a>o?-1:0:a<o?-1:a>o?1:0})),t.source1Grid=e.data.grid,t.totalSource1Records=e.data.total,t.source1Pagination.totalItems=e.data.total,t.currentSource1Pagination=ae()({},t.source1Pagination),t.currentSource1Pagination.hasOwnProperty("descending")||(t.currentSource1Pagination.descending=!1),t.currentSource1Pagination.hasOwnProperty("page")||(t.currentSource1Pagination.page=1),t.currentSource1Pagination.hasOwnProperty("sortBy")||(t.currentSource1Pagination.sortBy="facility"),t.currentSource1Pagination.hasOwnProperty("totalItems")||(t.currentSource1Pagination.totalItems=e.data.total)}t.loadingSource1=!1})}},getSource2Grid:function(e){var t=this;if(this.source2){e||(e=""),this.loadingSource2=!0,this.loadingSource2Grid=!0;var a=this.getDatasourceOwner().source2Owner,r=this.getLimitOrgIdOnActivePair().source2LimitOrgId,s=this.$store.state.activePair.userID._id,o="/hierarchy?source="+this.source2+"&start="+this.source2Start+"&count="+this.source2Count+"&id="+e+"&userID="+s+"&sourceOwner="+a+"&sourceLimitOrgId="+r;g.a.get(""+o).then(function(e){if(t.loadingSource2Grid=!1,e.data){var a=t.source2Pagination,r=a.sortBy,s=a.descending;t.source2Pagination.sortBy&&(e.data.tree=e.data.grid.sort(function(e,t){var a=e[r],o=t[r];return s?a<o?1:a>o?-1:0:a<o?-1:a>o?1:0})),t.source2Grid=e.data.grid,t.totalSource2Records=e.data.total,t.source2Pagination.totalItems=e.data.total,t.currentSource2Pagination=ae()({},t.source2Pagination),t.currentSource2Pagination.hasOwnProperty("descending")||(t.currentSource2Pagination.descending=!1),t.currentSource2Pagination.hasOwnProperty("page")||(t.currentSource2Pagination.page=1),t.currentSource2Pagination.hasOwnProperty("sortBy")||(t.currentSource2Pagination.sortBy="facility"),t.currentSource2Pagination.hasOwnProperty("totalItems")||(t.currentSource2Pagination.totalItems=e.data.total)}t.loadingSource2=!1})}},getTree:function(){var e=this;if(this.source1&&this.source2){var t=this.getDatasourceOwner().source2Owner,a=this.getLimitOrgIdOnActivePair().source2LimitOrgId;this.loadingSource2Tree=!0,g.a.get("/getTree/"+this.source2+"/"+t+"/"+a).then(function(t){e.loadingSource2Tree=!1,t.data&&(e.source2Tree=t.data)});var r=this.getDatasourceOwner().source1Owner,s=this.getLimitOrgIdOnActivePair().source1LimitOrgId;this.loadingSource1Tree=!0,g.a.get("/getTree/"+this.source1+"/"+r+"/"+s).then(function(t){e.loadingSource1Tree=!1,t.data&&(e.source1Tree=t.data)})}},source1NodeSelected:function(e){this.source1SelNodeId=e.id,this.getSource1Grid(e.id)},source2NodeSelected:function(e){this.source2SelNodeId=e.id,this.getSource2Grid(e.id)}},computed:{isDataset1Owner:function(){return this.getDatasourceOwner().source1Owner===this.$store.state.auth.userID},isDataset2Owner:function(){return this.getDatasourceOwner().source2Owner===this.$store.state.auth.userID},source2GridHeader:function(){var e=[];this.isDataset2Owner&&e.push({text:"",value:"",sortable:!1});var t={};if(this.source2Grid&&this.source2Grid.length>0)for(var a in this.source2Grid)t.length>0&&this.source2Grid[a].length>p()(t).length?t=this.source2Grid[a]:0===p()(t).length&&(t=this.source2Grid[a]);for(var r in t)this.headerText[r]&&e.push({text:this.headerText[r],value:r});return e},source1GridHeader:function(){var e=[];this.isDataset1Owner&&e.push({text:"",value:"",sortable:!1});var t={};if(this.source1Grid&&this.source1Grid.length>0)for(var a in this.source1Grid)t.length>0&&this.source1Grid[a].length>p()(t).length?t=this.source1Grid[a]:0===p()(t).length&&(t=this.source1Grid[a]);if(this.source1Grid&&this.source1Grid.length>0)for(var r in this.source1Grid[0])this.headerText[r]&&e.push({text:this.headerText[r],value:r});return e},source2Pages:function(){return null==this.source2Pagination.rowsPerPage||null==this.source2Pagination.totalItems?0:Math.ceil(this.source2Pagination.totalItems/this.source2Count)},source1Pages:function(){return null==this.source1Pagination.rowsPerPage||null==this.source1Pagination.totalItems?0:Math.ceil(this.source1Pagination.totalItems/this.source1Count)},source1:function(){var e=this.$store.state.activePair.source1.name;return e&&(e=this.toTitleCase(e)),e},source2:function(){var e=this.$store.state.activePair.source2.name;return e&&(e=this.toTitleCase(e)),e},editLocationNameErrors:function(){var e=[];return this.$v.editLocationName.$dirty?(!this.$v.editLocationName.required&&e.push("Facility Name is required"),e):e}},watch:{source1Pagination:{handler:function(){if(this.currentSource1Pagination.sortBy!==this.source1Pagination.sortBy||this.currentSource1Pagination.descending!==this.source1Pagination.descending||this.currentSource1Pagination.page!==this.source1Pagination.page){var e=this.source1Pagination.page-1;this.source1Start=e*this.source1Count+1,this.getSource1Grid(this.source1SelNodeId)}},deep:!0},source2Pagination:{handler:function(){if(this.currentSource2Pagination.sortBy!==this.source2Pagination.sortBy||this.currentSource2Pagination.descending!==this.source2Pagination.descending||this.currentSource2Pagination.page!==this.source2Pagination.page){var e=this.source2Pagination.page-1;this.source2Start=e*this.source2Count+1,this.getSource2Grid(this.source2SelNodeId)}},deep:!0}},mounted:function(){this.getSource1Grid(!1),this.getSource2Grid(!1),this.getTree()},components:{"liquor-tree":re.a}},ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[e.$store.state.uploadRunning?[a("br"),a("br"),a("br"),e._v(" "),a("v-alert",{attrs:{type:"info",value:!0}},[a("b",[e._v("Wait for upload to finish ...")]),e._v(" "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)]:e._e(),e._v(" "),!e.$store.state.denyAccess&!e.$store.state.uploadRunning?[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("info")]),e._v(" About this page\n              ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[e._v("\n              This page let you view dat you have uploaded or synchronized from a remote server\n              "),a("v-list",[e._v("1. Use the tree to filter grid data")])],1)],1)],1),e._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"primary"},on:{click:function(t){e.helpDialog=!0}},slot:"activator"},[a("v-icon",[e._v("help")])],1),e._v(" "),a("span",[e._v("Help")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.confirmDelete,callback:function(t){e.confirmDelete=t},expression:"confirmDelete"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n            Warning\n          ")])],1),e._v(" "),a("v-card-text",[e._v("\n          Are you sure that you want to delete "+e._s(e.deleteLocationData.facility)+"\n        ")]),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.confirmDelete=!1}}},[e._v("Cancel")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.deleteLocation()}}},[e._v("Proceed")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",{attrs:{height:"500px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n            Edit Location\n          ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.editDialog=!1}}},[e._v("close")])],1),e._v(" "),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-text-field",{attrs:{"error-messages":e.editLocationNameErrors,required:"",label:"Facility"},on:{blur:function(t){return e.$v.editLocationName.$touch()},change:function(t){return e.$v.editLocationName.$touch()}},model:{value:e.editLocationName,callback:function(t){e.editLocationName=t},expression:"editLocationName"}})],1),e._v(" "),a("v-flex",[a("v-select",{attrs:{items:e.editParents,box:"",label:"Parent"},model:{value:e.editLocationParent,callback:function(t){e.editLocationParent=t},expression:"editLocationParent"}})],1)],1)],1)],1),e._v(" "),a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-toolbar",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:"","text-sm-left":""}},[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("cancel")]),e._v(" Cancel\n                ")],1)],1),e._v(" "),a("v-flex",{attrs:{xs6:"","text-sm-right":""}},[a("v-btn",{attrs:{color:"primary",disabled:e.$v.$invalid,dark:""},on:{click:function(t){return e.saveEdit()}}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Save\n                ")],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v("Source 1 Data Tree")])]),e._v(" "),e.loadingSource1Tree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("p",[a("liquor-tree",{ref:"source1Tree",attrs:{data:e.source1Tree,options:{}},on:{"node:selected":e.source1NodeSelected}})],1)])]],2)],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v("Source 2 Data Tree")])]),e._v(" "),e.loadingSource2Tree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("p",[a("liquor-tree",{ref:"source2Tree",attrs:{data:e.source2Tree,options:{}},on:{"node:selected":e.source2NodeSelected}})],1)])]],2)],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v("Source 1 Data Grid")])]),e._v(" "),e.loadingSource1Grid?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source1GridHeader,items:e.source1Grid,search:e.searchSource1,pagination:e.source1Pagination,"total-items":e.totalSource1Records,loading:e.loadingSource1,"hide-actions":""},on:{"update:pagination":function(t){e.source1Pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.source1GridHeader,function(r,s){return a("td",{key:r.value+1,staticStyle:{"white-space":"nowrap",overflow:"hidden"}},[0===s&&e.isDataset1Owner?[a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.edit(t.item,"source1")}}},[e._v("edit")]),e._v(" |\n                      "),a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.deleteLocation(t.item,"source1","requestConfirmation")}}},[e._v("delete")])]:[e._v("\n                      "+e._s(t.item[r.value])+"\n                    ")]],2)})}}],null,!1,2360727723)})],1),e._v(" "),a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:e.source1Pages},model:{value:e.source1Pagination.page,callback:function(t){e.$set(e.source1Pagination,"page",t)},expression:"source1Pagination.page"}})],1)]],2)],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v("Source 2 Data Grid")])]),e._v(" "),e.loadingSource2Grid?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source2GridHeader,items:e.source2Grid,search:e.searchSource2,pagination:e.source2Pagination,"total-items":e.totalSource2Records,loading:e.loadingSource2,"hide-actions":""},on:{"update:pagination":function(t){e.source2Pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.source2GridHeader,function(r,s){return a("td",{key:r.value+2,staticStyle:{"white-space":"nowrap",overflow:"hidden"}},[0===s&&e.isDataset2Owner?[a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.edit(t.item,"source2")}}},[e._v("edit")]),e._v(" |\n                      "),a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.deleteLocation(t.item,"source2","requestConfirmation")}}},[e._v("delete")])]:[e._v("\n                      "+e._s(t.item[r.value])+"\n                    ")]],2)})}}],null,!1,3193632648)})],1),e._v(" "),a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:e.source2Pages},model:{value:e.source2Pagination.page,callback:function(t){e.$set(e.source2Pagination,"page",t)},expression:"source2Pagination.page"}})],1)]],2)],1)],1),e._v(" "),a("br"),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs1:"",xl10:""}},[a("v-btn",{attrs:{color:"primary",dark:""},on:{click:function(t){return e.$router.push({name:"FacilityReconScores"})}}},[a("v-icon",[e._v("find_in_page")]),e._v("\n          Reconcile\n        ")],1)],1)],1)]:e._e()],2)},staticRenderFns:[]};var le=a("VU/8")(ie,ne,!1,function(e){a("6k/U")},"data-v-945fc5c2",null).exports,ce={mixins:[oe,U],data:function(){return{loadingCSV:!1,loadingFHIR:!1,downloadDialog:!1,matchedDownloadData:"",unmatchedSource1DownloadData:"",unmatchedSource2DownloadData:"",downloadType:""}},methods:{closeDownloadDialog:function(){this.downloadDialog=!1,this.matchedDownloadData="",this.unmatchedSource1DownloadData="",this.unmatchedSource2DownloadData=""},matchedLocations:function(e){var t=this.$store.state.activePair.userID._id,a=this.getSource1(),r=this.getSource2(),o=this.getDatasourceOwner(),i=o.source1Owner,n=o.source2Owner,l=s()(this.$store.state.levelMapping.source1),c=s()(this.$store.state.levelMapping.source2),u={source1:a,source2:r,source1Owner:i,source2Owner:n,type:e,userID:t,source1LimitOrgId:this.getLimitOrgIdOnActivePair().source1LimitOrgId,source2LimitOrgId:this.getLimitOrgIdOnActivePair().source2LimitOrgId,levelMapping1:l,levelMapping2:c};return g.a.get("/matchedLocations",{params:u})},unMatchedLocations:function(e){var t=this.$store.state.activePair.userID._id,a=this.getDatasourceOwner(),r=a.source1Owner,s=a.source2Owner,o=this.$store.state.levelMapping.source1,i=this.$store.state.levelMapping.source2,n=this.getLimitOrgIdOnActivePair().source1LimitOrgId,l=this.getLimitOrgIdOnActivePair().source2LimitOrgId,c={source1:this.getSource1(),source2:this.getSource2(),source1Owner:r,source2Owner:s,type:e,userID:t,source1LimitOrgId:n,source2LimitOrgId:l,levelMapping1:o,levelMapping2:i};return g.a.get("/unmatchedLocations",{params:c})},csvExport:function(){this.loadingCSV=!0;var e=this;g.a.all([this.matchedLocations("CSV"),this.unMatchedLocations("CSV")]).then(g.a.spread(function(t,a){e.loadingCSV=!1,e.downloadDialog=!0,e.downloadType="csv",e.matchedDownloadData=t.data,e.unmatchedSource1DownloadData=a.data.unmatchedSource1CSV,e.unmatchedSource2DownloadData=a.data.unmatchedSource2CSV}))},fhirExport:function(){this.loadingFHIR=!0;var e=this;g.a.all([this.matchedLocations("FHIR"),this.unMatchedLocations("FHIR")]).then(g.a.spread(function(t,a){e.loadingFHIR=!1,e.downloadDialog=!0,e.downloadType="fhir",e.matchedDownloadData=t.data,e.unmatchedSource1DownloadData=a.data.unmatchedSource1mCSD,e.unmatchedSource2DownloadData=a.data.unmatchedSource2mCSD}))},downloadMatched:function(){var e=void 0,t=void 0;"fhir"===this.downloadType?(e="json",t="data:text/json;charset=utf-8,",this.matchedDownloadData=s()(this.matchedDownloadData)):(e="csv",t="data:text/csv;charset=utf-8,");var a=t+escape(this.matchedDownloadData),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download","matched"+this.getSource1()+this.getSource2()+"."+e),r.click()},downloadSource1Unmatched:function(){var e=void 0,t=void 0;"fhir"===this.downloadType?(e="json",t="data:text/json;charset=utf-8,",this.unmatchedSource1DownloadData=s()(this.unmatchedSource1DownloadData)):(e="csv",t="data:text/csv;charset=utf-8,");var a=t+escape(this.unmatchedSource1DownloadData),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download","unmatched"+this.getSource1()+"."+e),r.click()},downloadSource2Unmatched:function(){var e=void 0,t=void 0;"fhir"===this.downloadType?(e="json",t="data:text/json;charset=utf-8,",this.unmatchedSource2DownloadData=s()(this.unmatchedSource2DownloadData)):(e="csv",t="data:text/csv;charset=utf-8,");var a=t+escape(this.unmatchedSource2DownloadData),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download","unmatched"+this.getSource2()+"."+e),r.click()}}},ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}},[a("v-dialog",{attrs:{persistent:"",width:"620px"},model:{value:e.downloadDialog,callback:function(t){e.downloadDialog=t},expression:"downloadDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n          Select file type to download\n        ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-icon",{on:{click:e.closeDownloadDialog}},[e._v("close")])],1),e._v(" "),a("v-card-text"),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{round:"",color:"info"},on:{click:e.downloadMatched}},[a("v-icon",{attrs:{left:""}},[e._v("file_copy")]),e._v("\n          Matched\n        ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{round:"",color:"info"},on:{click:e.downloadSource1Unmatched}},[a("v-icon",{attrs:{left:""}},[e._v("file_copy")]),e._v("\n          Source1 Unmatched\n        ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{round:"",color:"info"},on:{click:e.downloadSource2Unmatched}},[a("v-icon",{attrs:{left:""}},[e._v("file_copy")]),e._v("\n          Source2 Unmatched\n        ")],1)],1)],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-btn",{attrs:{color:"success",round:"",small:""},on:{click:e.csvExport}},[a("v-icon",{attrs:{left:""}},[e._v("file_copy")]),e._v(" "),e.loadingCSV?a("v-progress-circular",{attrs:{indeterminate:"",color:"red"}}):e._e(),e._v("\n        CSV Export\n      ")],1)],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-btn",{attrs:{color:"success",round:"",small:""},on:{click:e.fhirExport}},[a("v-icon",{attrs:{left:""}},[e._v("file_copy")]),e._v(" "),e.loadingFHIR?a("v-progress-circular",{attrs:{indeterminate:"",color:"red"}}):e._e(),e._v("\n        FHIR Export\n      ")],1)],1)],1)],1)},staticRenderFns:[]},de=a("VU/8")(ce,ue,!1,null,null,null).exports,ve={mixins:[oe,U],data:function(){return{flagCommentDialog:!1,flagComment:"",helpDialog:!1,type:"",source2Id:"",source2Name:"",sort_arrow:"up",pagination:{sortBy:"score"},recoLevel:0,searchUnmatchedSource2:"",searchUnmatchedSource1:"",searchPotential:"",searchMatched:"",searchNotMatched:"",searchIgnore:"",searchFlagged:"",potentialMatches:[],showAllPotential:!1,alertText:"",alertTitle:"",alert:!1,source1Parents:{},source1Filter:{text:"",level:""},source1TreeUpdate:0,selectedSource1:{},selectedSource1Name:null,selectedSource1Id:null,selectedSource1UUID:null,selectedSource1Lat:null,selectedSource1Long:null,selectedSource1Parents:[],dialog:!1,dialogWidth:"",source1UnmatchedHeaders:[{text:"Location",value:"name"}],noMatchHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"},{text:"Parents",value:"parents"}],flaggedHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"},{text:"Source 2 Location",value:"source2Name"},{text:"Source 2 ID",value:"source2Id"},{text:"Comment",value:"flagComment"}]}},filters:{removeCountry:function(e){var t=e.slice(0);return t.splice(t.length-1,1),t},joinParents:function(e){return e.join("->")},joinParentsAndReverse:function(e){return[].concat(I()(e)).reverse().join("->")}},methods:{changeSort:function(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1),this.pagination.descending?this.sort_arrow="down":this.sort_arrow="up"},addListener:function(){var e=this;!function t(){e.$refs&&e.$refs.source1Tree?e.$refs.source1Tree.$on("node:selected",function(t){e.source1Filter.text=t.data.text;for(var a=1;t.parent;)t=t.parent,a++;e.source1Filter.level=a}):setTimeout(function(){t()},500)}()},levelChanged:function(e){this.$store.state.recoLevel!==e&&(this.$store.state.recoLevel=e,this.getScores(),this.$store.state.recoLevel===this.$store.state.totalSource1Levels?this.dialogWidth="1440px":this.dialogWidth="1190px")},getPotentialMatch:function(e){var t=this;this.potentialMatches=[],this.showAllPotential=!1;var a=!0,r=!1,s=void 0;try{for(var o,i=c()(this.$store.state.scoreResults);!(a=(o=i.next()).done);a=!0){var n=o.value;if(n.source1.id===e)for(var l in this.selectedSource1=n.source1,this.selectedSource1Name=n.source1.name,this.selectedSource1Parents=n.source1.parents,this.selectedSource1Lat=n.source1.lat,this.selectedSource1Long=n.source1.long,this.selectedSource1Id=n.source1.id,this.selectedSource1UUID=n.source1.uuid,n.potentialMatches){var u=function(e){var a=n.potentialMatches[l][e];return v=t.$store.state.matchedContent.find(function(e){return e.source2Id===a.id}),p=t.$store.state.flagged.find(function(e){return e.source2Id===a.id}),v?"continue":p?"continue":void t.potentialMatches.push({score:l,name:a.name,id:a.id,source2IdHierarchy:a.source2IdHierarchy,lat:a.lat,long:a.long,geoDistance:a.geoDistance,parents:a.parents,mappedParentName:a.mappedParentName})};for(var d in n.potentialMatches[l]){var v,p;u(d)}}}}catch(e){r=!0,s=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw s}}this.dialog=!0},potentialMatchComment:function(e){var t="";if(this.$store.state.recoLevel===this.$store.state.totalSource1Levels){var a=[],r=[];if(this.selectedSource1.source1IdHierarchy){a.push(this.selectedSource1.source1IdHierarchy[0].id);var s=!0,o=!1,i=void 0;try{for(var n,l=c()(this.selectedSource1.source1IdHierarchy[0].children);!(s=(n=l.next()).done);s=!0){var u=n.value;a.push(u.id)}}catch(e){o=!0,i=e}finally{try{!s&&l.return&&l.return()}finally{if(o)throw i}}}if(e.source2IdHierarchy){r.push(e.source2IdHierarchy[0].id);var d=!0,v=!1,p=void 0;try{for(var h,g=c()(e.source2IdHierarchy[0].children);!(d=(h=g.next()).done);d=!0){var f=h.value;r.push(f.id)}}catch(e){v=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw p}}}a.some(function(e){return r.indexOf(e)>=0})||(t&&(t+=", "),t+="ID differ")}e.name.toLowerCase()!==this.selectedSource1.name.toLowerCase()&&(t&&(t+=", "),t+="Names differ");var m=e.mappedParentName;return this.selectedSource1.parents[0]!==m&&(t&&(t+=", "),t+="Parents differ"),t},match:function(e,t,a,r,s){if(this.matchType=e,this.source2Id=t,this.source2Name=a,this.source2IdHierarchy=r,this.mappedParentName=s,null===t)return this.alert=!0,this.alertTitle="Information",void(this.alertText="Select Source 2 Location to match against Source 1 Location");"flag"===e?this.flagCommentDialog=!0:this.saveMatch()},saveMatch:function(){var e=this;this.flagCommentDialog=!1,this.$store.state.progressTitle="Saving match",this.$store.state.dynamicProgress=!0;var t=this.getDatasourceOwner(),a=new FormData;a.append("source1Id",this.selectedSource1UUID),a.append("source2Id",this.source2Id),a.append("source1Owner",t.source1Owner),a.append("source2Owner",t.source2Owner),a.append("flagComment",this.flagComment),a.append("source1DB",this.getSource1()),a.append("source2DB",this.getSource2()),a.append("recoLevel",this.$store.state.recoLevel),a.append("totalLevels",this.$store.state.totalSource1Levels),a.append("userID",this.$store.state.activePair.userID._id),g.a.post("/match/"+this.matchType,a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.dynamicProgress=!1;var a=null;for(var r in e.$store.state.source2UnMatched)e.$store.state.source2UnMatched[r].id===e.source2Id&&(a=e.$store.state.source2UnMatched[r].parents,e.$store.state.source2UnMatched.splice(r,1));for(var s in e.$store.state.source1UnMatched)e.$store.state.source1UnMatched[s].UUID===e.selectedSource1UUID&&("match"===e.matchType?(++e.$store.state.totalAllMapped,e.$store.state.matchedContent.push({source1Name:e.selectedSource1Name,source1Id:e.selectedSource1Id,source1UUID:e.selectedSource1UUID,source1Parents:e.$store.state.source1UnMatched[s].parents,source2Name:e.source2Name,source2Id:e.source2Id,source2IdHierarchy:e.source2IdHierarchy,mappedParentName:e.mappedParentName,source2Parents:a,matchComments:t.data.matchComments})):"flag"===e.matchType&&(++e.$store.state.totalAllFlagged,e.$store.state.flagged.push({source1Name:e.selectedSource1Name,source1Id:e.selectedSource1Id,source1UUID:e.selectedSource1UUID,source1Parents:e.$store.state.source1UnMatched[s].parents,source2Name:e.source2Name,source2Id:e.source2Id,source2IdHierarchy:e.source2IdHierarchy,mappedParentName:e.mappedParentName,source2Parents:a,flagComment:e.flagComment})),e.$store.state.source1UnMatched.splice(s,1));e.flagComment="",e.selectedSource1Id=null,e.selectedSource1UUID=null,e.selectedSource1Name=null,e.dialog=!1}).catch(function(t){e.flagComment="",e.$store.state.dynamicProgress=!1,e.alert=!0,e.alertTitle="Error",e.alertText=t.response.data.error,e.selectedSource1Id=null,e.selectedSource1UUID=null,e.selectedSource1Name=null,e.dialog=!1})},acceptFlag:function(e){var t=this;this.$store.state.progressTitle="Accepting flag",this.$store.state.dynamicProgress=!0;var a=new FormData;a.append("source1Id",e);var r=this.$store.state.activePair.userID._id;g.a.post("/acceptFlag/"+this.getSource1()+"/"+this.getSource2()+"/"+r,a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){for(var a in t.$store.state.dynamicProgress=!1,t.$store.state.flagged)t.$store.state.flagged[a].source1UUID===e&&(t.$store.state.matchedContent.push({source1Name:t.$store.state.flagged[a].source1Name,source1Id:t.$store.state.flagged[a].source1Id,source1UUID:t.$store.state.flagged[a].source1UUID,source1Parents:t.$store.state.flagged[a].source1Parents,source2Name:t.$store.state.flagged[a].source2Name,source2Id:t.$store.state.flagged[a].source2Id,source2IdHierarchy:t.$store.state.flagged[a].source2IdHierarchy,mappedParentName:t.$store.state.flagged[a].mappedParentName,source2Parents:t.$store.state.flagged[a].source2Parents}),t.$store.state.flagged.splice(a,1),++t.$store.state.totalAllMapped,--t.$store.state.totalAllFlagged)}).catch(function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.selectedSource1Id=null,t.selectedSource1UUID=null,t.selectedSource1Name=null,t.dialog=!1,console.log(e)})},breakMatch:function(e){var t=this;this.$store.state.progressTitle="Breaking match",this.$store.state.dynamicProgress=!0;var a=new FormData,r=this.$store.state.activePair.userID._id,s=this.getDatasourceOwner();a.append("source1Id",e),g.a.post("/breakMatch/"+this.getSource1()+"/"+this.getSource2()+"/"+s.source1Owner+"/"+s.source2Owner+"/"+r,a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){for(var r in t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Information",t.alertText="Scores for this Location may not be available unless you recalculate scores",t.$store.state.matchedContent)t.$store.state.matchedContent[r].source1UUID===e&&(t.$store.state.source1UnMatched.push({name:t.$store.state.matchedContent[r].source1Name,id:t.$store.state.matchedContent[r].source1Id,UUID:t.$store.state.matchedContent[r].source1UUID,parents:t.$store.state.matchedContent[r].source1Parents}),t.$store.state.source2UnMatched.push({name:t.$store.state.matchedContent[r].source2Name,id:t.$store.state.matchedContent[r].source2Id,source2IdHierarchy:t.$store.state.matchedContent[r].source2IdHierarchy,mappedParentName:t.$store.state.matchedContent[r].mappedParentName,parents:t.$store.state.matchedContent[r].source2Parents}),t.$store.state.matchedContent.splice(r,1),--t.$store.state.totalAllMapped)}).catch(function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.selectedSource1Id=null,t.selectedSource1UUID=null,t.selectedSource1Name=null,t.dialog=!1,console.log(e)})},unFlag:function(e){var t=this;this.$store.state.progressTitle="Unflagging match",this.$store.state.dynamicProgress=!0;var a=new FormData,r=this.$store.state.activePair.userID._id,s=this.getDatasourceOwner();a.append("source1Id",e),g.a.post("/breakMatch/"+this.getSource1()+"/"+this.getSource2()+"/"+s.source1Owner+"/"+s.source2Owner+"/"+r,a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){for(var r in t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Information",t.alertText="Scores for this Location may not be available unless you recalculate scores",t.$store.state.flagged)t.$store.state.flagged[r].source1UUID===e&&(t.$store.state.source1UnMatched.push({name:t.$store.state.flagged[r].source1Name,id:t.$store.state.flagged[r].source1Id,UUID:t.$store.state.flagged[r].source1UUID,parents:t.$store.state.flagged[r].source1Parents}),t.$store.state.source2UnMatched.push({name:t.$store.state.flagged[r].source2Name,id:t.$store.state.flagged[r].source2Id,source2IdHierarchy:t.$store.state.flagged[r].source2IdHierarchy,mappedParentName:t.$store.state.flagged[r].mappedParentName,parents:t.$store.state.flagged[r].source2Parents}),t.$store.state.flagged.splice(r,1),--t.$store.state.totalAllFlagged)}).catch(function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.selectedSource1Id=null,t.selectedSource1UUID=null,t.selectedSource1Name=null,t.dialog=!1,console.log(e)})},breakNoMatch:function(e,t){var a=this;this.$store.state.progressTitle="Breaking no match",this.$store.state.dynamicProgress=!0;var r=new FormData;r.append("source1Id",e),r.append("recoLevel",this.$store.state.recoLevel),r.append("totalLevels",this.$store.state.totalSource1Levels);var s=this.$store.state.activePair.userID._id;g.a.post("/breakNoMatch/"+t+"/"+this.getSource1()+"/"+this.getSource2()+"/"+s,r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(r){if(a.$store.state.dynamicProgress=!1,a.alert=!0,a.alertTitle="Information",a.alertText="Scores for this Location may not be available unless you recalculate scores","nomatch"===t)for(var s in a.$store.state.noMatchContent)a.$store.state.noMatchContent[s].source1UUID===e&&(a.$store.state.source1UnMatched.push({name:a.$store.state.noMatchContent[s].source1Name,id:a.$store.state.noMatchContent[s].source1Id,UUID:a.$store.state.noMatchContent[s].source1UUID,parents:a.$store.state.noMatchContent[s].parents}),a.$store.state.noMatchContent.splice(s,1),--a.$store.state.totalAllNoMatch);else if("ignore"===t)for(var o in a.$store.state.ignoreContent)a.$store.state.ignoreContent[o].source1UUID===e&&(a.$store.state.source1UnMatched.push({name:a.$store.state.ignoreContent[o].source1Name,id:a.$store.state.ignoreContent[o].source1Id,UUID:a.$store.state.ignoreContent[o].source1UUID,parents:a.$store.state.ignoreContent[o].parents}),a.$store.state.ignoreContent.splice(o,1),--a.$store.state.totalAllIgnore)}).catch(function(e){a.$store.state.dynamicProgress=!1,a.alert=!0,a.alertTitle="Error",a.alertText=e.response.data.error,a.selectedSource1Id=null,a.selectedSource1UUID=null,a.selectedSource1Name=null,a.dialog=!1,console.log(e)})},noMatch:function(e){var t=this;this.$store.state.progressTitle="Saving as no match",this.$store.state.dynamicProgress=!0;var a=this.$store.state.activePair.userID._id,r=this.getDatasourceOwner(),s=r.source1Owner,o=r.source2Owner,i=new FormData;i.append("source1Id",this.selectedSource1UUID),i.append("recoLevel",this.$store.state.recoLevel),i.append("totalLevels",this.$store.state.totalSource1Levels),g.a.post("/noMatch/"+e+"/"+this.getSource1()+"/"+this.getSource2()+"/"+s+"/"+o+"/"+a,i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){if(t.$store.state.dynamicProgress=!1,"nomatch"===e)for(var a in t.$store.state.source1UnMatched)t.$store.state.source1UnMatched[a].id===t.selectedSource1Id&&(t.$store.state.noMatchContent.push({source1Name:t.selectedSource1Name,source1Id:t.selectedSource1Id,source1UUID:t.selectedSource1UUID,parents:t.$store.state.source1UnMatched[a].parents}),++t.$store.state.totalAllNoMatch,t.$store.state.source1UnMatched.splice(a,1));else if("ignore"===e)for(var r in t.$store.state.source1UnMatched)t.$store.state.source1UnMatched[r].id===t.selectedSource1Id&&(t.$store.state.ignoreContent.push({source1Name:t.selectedSource1Name,source1Id:t.selectedSource1Id,source1UUID:t.selectedSource1UUID,parents:t.$store.state.source1UnMatched[r].parents}),++t.$store.state.totalAllIgnore,t.$store.state.source1UnMatched.splice(r,1));t.dialog=!1,t.selectedSource1Id=null,t.selectedSource1UUID=null,t.selectedSource1Name=null}).catch(function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.dialog=!1,t.selectedSource1Id=null,t.selectedSource1UUID=null,t.selectedSource1Name=null})},back:function(){this.searchPotential="",this.dialog=!1}},computed:{nextLevelText:{get:function(){return this.translateDataHeader("source1",this.$store.state.recoLevel)},set:function(e){}},currentLevelText:{get:function(){return this.translateDataHeader("source1",this.$store.state.recoLevel-1)},set:function(e){}},matchedHeaders:function(){return[{text:"Source1 Location",value:"source1Name"},{text:"Source1 ID",value:"source1Id"},{text:"Source2 Location",value:"source2Name"},{text:"Source2 ID",value:"source2Id"},{text:"Match Comment",value:"matchComments"}]},source1GridHeaders:function(){var e=[{text:"Location",value:"name"}];if(this.$store.state.source1UnMatched.length>0)for(var t=this.$store.state.source1UnMatched[0].parents.length;t>0;t--)e.push({text:"Level "+t,value:"level"+(t+1)});return e.splice(1,1),e},potentialHeaders:function(){var e=[];return e.push({sortable:!1},{text:"Source 2 Location",value:"name",sortable:!1},{text:"ID",value:"id",sortable:!1},{text:"Parent",value:"source2Parent",sortable:!1}),this.$store.state.recoLevel===this.$store.state.totalSource1Levels&&e.push({text:"Geo Dist (Miles)",value:"geodist",sortable:!1}),e.push({text:"Score",value:"score"}),e.push({text:"Comment",value:"comment"}),e},potentialAvailable:function(){return null!==this.$store.state.source2UnMatched&&this.$store.state.source2UnMatched.length>this.potentialMatches.length},allPotentialMatches:function(){var e=this;if(null!==this.$store.state.source2UnMatched&&this.$store.state.source2UnMatched.length>this.potentialMatches.length&&this.showAllPotential){var t=[],a=function(a){e.potentialMatches.find(function(e){return e.id===a.id})||(a.score="N/A",!a.source2IdHierarchy&&a.source2IdHierarchy&&(a.source2IdHierarchy=a.source2IdHierarchy),t.push(a))},r=!0,s=!1,o=void 0;try{for(var i,n=c()(this.$store.state.source2UnMatched);!(r=(i=n.next()).done);r=!0){a(i.value)}}catch(e){s=!0,o=e}finally{try{!r&&n.return&&n.return()}finally{if(s)throw o}}return this.potentialMatches.concat(t)}return this.potentialMatches},source1Tree:function(){this.addListener();var e=[];return 1===p()(this.$store.state.source1Parents).length&&"null"===p()(this.$store.state.source1Parents)[0]?e:(function e(t,a){for(var r in t){var s={text:r,children:[]};e(t[r],s.children),0===s.children.length&&delete s.children,a.push(s)}}(this.$store.state.source1Parents,e),this.source1TreeUpdate++,e)},source1Grid:function(){var e=this;if(this.$store.state.source1UnMatched.length>0&&""!==this.source1Filter.level){var t=this.$store.state.source1UnMatched[0].parents.length-this.source1Filter.level;return this.$store.state.source1UnMatched.filter(function(a){return a.parents[t]===e.source1Filter.text})}return this.$store.state.source1UnMatched},goNextLevel:function(){return this.$store.state.recoLevel<this.$store.state.totalSource1Levels&&null!==this.$store.state.source1UnMatched&&0===this.$store.state.source1UnMatched.length&&null!==this.$store.state.flagged&&0===this.$store.state.flagged.length&&null!==this.$store.state.matchedContent&&0!==this.$store.state.matchedContent.length?"yes":"no"},lastLevelDone:function(){return this.$store.state.recoLevel===this.$store.state.totalSource1Levels&&null!==this.$store.state.source1UnMatched&&0===this.$store.state.source1UnMatched.length&&null!==this.$store.state.flagged&&0===this.$store.state.flagged.length?"yes":"no"},source1TotalRecords:function(){return this.$store.state.scoreResults?this.$store.state.scoreResults.length:0},source1TotalMatched:function(){return this.$store.state.matchedContent?this.$store.state.matchedContent.length:0},source1PercentMatched:function(){return 0===this.source1TotalRecords?0:parseFloat((100*this.source1TotalMatched/this.source1TotalRecords).toFixed(1))},source1TotalUnMatched:function(){return this.source1TotalRecords-this.source1TotalMatched},source1PercentUnMatched:function(){return 0===this.source1TotalRecords?0:parseFloat((100*this.source1TotalUnMatched/this.source1TotalRecords).toFixed(1))},totalFlagged:function(){return this.$store.state.flagged?this.$store.state.flagged.length:0},source1PercentFlagged:function(){return 0===this.$store.state.scoreResults.length?0:this.$store.state.flagged?parseFloat((100*this.$store.state.flagged.length/this.$store.state.scoreResults.length).toFixed(1)):0},source1TotalNoMatch:function(){return this.$store.state.noMatchContent?this.$store.state.noMatchContent.length:0},source1TotalIgnore:function(){return this.$store.state.ignoreContent?this.$store.state.ignoreContent.length:0},source1PercentNoMatch:function(){return 0===this.$store.state.scoreResults.length?0:this.$store.state.noMatchContent?parseFloat((100*this.$store.state.noMatchContent.length/this.$store.state.scoreResults.length).toFixed(1)):0},source1PercentIgnore:function(){return 0===this.$store.state.scoreResults.length?0:this.$store.state.ignoreContent?parseFloat((100*this.$store.state.ignoreContent.length/this.$store.state.scoreResults.length).toFixed(1)):0},source2TotalRecords:function(){return this.$store.state.source2TotalRecords?this.$store.state.source2TotalRecords:0},source2TotalUnmatched:function(){return this.source2TotalRecords>0&&this.$store.state.matchedContent?parseInt(this.source2TotalRecords)-parseInt(this.$store.state.matchedContent.length):0},source2PercentUnmatched:function(){return 0===this.$store.state.source2TotalRecords?0:parseFloat((100*this.source2TotalUnmatched/this.$store.state.source2TotalRecords).toFixed(1))},source2PercentFlagged:function(){return 0===this.$store.state.source2TotalRecords?0:this.$store.state.flagged?parseFloat((100*this.$store.state.flagged.length/this.$store.state.source2TotalRecords).toFixed(1)):0},source2TotalMatched:function(){return this.source1TotalMatched},source2PercentMatched:function(){return 0===this.$store.state.source2TotalRecords?0:parseFloat((100*this.source2TotalMatched/this.$store.state.source2TotalRecords).toFixed(1))},source2NotInSource1:function(){var e=this.source2TotalRecords-this.source1TotalRecords;return e<0?0:e},source2PercentNotInSource1:function(){if(0===this.source2NotInSource1)return 0;var e=parseFloat((100*this.source2NotInSource1/this.source2TotalRecords).toFixed(1));return parseFloat(e)}},created:function(){var e=this;this.$store.state.recalculateScores&&(this.$store.state.recalculateScores=!1,this.getScores()),Gt.$on("changeCSVHeaderNames",function(){var t=e.translateDataHeader("source1",e.$store.state.recoLevel);e.nextLevelText=t,e.currentLevelText=t}),this.addListener(),this.$store.state.recoLevel===this.$store.state.totalSource1Levels?this.dialogWidth="auto":this.dialogWidth="1190px"},components:{"liquor-tree":re.a,appRecoExport:de}},pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[e.$store.state.uploadRunning?[a("br"),a("br"),a("br"),e._v(" "),a("v-alert",{attrs:{type:"info",value:!0}},[a("b",[e._v("Wait for upload to finish ...")]),e._v(" "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)]:e._e(),e._v(" "),!e.$store.state.denyAccess&!e.$store.state.uploadRunning?a("v-container",{attrs:{fluid:"","grid-list-lg":""}},[a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"350"},model:{value:e.$store.state.scoresProgressData.scoreDialog,callback:function(t){e.$set(e.$store.state.scoresProgressData,"scoreDialog",t)},expression:"$store.state.scoresProgressData.scoreDialog"}},[a("v-card",{attrs:{color:"white",dark:""}},[a("v-card-text",[a("center",[a("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.$store.state.scoresProgressData.scoreProgressTitle))]),a("br"),e._v(" "),"percent"==e.$store.state.scoresProgressData.progressType?a("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.$store.state.scoresProgressData.scoreProgressPercent,color:"primary"}},[a("v-avatar",{attrs:{color:"indigo",size:"50px"}},[a("span",{staticClass:"white--text"},[a("b",[e._v(e._s(e.$store.state.scoresProgressData.scoreProgressPercent)+"%")])])])],1):e._e(),e._v(" "),"indeterminate"==e.$store.state.scoresProgressData.progressType?a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"red"}}):e._e()],1)],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",width:"500px"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n            "+e._s(e.alertTitle)+"\n          ")])],1),e._v(" "),a("v-card-text",[e._v("\n          "+e._s(e.alertText)+"\n        ")]),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"success"},on:{click:function(t){e.alert=!1}}},[e._v("OK")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",width:"500px"},model:{value:e.flagCommentDialog,callback:function(t){e.flagCommentDialog=t},expression:"flagCommentDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n            Add comment for this flag if any\n          ")])],1),e._v(" "),a("v-card-text",[a("v-textarea",{attrs:{"auto-grow":"",box:"",color:"deep-purple",label:"Flag Comment",rows:"1"},model:{value:e.flagComment,callback:function(t){e.flagComment=t},expression:"flagComment"}})],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"success"},on:{click:e.saveMatch}},[e._v("Continue")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition",width:e.dialogWidth},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{width:e.dialogWidth}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n            Matching "+e._s(e.selectedSource1Name)+"\n          ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":"",color:"yellow"},model:{value:e.searchPotential,callback:function(t){e.searchPotential=t},expression:"searchPotential"}}),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.back(t)}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-title",[e._v("\n          Parents:\n          "),a("b",[e._v(e._s(e._f("joinParentsAndReverse")(e.selectedSource1Parents)))]),e._v(" "),a("v-spacer"),e._v(" "),e.$store.state.recoLevel==e.$store.state.totalSource1Levels?[e._v("\n            Latitude:\n            "),a("b",[e._v(e._s(e.selectedSource1Lat))]),e._v(" "),a("v-spacer"),e._v("\n            Longitude:\n            "),a("b",[e._v(e._s(e.selectedSource1Long))]),e._v(" "),a("v-spacer")]:e._e()],2),e._v(" "),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.potentialHeaders,items:e.allPotentialMatches,search:e.searchPotential,pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"headers",fn:function(t){return[a("tr",[e._l(e.potentialHeaders,function(t){return["Score"==t.text?a("th",{key:t.text,staticClass:"column sortable active",attrs:{align:"left"},on:{click:function(a){return e.changeSort(t.value)}}},["up"==e.sort_arrow?a("v-icon",{attrs:{small:""}},[e._v("arrow_upward")]):a("v-icon",{attrs:{small:""}},[e._v("arrow_downward")]),e._v("\n                    "+e._s(t.text)+"\n                    "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[a("v-icon",[e._v("help")])],1),e._v(" "),a("span",[e._v("The lower the score, the better the match")])],1)],1):a("th",{key:t.text,attrs:{align:"left"}},[e._v("\n                    "+e._s(t.text)+"\n                  ")])]})],2)]}},{key:"items",fn:function(t){return[a("tr",[a("td",[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",color:"error",small:""},nativeOn:{click:function(a){return e.match("flag",t.item.id,t.item.name,t.item.source2IdHierarchy,t.item.mappedParentName)}},slot:"activator"},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("notification_important")]),e._v("Flag\n                    ")],1),e._v(" "),a("span",[e._v("Mark the selected item as a match to be reviewed")])],1),e._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",color:"primary",small:"",dark:""},nativeOn:{click:function(a){return e.match("match",t.item.id,t.item.name,t.item.source2IdHierarchy)}},slot:"activator"},[a("v-icon",{attrs:{left:""}},[e._v("thumb_up")]),e._v("Save Match\n                    ")],1),e._v(" "),a("span",[e._v("Save the selected item as a match")])],1)],1),e._v(" "),a("td",[e._v(e._s(t.item.name))]),e._v(" "),a("td",[e._v(e._s(t.item.id))]),e._v(" "),a("td",[e._v(e._s(e._f("joinParentsAndReverse")(t.item.parents)))]),e._v(" "),e.$store.state.recoLevel==e.$store.state.totalSource1Levels?a("td",[e._v(e._s(t.item.geoDistance))]):e._e(),e._v(" "),a("td",[e._v(e._s(t.item.score))]),e._v(" "),a("td",[e._v(e._s(e.potentialMatchComment(t.item)))])])]}}],null,!1,961392219)})],1),e._v(" "),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs2:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",color:"green",dark:""},nativeOn:{click:function(t){return e.noMatch("nomatch")}},slot:"activator"},[a("v-icon",{attrs:{left:""}},[e._v("thumb_down")]),e._v("No Match\n                ")],1),e._v(" "),a("span",[e._v("Save this Source 1 location as having no match")])],1)],1),e._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",color:"error",dark:""},nativeOn:{click:function(t){return e.noMatch("ignore")}},slot:"activator"},[a("v-icon",{attrs:{left:""}},[e._v("thumb_down")]),e._v("Ignore\n                ")],1),e._v(" "),a("span",[e._v("Mark this source 1 location as being ignored")])],1)],1),e._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-tooltip",{attrs:{top:""}},[e.potentialAvailable?a("v-btn",{staticStyle:{color:"white"},attrs:{slot:"activator",color:"teal darken-6"},on:{click:function(t){e.showAllPotential=!e.showAllPotential}},slot:"activator"},[e.showAllPotential?[e._v("Show Scored Suggestions")]:[e._v("Show All Suggestions")]],2):e._e(),e._v(" "),e.showAllPotential?a("span",[e._v("Limit to only scored suggestions")]):a("span",[e._v("See all possible choices ignoring the score")])],1)],1),e._v(" "),a("v-flex",{attrs:{xs6:"","text-sm-right":""}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticStyle:{color:"white"},attrs:{slot:"activator",color:"orange darken-2"},nativeOn:{click:function(t){return e.back(t)}},slot:"activator"},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("arrow_back")]),e._v("Back\n                ")],1),e._v(" "),a("span",[e._v("Return without saving")])],1)],1)],1)],1)],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("appRecoExport")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs2:""}},[a("b",[e._v("Reconciling "+e._s(e.currentLevelText))])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs1:"",sm2:"",md2:"",right:""}},[a("v-select",{attrs:{items:e.$store.state.levelArray,"item-value":e.$store.state.levelArray.value,"item-name":e.$store.state.levelArray.text,label:"Level","single-line":""},on:{change:e.levelChanged},model:{value:e.$store.state.recoLevel,callback:function(t){e.$set(e.$store.state,"recoLevel",t)},expression:"$store.state.recoLevel"}})],1),e._v(" "),a("v-flex",{attrs:{xs2:""}},[e.$store.state.scoreSavingProgressData.savingMatches?[e._v("\n          Saving matches for "+e._s(e.translateDataHeader("source1",e.$store.state.recoLevel-2))+"\n          "),a("v-progress-linear",{attrs:{color:"error",width:"20",height:"20",value:e.$store.state.scoreSavingProgressData.percent}},[a("center",[a("span",{staticClass:"green--text"},[a("b",[e._v(e._s(e.$store.state.scoreSavingProgressData.percent)+"%")])])])],1)]:a("v-btn",{attrs:{slot:"activator",color:"primary",dark:"",round:""},on:{click:e.getScores},slot:"activator"},[a("v-icon",[e._v("repeat_one")]),e._v(" Recalculate Scores\n        ")],1)],2),e._v(" "),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"primary"},on:{click:function(t){e.helpDialog=!0}},slot:"activator"},[a("v-icon",[e._v("help")])],1),e._v(" "),a("span",[e._v("Help")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("info")]),e._v(" About this page\n          ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[e._v("\n          This page let you map source 1 data with those in source2\n          "),a("v-list",[e._v("\n            1. Source 1 refer to the data source name selected as source 1 under data source pair section\n          ")]),e._v(" "),a("v-list",[e._v("\n            2. Source 2 refer to the data source name selected as source 2 under data source pair section\n          ")]),e._v(" "),a("v-list",[e._v("\n            3. After breaking a match, you will need to recalculate scores for the app to load potential matches of the broken location\n          ")]),e._v(" "),a("v-list",[e._v("\n            4. FLAGGED Locations are the locations that will need to be reviewed before they are saved as matches\n          ")]),e._v(" "),a("v-list",[e._v("\n            5. NO MATCHES - these are locations that do not matches anything from source 2\n          ")])],1)],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs2:"",right:""}},[a("div",{staticStyle:{"border-style":"solid","border-color":"green","text-align":"center"}},[a("b",[e._v("Source 1 Reconciliation Status")]),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("b",[e._v("Matched")])]),e._v(" "),a("v-flex",{attrs:{"align-center":""}},[a("center",[a("b",[e._v(e._s(e.source1TotalMatched)+"/"+e._s(e.source1TotalRecords))])])],1),e._v(" "),a("v-flex",[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentMatched,color:"green"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentMatched)+"%")])])],1)],1)],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("Unmatched")])]),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.source1TotalUnMatched)+"/"+e._s(e.source1TotalRecords))])])],1),e._v(" "),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentUnMatched,color:"red"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentUnMatched)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("Flagged")])]),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.totalFlagged)+"/"+e._s(e.source1TotalRecords))])])],1),e._v(" "),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentFlagged,color:"orange"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentFlagged)+"%")])])],1)],1)],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("No Match")])]),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.source1TotalNoMatch)+"/"+e._s(e.source1TotalRecords))])])],1),e._v(" "),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentNoMatch,color:"red"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentNoMatch)+"%")])])],1)],1)],1)],1)],1)],1)],1)]),e._v(" "),a("v-flex",{attrs:{xs4:"","child-flex":""}},[a("v-card",{attrs:{color:"green lighten-2"}},[a("v-card-title",{attrs:{"primary-title":""}},[e._v("\n            Source 1 Unmatched\n            "),a("v-spacer"),e._v(" "),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUnmatchedSource1,callback:function(t){e.searchUnmatchedSource1=t},expression:"searchUnmatchedSource1"}})],1),e._v(" "),e.loadingSource1Unmatched?[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]:[a("liquor-tree",{key:e.source1TreeUpdate,ref:"source1Tree",attrs:{data:e.source1Tree}}),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source1GridHeaders,items:e.source1Grid,search:e.searchUnmatchedSource1,light:""},scopedSlots:e._u([{key:"items",fn:function(t){return["Done"===e.$store.state.recoStatus?a("td",{key:t.item.id},[e._v(e._s(t.item.name))]):a("td",{key:t.item.id,staticStyle:{cursor:"pointer"},on:{click:function(a){return e.getPotentialMatch(t.item.id)}}},[e._v(e._s(t.item.name))]),e._v(" "),e._l(t.item.parents,function(r,s){return s!=t.item.parents.length-1?a("td",{key:t.item.id+s},[e._v("\n                  "+e._s(r)+"\n                ")]):e._e()})]}}],null,!1,120396608)})]],2)],1),e._v(" "),a("v-flex",{attrs:{xs4:""}},[a("v-card",{attrs:{color:"blue lighten-2",dark:""}},[a("v-card-title",{attrs:{"primary-title":""}},[e._v("\n            Source 2 Unmatched\n            "),a("v-spacer"),e._v(" "),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUnmatchedSource2,callback:function(t){e.searchUnmatchedSource2=t},expression:"searchUnmatchedSource2"}})],1),e._v(" "),e.loadingSource2Unmatched?[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]:[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source1UnmatchedHeaders,items:e.$store.state.source2UnMatched,search:e.searchUnmatchedSource2,light:""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.name)+" "),a("br"),e._v(""+e._s(e._f("joinParentsAndReverse")(t.item.parents)))])]}}],null,!1,160575404)})]],2)],1),e._v(" "),a("v-flex",{attrs:{xs2:"",right:""}},[a("div",{staticStyle:{"border-style":"solid","border-color":"green","text-align":"center"}},[a("b",[e._v("Source 2 Reconciliation Status")]),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("Matched")])]),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.source2TotalMatched)+"/"+e._s(e.source2TotalRecords))])])],1),e._v(" "),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentMatched,color:"green"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source2PercentMatched)+"%")])])],1)],1)],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Unmatched")])]),e._v(" "),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.source2TotalUnmatched)+"/"+e._s(e.source2TotalRecords))])])],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentUnmatched,color:"red"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source2PercentUnmatched)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("Flagged")])]),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.totalFlagged)+"/"+e._s(e.source2TotalRecords))])])],1),e._v(" "),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentFlagged,color:"orange"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source2PercentFlagged)+"%")])])],1)],1)],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("Not in Source 1")])]),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.source2NotInSource1))])])],1),e._v(" "),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentNotInSource1,color:"red"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source2PercentNotInSource1)+"%")])])],1)],1)],1)],1)],1)],1)],1)])],1),e._v(" "),a("v-layout",{attrs:{column:"",wrap:""}},[a("v-tabs",{attrs:{"icons-and-text":"",centered:"",grow:"",dark:"",color:"cyan"}},[a("v-tabs-slider",{attrs:{color:"red"}}),e._v(" "),a("v-tab",{key:"match"},[e._v("\n          MATCHED ("+e._s(e.source1TotalMatched)+")\n          "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("thumb_up")])],1),e._v(" "),a("v-tab",{key:"nomatch"},[e._v("\n          NO MATCH ("+e._s(e.source1TotalNoMatch)+")\n          "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("thumb_down")])],1),e._v(" "),a("v-tab",{key:"ignore"},[e._v("\n          IGNORED ("+e._s(e.source1TotalIgnore)+")\n          "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("thumb_down")])],1),e._v(" "),a("v-tab",{key:"flagged"},[e._v("\n          FLAGGED ("+e._s(e.totalFlagged)+")\n          "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("notification_important")])],1),e._v(" "),a("v-tab-item",{key:"match"},[null!=e.$store.state.matchedContent?[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchMatched,callback:function(t){e.searchMatched=t},expression:"searchMatched"}}),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.matchedHeaders,items:e.$store.state.matchedContent,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),e._v(" "),a("td",[e._v(e._s(t.item.source1Id))]),e._v(" "),a("td",[e._v(e._s(t.item.source2Name))]),e._v(" "),a("td",[a("v-treeview",{attrs:{items:t.item.source2IdHierarchy}})],1),e._v(" "),t.item.matchComments?a("td",[e._v(e._s(t.item.matchComments.join(", ")))]):a("td"),e._v(" "),a("td",["Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(a){return e.breakMatch(t.item.source1UUID)}}},[a("v-icon",[e._v("undo")]),e._v("Break Match\n                  ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(a){return e.breakMatch(t.item.source1UUID)}}},[a("v-icon",[e._v("undo")]),e._v("Break Match\n                  ")],1)],1)]}}],null,!1,2834517120)})]:[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2),e._v(" "),a("v-tab-item",{key:"nomatch"},[null!=e.$store.state.noMatchContent?[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchNotMatched,callback:function(t){e.searchNotMatched=t},expression:"searchNotMatched"}}),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.$store.state.noMatchContent,search:e.searchNotMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),e._v(" "),a("td",[e._v(e._s(t.item.source1Id))]),e._v(" "),a("td",[e._v(e._s(t.item.parents.join("->")))]),e._v(" "),a("td",["Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(a){return e.breakNoMatch(t.item.source1UUID,"nomatch")}}},[a("v-icon",[e._v("cached")]),e._v("Break No Match\n                  ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(a){return e.breakNoMatch(t.item.source1UUID,"nomatch")}}},[a("v-icon",[e._v("cached")]),e._v("Break No Match\n                  ")],1)],1)]}}],null,!1,19123e5)})]:[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2),e._v(" "),a("v-tab-item",{key:"ignore"},[null!=e.$store.state.ignoreContent?[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchIgnore,callback:function(t){e.searchIgnore=t},expression:"searchIgnore"}}),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.$store.state.ignoreContent,search:e.searchIgnore},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),e._v(" "),a("td",[e._v(e._s(t.item.source1Id))]),e._v(" "),a("td",[e._v(e._s(t.item.parents.join("->")))]),e._v(" "),a("td",["Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(a){return e.breakNoMatch(t.item.source1UUID,"ignore")}}},[a("v-icon",[e._v("cached")]),e._v("Break Ignore\n                  ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(a){return e.breakNoMatch(t.item.source1UUID,"ignore")}}},[a("v-icon",[e._v("cached")]),e._v("Break Ignore\n                  ")],1)],1)]}}],null,!1,397733792)})]:[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2),e._v(" "),a("v-tab-item",{key:"flagged"},[null!=e.$store.state.flagged?[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchFlagged,callback:function(t){e.searchFlagged=t},expression:"searchFlagged"}}),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.flaggedHeaders,items:e.$store.state.flagged,search:e.searchFlagged},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),e._v(" "),a("td",[e._v(e._s(t.item.source1Id))]),e._v(" "),a("td",[e._v(e._s(t.item.source2Name))]),e._v(" "),a("td",[a("v-treeview",{attrs:{items:t.item.source2IdHierarchy}})],1),e._v(" "),a("td",[e._v(e._s(t.item.flagComment))]),e._v(" "),a("td",["Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"primary",small:""},on:{click:function(a){return e.acceptFlag(t.item.source1UUID)}}},[a("v-icon",[e._v("thumb_up")]),e._v("Confirm Match\n                  ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"primary",small:""},on:{click:function(a){return e.acceptFlag(t.item.source1UUID)}}},[a("v-icon",[e._v("thumb_up")]),e._v("Confirm Match\n                  ")],1),e._v(" "),"Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(a){return e.unFlag(t.item.source1UUID)}}},[a("v-icon",[e._v("cached")]),e._v("Release\n                  ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(a){return e.unFlag(t.item.source1UUID)}}},[a("v-icon",[e._v("cached")]),e._v("Release\n                  ")],1)],1)]}}],null,!1,4003772197)})]:[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2)],1)],1),e._v(" "),a("v-layout",["yes"!=e.goNextLevel||e.$store.state.scoreSavingProgressData.savingMatches?e._e():a("v-flex",{attrs:{xs1:"",sm4:"",md2:""}},[a("v-btn",{attrs:{color:"primary",round:""},on:{click:function(t){return e.levelChanged(e.$store.state.recoLevel+1)}}},[a("v-icon",[e._v("forward")]),e._v("Proceed to "+e._s(e.nextLevelText)+"\n        ")],1)],1),e._v(" "),"yes"==e.lastLevelDone?a("v-flex",{attrs:{xs1:"",sm4:"",md2:""}},[a("v-btn",{attrs:{color:"primary",round:""},on:{click:function(t){return e.$router.push({name:"FacilityRecoStatus"})}}},[a("v-icon",[e._v("dashboard")]),e._v("Reconciliation Status\n        ")],1)],1):e._e()],1)],1):e._e()],2)},staticRenderFns:[]};var he=a("VU/8")(ve,pe,!1,function(e){a("2xOm")},null,null).exports,ge={mixins:[oe],data:function(){return{helpDialog:!1,matchedHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"},{text:"Source 2 Location",value:"source2Name"},{text:"Source 2 ID",value:"source2Id"}],noMatchHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"}],notMappedHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"}],flaggedHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"},{text:"Source 2 Location",value:"source2Name"},{text:"Source 2 ID",value:"source2Id"}],searchMatched:"",mappingData:{},recoLevel:2,mappingStatusDialog:!1,mappingStatusProgressTitle:"Waiting for progress status",mappingStatusProgressPercent:0,locationLevels:[]}},methods:{checkMappingStatusProgress:function(){var e=this,t=this.$store.state.clientId;g.a.get("/progress/mappingStatus/"+t).then(function(t){return null===t.data||void 0===t.data||!1===t.data?(e.mappingStatusDialog=!1,e.mappingStatusProgressTitle="Waiting for progress status",void clearInterval(e.mappingStatusProgressTimer)):null===t.data.status&&null===t.data.error&&null===t.data.percent?(e.mappingStatusDialog=!1,clearInterval(e.mappingStatusProgressTimer),void(e.mappingStatusProgressTitle="Waiting for progress status")):(e.mappingStatusProgressTitle=t.data.status,t.data.percent&&("percent"!==e.progressType&&(e.progressType="percent"),e.mappingStatusProgressPercent=t.data.percent),void("Done"===t.data.status&&(e.clearProgress("mappingStatus"),clearInterval(e.mappingStatusProgressTimer),e.mappingStatusDialog=!1,e.mappingStatusProgressTitle="Waiting for progress status")))}).catch(function(e){console.log(e)})},mappingStatus:function(){var e=this;if(this.source1&&this.source2){this.mappingData={};var t=this.$store.state.clientId,a=this.$store.state.totalSource2Levels,r=this.$store.state.totalSource1Levels,s=this.$store.state.activePair.userID._id,o=this.getDatasourceOwner(),i=o.source1Owner,n=o.source2Owner,l=this.getLimitOrgIdOnActivePair().source1LimitOrgId,c=this.getLimitOrgIdOnActivePair().source2LimitOrgId;this.mappingStatusDialog=!0,this.progressType="indeterminate";var u="/mappingStatus/"+this.source1+"/"+this.source2+"/"+i+"/"+n+"/"+this.recoLevel+"/"+a+"/"+r+"/"+t+"/"+s+"?source1LimitOrgId="+l+"&source2LimitOrgId="+c;g.a.get(""+u).then(function(t){e.mappingData=t.data}),this.mappingStatusProgressTimer=setInterval(this.checkMappingStatusProgress,500)}},levelChanged:function(e){this.recoLevel=e,this.mappingStatus()},markRecoDone:function(){var e=this;this.$store.state.progressTitle="Marking reconciliation as Done",this.$store.state.dynamicProgress=!0;var t=this.$store.state.activePair.userID._id;g.a.get("/markRecoDone/"+this.source1+"/"+this.source2+"/"+t).then(function(t){e.$store.state.dynamicProgress=!1,t.data.status&&(e.$store.state.recoStatus=t.data.status),e.$store.state.errorTitle="Reconciliation Done",e.$store.state.errorDescription="Reconciliation is complete, no more changes can be done",e.$store.state.errorColor="primary",e.$store.state.dialogError=!0}).catch(function(t){e.$store.state.dynamicProgress=!1,console.log(t.response.data.error)})},markRecoUnDone:function(){var e=this,t=this.$store.state.activePair.userID._id;this.$store.state.progressTitle="Marking reconciliation as Un Done",this.$store.state.dynamicProgress=!0,g.a.get("/markRecoUnDone/"+this.source1+"/"+this.source2+"/"+t).then(function(t){e.$store.state.dynamicProgress=!1,t.data.status&&(e.$store.state.recoStatus=t.data.status),e.$store.state.errorTitle="Reconciliation on progress",e.$store.state.errorDescription="You may continue doing reconciliation now",e.$store.state.errorColor="primary",e.$store.state.dialogError=!0}).catch(function(t){e.$store.state.dynamicProgress=!1,console.log(t.response.data.error)})}},computed:{currentLevelText:function(){return this.translateDataHeader("source1",this.recoLevel-1)},source1:function(){var e=this.$store.state.activePair.source1.name;return e&&(e=this.toTitleCase(e)),e},source2:function(){var e=this.$store.state.activePair.source2.name;return e&&(e=this.toTitleCase(e)),e},source1PercentMapped:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllMapped/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentMappedLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalMapped/this.totalRecords).toFixed(2))},source1PercentNoMatch:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllNoMatch/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentIgnore:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllIgnore/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentNoMatchLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalNoMatch/this.totalRecords).toFixed(2))},source1PercentIgnoreLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalIgnore/this.totalRecords).toFixed(2))},source1PercentFlagged:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllFlagged/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentFlaggedLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalFlagged/this.totalRecords).toFixed(2))},source1PercentNotMapped:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.source1TotalAllNotMapped/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentNotMappedLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalNotMapped/this.totalRecords).toFixed(2))},source2PercentFlagged:function(){return 0===this.$store.state.source2TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllFlagged/this.$store.state.source2TotalAllRecords).toFixed(2))},source2PercentMapped:function(){return 0===this.$store.state.source2TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllMapped/this.$store.state.source2TotalAllRecords).toFixed(2))},totalMapped:function(){return this.mappingData&&this.mappingData.hasOwnProperty("mapped")?this.mappingData.mapped.length:0},totalNotMapped:function(){return this.mappingData&&this.mappingData.hasOwnProperty("notMapped")?this.mappingData.notMapped.length:0},totalNoMatch:function(){return this.mappingData&&this.mappingData.hasOwnProperty("noMatch")?this.mappingData.noMatch.length:0},totalIgnore:function(){return this.mappingData&&this.mappingData.hasOwnProperty("ignore")?this.mappingData.ignore.length:0},totalFlagged:function(){return this.mappingData&&this.mappingData.hasOwnProperty("flagged")?this.mappingData.flagged.length:0},totalRecords:function(){return this.totalMapped+this.totalNotMapped+this.totalNoMatch+this.totalIgnore+this.totalFlagged}},components:{appRecoExport:de},created:function(){this.mappingStatus();for(var e=1;e<this.$store.state.totalSource1Levels;e++){var t=this.translateDataHeader("source1",e);this.locationLevels.push({text:t,value:e+1})}}},fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{transition:"scale-transition","hide-overlay":"",persistent:"",width:"350"},model:{value:e.mappingStatusDialog,callback:function(t){e.mappingStatusDialog=t},expression:"mappingStatusDialog"}},[a("v-card",{attrs:{color:"white",dark:""}},[a("v-card-text",[a("center",[a("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.mappingStatusProgressTitle))]),a("br"),e._v(" "),"percent"==e.progressType?a("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.mappingStatusProgressPercent,color:"primary"}},[a("v-avatar",{attrs:{color:"indigo",size:"50px"}},[a("span",{staticClass:"white--text"},[a("b",[e._v(e._s(e.mappingStatusProgressPercent)+"%")])])])],1):e._e(),e._v(" "),"indeterminate"==e.progressType?a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"red"}}):e._e()],1)],1)],1)],1),e._v(" "),a("v-layout",{attrs:{column:""}},[a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("info")]),e._v(" About this page\n          ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[e._v("\n          This page let you visualize the mapping status for various levels\n          "),a("v-list",[e._v("\n            1. Right boxes shows reconciliation status for a selected level\n          ")]),e._v(" "),a("v-list",[e._v("\n            2. Left boxes shows reconciliation status for a all levels\n          ")]),e._v(" "),a("v-list",[e._v("\n            3. The search box let you search locations for a selected level only\n          ")])],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("appRecoExport")],1),e._v(" "),a("v-flex",{attrs:{xs9:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"primary"},on:{click:function(t){e.helpDialog=!0}},slot:"activator"},[a("v-icon",[e._v("help")])],1),e._v(" "),a("span",[e._v("Help")])],1)],1)],1)],1)],1),e._v(" "),a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("b",[e._v("All Levels")])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("b",[e._v(e._s(e.currentLevelText)+" Only")])])],1)],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 Matched")])]),e._v(" "),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllMapped)+"/"+e._s(e.$store.state.source1TotalAllRecords))])])],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentMapped,color:"yellow"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source1PercentMapped)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 No Match")])]),e._v(" "),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllNoMatch)+"/"+e._s(e.$store.state.source1TotalAllRecords))])])],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentNoMatch,color:"yellow"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source1PercentNoMatch)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 Flagged")])]),e._v(" "),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllFlagged)+"/"+e._s(e.$store.state.source1TotalAllRecords))])])],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentFlagged,color:"yellow"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source1PercentFlagged)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 2 Matched")])]),e._v(" "),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllMapped)+"/"+e._s(e.$store.state.source2TotalAllRecords))])])],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentMapped,color:"green"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source2PercentMapped)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 2 Flagged")])]),e._v(" "),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllFlagged)+"/"+e._s(e.$store.state.source2TotalAllRecords))])])],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentFlagged,color:"yellow"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source2PercentFlagged)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"cyan","text-color":"black"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 Matched")])]),e._v(" "),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.totalMapped)+"/"+e._s(e.totalRecords))])])],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentMappedLevel,color:"yellow"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentMappedLevel)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"cyan","text-color":"black"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 No Match")])]),e._v(" "),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.totalNoMatch)+"/"+e._s(e.totalRecords))])])],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentNoMatchLevel,color:"yellow"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentNoMatchLevel)+"%")])])],1)],1)],1)],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"cyan","text-color":"black"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 Flagged")])]),e._v(" "),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.totalFlagged)+"/"+e._s(e.totalRecords))])])],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentFlagged,color:"yellow"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentFlagged)+"%")])])],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchMatched,callback:function(t){e.searchMatched=t},expression:"searchMatched"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs2:""}},[e.$store.state.activePair.userID._id===e.$store.state.auth.userID||"Admin"==e.$store.state.auth.role?["Done"!==e.$store.state.recoStatus?a("v-btn",{attrs:{color:"success",round:""},on:{click:e.markRecoDone}},[a("v-icon",[e._v("lock")]),e._v("Mark Reconciliation As Done\n            ")],1):e._e(),e._v(" "),"Done"===e.$store.state.recoStatus&&"Admin"==e.$store.state.auth.role?a("v-btn",{attrs:{color:"success",round:""},on:{click:e.markRecoUnDone}},[a("v-icon",[e._v("lock_open")]),e._v("Mark Reconciliation As UnDone\n            ")],1):e._e()]:e._e()],2),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs1:"",sm2:"",md2:"",right:""}},[a("v-select",{staticClass:"input-group--focused",attrs:{items:e.locationLevels,"item-value":e.locationLevels.value,"item-name":e.locationLevels.text,label:"Level",height:"1","full-width":"","single-line":""},on:{change:e.levelChanged},model:{value:e.recoLevel,callback:function(t){e.recoLevel=t},expression:"recoLevel"}})],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-tabs",{attrs:{"icons-and-text":"",centered:"",grow:"",dark:"",color:"cyan"}},[a("v-tabs-slider",{attrs:{color:"red"}}),e._v(" "),a("v-tab",{key:"match"},[e._v("\n          MATCHED ("+e._s(e.totalMapped)+")\n          "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("thumb_up")])],1),e._v(" "),a("v-tab",{key:"notMapped"},[e._v("\n          Source 1 Not Mapped ("+e._s(e.totalNotMapped)+")\n          "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("thumb_down")])],1),e._v(" "),a("v-tab",{key:"nomatch"},[e._v("\n          Source 1 NO MATCH ("+e._s(e.totalNoMatch)+")\n          "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("thumb_down")])],1),e._v(" "),a("v-tab",{key:"ignore"},[e._v("\n          Source 1 IGNORED ("+e._s(e.totalIgnore)+")\n          "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("thumb_down")])],1),e._v(" "),a("v-tab",{key:"flagged"},[e._v("\n          FLAGGED ("+e._s(e.totalFlagged)+")\n          "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("notification_important")])],1),e._v(" "),a("v-tab-item",{key:"match"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.matchedHeaders,items:e.mappingData.mapped,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),e._v(" "),a("td",[e._v(e._s(t.item.source1Id))]),e._v(" "),a("td",[e._v(e._s(t.item.source2Name))]),e._v(" "),a("td",[e._v(e._s(t.item.source2Id))])]}}])})],1),e._v(" "),a("v-tab-item",{key:"notMapped"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.notMappedHeaders,items:e.mappingData.notMapped,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),e._v(" "),a("td",[e._v(e._s(t.item.source1Id))])]}}])})],1),e._v(" "),a("v-tab-item",{key:"nomatch"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.mappingData.noMatch,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),e._v(" "),a("td",[e._v(e._s(t.item.source1Id))])]}}])})],1),e._v(" "),a("v-tab-item",{key:"ignore"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.mappingData.ignore,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),e._v(" "),a("td",[e._v(e._s(t.item.source1Id))])]}}])})],1),e._v(" "),a("v-tab-item",{key:"flagged"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.flaggedHeaders,items:e.mappingData.flagged,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),e._v(" "),a("td",[e._v(e._s(t.item.source1Id))]),e._v(" "),a("td",[e._v(e._s(t.item.source2Name))]),e._v(" "),a("td",[e._v(e._s(t.item.source2Id))])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]},me=a("VU/8")(ge,fe,!1,null,null,null).exports,_e={data:function(){return{dialog:!1,restoreDialog:!1,alertTitle:"",alertText:"",archives:[],selectedArchive:"",header:[{sortable:!1},{text:"Archive Name",value:"archiveName"}]}},methods:{getArchives:function(){var e=this,t=this.$store.state.orgUnit;g.a.get("/getArchives/"+t.OrgId).then(function(t){e.archives=t.data,0===e.archives.length?e.$store.state.showArchives=!1:e.$store.state.showArchives=!0})},restoreArchive:function(){var e=this;if(""===this.selectedArchive)this.alertTitle="Error",this.alertText="Select an archive to restored",this.dialog=!0;else{this.restoreDialog=!0;var t=this.$store.state.orgUnit,a=new FormData;a.append("archive",this.selectedArchive),g.a.post("/restoreArchive/"+t.OrgId,a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){e.restoreDialog=!1,Gt.$emit("refreshApp"),e.getArchives(),e.selectedArchive=""}).catch(function(t){e.restoreDialog=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data.error,console.log(t.response.data.error)})}}},created:function(){this.getArchives()}},ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[e.$store.state.uploadRunning?[a("br"),a("br"),a("br"),e._v(" "),a("v-alert",{attrs:{type:"info",value:!0}},[a("b",[e._v("Wait for upload to finish ...")]),e._v(" "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)]:e._e(),e._v(" "),0==e.archives.length?[a("br"),a("br"),a("br"),e._v(" "),a("v-alert",{attrs:{type:"info",value:!0}},[a("b",[e._v("No archived upload ...")])])]:e._e(),e._v(" "),[a("v-container",{attrs:{"grid-list-lg":""}},[a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.restoreDialog,callback:function(t){e.restoreDialog=t},expression:"restoreDialog"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v("\n            Restoring\n            "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",width:"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[e._v("\n            "+e._s(e.alertTitle)+"\n          ")]),e._v(" "),a("v-card-text",[e._v("\n            "+e._s(e.alertText)+"\n          ")]),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"success"},on:{click:function(t){e.dialog=!1}}},[e._v("OK")])],1)],1)],1),e._v(" "),e.archives.length>0?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"","child-flex":""}},[a("v-card",{attrs:{color:"green lighten-4"}},[a("v-card-title",{staticStyle:{color:"black"},attrs:{"primary-title":""}},[e._v("\n              Archived Uploads\n            ")]),e._v(" "),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",staticStyle:{color:"red"},attrs:{headers:e.header,items:e.archives,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("v-radio-group",{staticStyle:{height:"5px"},attrs:{color:"red"},model:{value:e.selectedArchive,callback:function(t){e.selectedArchive=t},expression:"selectedArchive"}},[a("td",[a("v-radio",{attrs:{value:t.item,color:"red"}})],1)]),e._v(" "),a("td",[e._v(e._s(t.item))])],1)]}}],null,!1,1011195848)})],1),e._v(" "),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{attrs:{color:"error",dark:""},nativeOn:{click:function(t){return e.restoreArchive(t)}}},[a("v-icon",{attrs:{left:""}},[e._v("cached")]),e._v("Restore")],1)],1)],1)],1)],1):e._e()],1)]],2)},staticRenderFns:[]};var xe=a("VU/8")(_e,ye,!1,function(e){a("VPxq")},null,null).exports,be=a("gRE1"),Se=a.n(be),$e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}},[a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"770px",transition:"dialog-transition"},model:{value:e.datasetLimit,callback:function(t){e.datasetLimit=t},expression:"datasetLimit"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("info")]),e._v(" Datasets limit Warning\n        ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.datasetLimit=!1}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[e._v("\n        You cant add more datasets as you have reached the datasets limit, contact system administrator for help\n      ")]),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.datasetLimit=!1}}},[e._v("Ok")])],1)],1)],1)],1)},staticRenderFns:[]},we=a("VU/8")({props:["datasetLimitWarn"],computed:{datasetLimit:{get:function(){return this.datasetLimitWarn},set:function(e){this.$emit("limitWarnStateChange",e)}}}},$e,!1,null,null,null).exports,De={data:function(){return{name:"",host:"",username:"",password:"",sourceType:"",limitShareByOrgId:!1,shareWithAll:!1,shareToSameOrgid:!0,invalidCharacters:['"',"/","\\","."]}},methods:{sharingOptions:function(){this.shareWithAll&&(this.shareToSameOrgid=!1)},addDataSource:function(e){var t=this,a=new FormData,r=this.$store.state.clientId;a.append("host",this.host),a.append("sourceType",this.sourceType),a.append("source",e),a.append("orgId",this.$store.state.dhis.user.orgId),a.append("shareToSameOrgid",this.shareToSameOrgid),a.append("shareToAll",this.shareWithAll),a.append("limitByUserLocation",this.limitShareByOrgId),a.append("username",this.username),a.append("password",this.password),a.append("name",this.name),a.append("clientId",r),a.append("userID",this.$store.state.auth.userID);var s=this.$store.state.dataSources.find(function(e){return e.host===t.host});g.a.post("/addDataSource",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){Gt.$emit("dataSourceSaved"),Gt.$emit("dataSourceAddedSuccessfully"),Gt.$emit("getDataSources"),s?(s.name=t.name,s.username=t.username,s.password=e.data.password,s.sourceType=t.sourceType):t.$store.state.dataSources.push({name:t.name,host:t.host,sourceType:t.sourceType,source:"syncServer",username:t.username,password:e.data.password})}).catch(function(e){console.log(e),Gt.$emit("remoteServerFailedAdd")})}}},Ce={mixins:[De,U],data:function(){return{datasetLimitWarn:!1,errorDialog:!1,errorTitle:"",errorContent:"",dialog:!1,fileUploadPercentage:"",percentDialog:!1,uploadPrepaProgr:!1,UploadProgressTimer:"",uploadStatus:"1/3 Uploading CSV to the server",uploadPercent:null,uploadName:"",uploadNameErrors:[],confirmUpload:!1,confirmTitle:"",confirmMsg:"",file:"",uploadedFileName:"",e1:0,facility:null,code:null,lat:null,long:null,level1:null,level2:null,level3:null,level4:null,level5:null,level6:null,level7:null,showLevel3:!1,showLevel4:!1,showLevel5:!1,showLevel6:!1,showLevel7:!1,uploadedHeaders:[],mappedHeaders:[],invalidRowsHeader:[],invalidRowsContent:[],invalidRows:!1,valid:!1}},validations:{facility:{required:x.required},code:{required:x.required},uploadName:{required:x.required}},methods:{fileSelected:function(e){this.uploadedFileName=e.target.files[0].name,"text/csv"===e.target.files[0].type||"application/vnd.ms-excel"===e.target.files[0].type&&"csv"===e.target.files[0].name.slice(-3).toLowerCase()||(this.errorDialog=!0,this.errorTitle="Error",this.errorContent="Wrong file type uploaded,Only CSV format is supported",this.uploadedFileName=""),this.file=e.target.files[0];var t=new FileReader;t.addEventListener("load",function(){var e=t.result.split(/\r\n|\n/)[0];this.uploadedHeaders=e.split(",")}.bind(this),!1),t.readAsText(e.target.files[0],"utf-8")},ensureNameUnique:function(){if(this.uploadNameErrors=[],""===this.uploadName)return this.uploadNameErrors.push("Upload name is required");if(this.uploadName.length>35)return this.uploadNameErrors.push("Name must not exceed 35 characters");var e=!0,t=!1,a=void 0;try{for(var r,s=c()(this.invalidCharacters);!(e=(r=s.next()).done);e=!0){var o=r.value;if(-1!==this.uploadName.indexOf(o))return this.uploadNameErrors.push("Name is invalid")}}catch(e){t=!0,a=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw a}}var i=!0,n=!1,l=void 0;try{for(var u,d=c()(this.$store.state.dataSources);!(i=(u=d.next()).done);i=!0){if(u.value.name.toLowerCase()===this.uploadName.toLowerCase())return this.uploadNameErrors.push("This Name Exists"),!1}}catch(e){n=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(n)throw l}}},confirmSubmit:function(){this.confirmUpload=!0},checkUploadProgress:function(){var e=this,t=this.$store.state.clientId;g.a.get("/progress/uploadProgress/"+t).then(function(t){return t.data&&(t.data.status||t.data.percent||t.data.error)?null!==t.data.error?(e.$store.state.uploadRunning=!1,e.uploadPrepaProgr=!1,e.percentDialog=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.data.error,void console.log(t.data.error)):(e.uploadStatus=t.data.status,t.data.percent&&(e.percentDialog||(e.uploadPrepaProgr=!1,e.percentDialog=!0),e.uploadPercent=t.data.percent),void("Done"===t.data.status||t.data.status>=100?(e.clearProgress("uploadProgress"),e.addDataSource("upload"),clearInterval(e.UploadProgressTimer),e.$store.state.recoLevel=2,e.percentDialog=!1,e.dialog=!0,e.$store.state.uploadRunning=!1):e.checkUploadProgress())):(e.$store.state.uploadRunning=!1,e.uploadPrepaProgr=!1,e.percentDialog=!1,e.$store.state.errorTitle="An error has occured",e.$store.state.errorDescription="You should delete this data source from view data source page then re-upload",e.$store.state.errorColor="error",void(e.$store.state.dialogError=!0))}).catch(function(t){console.log(t),e.checkUploadProgress()})},performExtraCheck:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Performing extra validations",this.getGeneralConfig(function(){e.datasetLimitWarn=!1,e.$store.state.dynamicProgress=!1,e.canAddDataset?e.submitCSV():(e.confirmUpload=!1,e.datasetLimitWarn=!0)})},submitCSV:function(){var e=this,t=new FormData;t.append("file",this.file),t.append("csvName",this.uploadName),t.append("facility",this.facility),t.append("code",this.code),t.append("lat",this.lat),t.append("long",this.long),t.append("level1",this.level1),t.append("level2",this.level2),t.append("level3",this.level3),t.append("level4",this.level4),t.append("level5",this.level5),t.append("level6",this.level6),t.append("level7",this.level7),t.append("clientId",this.$store.state.clientId),t.append("userID",this.$store.state.auth.userID),this.confirmUpload=!1,this.$store.state.uploadRunning=!0,this.uploadPrepaProgr=!0,this.host="",this.sourceType="upload",this.username="",this.password="",this.name=this.uploadName,g.a.post("/uploadCSV",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){this.fileUploadPercentage=parseInt(Math.round(100*e.loaded/e.total)),100===this.fileUploadPercentage&&(this.fileUploadPercentage="",this.uploadStatus="2/3 Validating CSV Data")}.bind(this)}).then(function(t){e.checkUploadProgress()}).catch(function(t){if(Array.isArray(t.response.data.error)){e.invalidRows=!0;for(var a=0;a<t.response.data.error.length;a++){if(0===a){var r=p()(t.response.data.error[a].data),s=!0,o=!1,i=void 0;try{for(var n,l=c()(r);!(s=(n=l.next()).done);s=!0){var u=n.value;e.invalidRowsHeader.push({text:u,value:u})}}catch(t){o=!0,i=t}finally{try{!s&&l.return&&l.return()}finally{if(o)throw i}}e.invalidRowsHeader.push({text:"Reason",value:"reason"})}var d=Se()(t.response.data.error[a].data),v={};for(var h in d)v[e.invalidRowsHeader[h].value]=d[h];v.reason=t.response.data.error[a].reason,e.invalidRowsContent.push(v)}}else e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data.error+". Reload page and retry";e.$store.state.uploadRunning=!1,e.uploadPrepaProgr=!1,e.percentDialog=!1,clearInterval(e.UploadProgressTimer)})},closeInvalidRows:function(){this.invalidRows=!1,this.invalidRowsHeader=[],this.invalidRowsContent=[],this.e1=1},closeDialog:function(e){this.$router.push({name:e}),this.dialog=!1},closeUploadWindow:function(){Gt.$emit("dataSourceSaved")},showMoreLevel:function(){this.showLevel3?this.showLevel4?this.showLevel5?this.showLevel6?this.showLevel7||(this.showLevel7=!0):this.showLevel6=!0:this.showLevel5=!0:this.showLevel4=!0:this.showLevel3=!0}},components:{appDialogs:we},computed:{facilityErrors:function(){var e=[];return this.$v.facility.$dirty?(!this.$v.facility.required&&e.push("Facility is required"),e):e},codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},filteredItemFacility:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7})},filteredItemCode:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7})},filteredItemLat:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7})},filteredItemLong:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7})},filteredItemLevel1:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7})},filteredItemLevel2:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7})},filteredItemLevel3:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7})},filteredItemLevel4:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level5&&t!==e.level6&&t!==e.level7})},filteredItemLevel5:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level6&&t!==e.level7})},filteredItemLevel6:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level7})},filteredItemLevel7:function(){var e=this;return this.uploadedHeaders.filter(function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6})}},created:function(){this.$store.state.uploadProgressData.percentDialog&&(this.percentDialog=this.$store.state.uploadProgressData.percentDialog),this.$store.state.uploadProgressData.uploadPrepaProgr&&(this.uploadPrepaProgr=this.$store.state.uploadProgressData.uploadPrepaProgr),this.$store.state.uploadProgressData.UploadProgressTimer&&(this.UploadProgressTimer=this.$store.state.uploadProgressData.UploadProgressTimer),this.$store.state.uploadProgressData.uploadStatus&&(this.uploadStatus=this.$store.state.uploadProgressData.uploadStatus),this.$store.state.uploadProgressData.uploadPercent&&(this.uploadPercent=this.$store.state.uploadProgressData.uploadPercent)},destroyed:function(){this.$store.state.uploadProgressData.dialog=this.dialog,this.$store.state.uploadProgressData.percentDialog=this.percentDialog,this.$store.state.uploadProgressData.uploadPrepaProgr=this.uploadPrepaProgr,this.$store.state.uploadProgressData.UploadProgressTimer=this.UploadProgressTimer,this.$store.state.uploadProgressData.uploadStatus=this.uploadStatus,this.$store.state.uploadProgressData.uploadPercent=this.uploadPercent}},ke={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n          Information\n        ")])],1),e._v(" "),a("v-card-text",[e._v("\n        Data uploaded successfully\n      ")]),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.closeDialog("FacilityReconView")}}},[a("v-icon",{attrs:{left:""}},[e._v("list")]),e._v("\n          View Data\n        ")],1)],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"1050px"},model:{value:e.invalidRows,callback:function(t){e.invalidRows=t},expression:"invalidRows"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("error")]),e._v("Data Upload was not successful,review below invalid rows in your CSV\n        ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeInvalidRows()}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.invalidRowsHeader,items:e.invalidRowsContent,light:""},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.invalidRowsHeader,function(r){return a("td",[e._v(e._s(t.item[r.value]))])})}}])})],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.confirmUpload,callback:function(t){e.confirmUpload=t},expression:"confirmUpload"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n          Warning\n        ")])],1),e._v(" "),a("v-card-text",[e._v("\n        You are about to upload CSV data into the app, click proceed to upload\n      ")]),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.confirmUpload=!1}}},[e._v("Cancel")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.performExtraCheck(t)}}},[e._v("Proceed")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.errorDialog,callback:function(t){e.errorDialog=t},expression:"errorDialog"}},[a("v-card",[a("v-card-title",[e._v("\n        "+e._s(e.errorTitle)+"\n      ")]),e._v(" "),a("v-card-text",[e._v("\n        "+e._s(e.errorContent)+"\n      ")]),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.errorDialog=!1}}},[e._v("Ok")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{transition:"scale-transition",persistent:"",width:"300"},model:{value:e.uploadPrepaProgr,callback:function(t){e.uploadPrepaProgr=t},expression:"uploadPrepaProgr"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v("\n        "+e._s(e.uploadStatus)+"\n        "),e.fileUploadPercentage?a("v-progress-linear",{staticClass:"mb-0",attrs:{color:"white"},model:{value:e.fileUploadPercentage,callback:function(t){e.fileUploadPercentage=t},expression:"fileUploadPercentage"}}):a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{transition:"scale-transition",persistent:"",width:"270"},model:{value:e.percentDialog,callback:function(t){e.percentDialog=t},expression:"percentDialog"}},[a("v-card",{attrs:{color:"white",dark:""}},[a("v-card-text",[a("center",[a("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.uploadStatus))]),a("br"),e._v(" "),a("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.uploadPercent,color:"primary"}},[a("v-avatar",{attrs:{color:"indigo",size:"50px"}},[a("span",{staticClass:"white--text"},[a("b",[e._v(e._s(e.uploadPercent)+"%")])])])],1)],1)],1)],1)],1),e._v(" "),e.$store.state.denyAccess?e._e():a("v-slide-y-transition",{attrs:{mode:"out-in"}},[a("v-stepper",{model:{value:e.e1,callback:function(t){e.e1=t},expression:"e1"}},[a("v-stepper-header",[a("v-stepper-step",{attrs:{step:"1",complete:e.e1>1}},[e._v("Upload CSV")]),e._v(" "),a("v-divider"),e._v(" "),a("v-stepper-step",{attrs:{step:"2",complete:e.e1>2}},[e._v("Map Headers")]),e._v(" "),a("v-btn",{attrs:{icon:""},nativeOn:{click:function(t){return e.closeUploadWindow()}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-stepper-items",[a("v-stepper-content",{attrs:{step:"1"}},[a("v-card",{staticClass:"mb-5"},[a("v-card-title",[e._v("Upload CSV (utf-8 only) - "),a("b",[e._v("Select a CSV file and upload")])]),e._v(" "),a("v-card-text",[a("v-text-field",{attrs:{label:"Enter Unique Name For Your Data","error-messages":e.uploadNameErrors,required:""},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.uploadName,callback:function(t){e.uploadName=t},expression:"uploadName"}}),e._v(" "),a("input",{attrs:{type:"file"},on:{change:e.fileSelected}}),e._v(" "),a("br"),a("br"),e._v(" "),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                  Advanced Options\n                ")]),e._v(" "),a("v-card-text",[a("v-tooltip",{attrs:{top:""}},[e.$store.state.dhis.user.orgId?a("v-checkbox",{attrs:{slot:"activator",disabled:e.shareWithAll,color:"primary",label:"Share with other users of the same org unit as yours"},slot:"activator",model:{value:e.shareToSameOrgid,callback:function(t){e.shareToSameOrgid=t},expression:"shareToSameOrgid"}}):e._e(),e._v(" "),a("span",[e._v("\n                      Share this dataset with all other users that are on the same org unit as you\n                    ")])],1),e._v(" "),e.$store.state.config.generalConfig.allowShareToAllForNonAdmin||"Admin"===e.$store.state.auth.role?a("v-checkbox",{attrs:{color:"primary",label:"Share with all other users"},on:{change:e.sharingOptions},model:{value:e.shareWithAll,callback:function(t){e.shareWithAll=t},expression:"shareWithAll"}}):e._e(),e._v(" "),a("v-tooltip",{attrs:{top:""}},[e.shareWithAll&&e.$store.state.dhis.user.orgId?a("v-checkbox",{attrs:{slot:"activator",color:"primary",label:"Limit orgs sharing by user orgid"},slot:"activator",model:{value:e.limitShareByOrgId,callback:function(t){e.limitShareByOrgId=t},expression:"limitShareByOrgId"}}):e._e(),e._v(" "),a("span",[e._v("\n                      if activated, other users will see locations (including location children) that has the same location id as their location id\n                    ")])],1)],1)],1)],1)],1),e._v(" "),e.uploadedFileName&&e.uploadName&&0===e.uploadNameErrors.length?a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.e1=2}}},[e._v("Continue")]):a("v-btn",{attrs:{color:"primary",disabled:""},nativeOn:{click:function(t){e.e1=2}}},[e._v("Continue")])],1),e._v(" "),a("v-stepper-content",{attrs:{step:"2"}},[a("b",[e._v("Map an appropriate CSV header against those on the app.")]),e._v(" "),a("v-container",{attrs:{fluid:""}},[a("v-layout",{ref:"form",attrs:{row:"",wrap:""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Facility*")])],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemFacility,"error-messages":e.facilityErrors,label:"Select",required:"","single-line":"",clearable:""},on:{blur:function(t){return e.$v.facility.$touch()},change:function(t){return e.$v.facility.$touch()}},model:{value:e.facility,callback:function(t){e.facility=t},expression:"facility"}})],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Code*")])],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemCode,"error-messages":e.codeErrors,label:"Select",required:"","single-line":"",clearable:""},on:{blur:function(t){return e.$v.code.$touch()},change:function(t){return e.$v.code.$touch()}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Latitude")])],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLat,label:"Select","single-line":"",clearable:""},model:{value:e.lat,callback:function(t){e.lat=t},expression:"lat"}})],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Longitude")])],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLong,label:"Select","single-line":"",clearable:""},model:{value:e.long,callback:function(t){e.long=t},expression:"long"}})],1),e._v(" "),[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 1")])],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel1,label:"Select","single-line":"",clearable:""},model:{value:e.level1,callback:function(t){e.level1=t},expression:"level1"}})],1)],e._v(" "),[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 2")])],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel2,label:"Select","single-line":"",clearable:""},model:{value:e.level2,callback:function(t){e.level2=t},expression:"level2"}})],1)],e._v(" "),e.showLevel3?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 3")])],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel3,label:"Select","single-line":"",clearable:""},model:{value:e.level3,callback:function(t){e.level3=t},expression:"level3"}})],1)]:e._e(),e._v(" "),e.showLevel4?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 4")])],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel4,label:"Select","single-line":"",clearable:""},model:{value:e.level4,callback:function(t){e.level4=t},expression:"level4"}})],1)]:e._e(),e._v(" "),e.showLevel5?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 5")])],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel5,label:"Select","single-line":"",clearable:""},model:{value:e.level5,callback:function(t){e.level5=t},expression:"level5"}})],1)]:e._e(),e._v(" "),e.showLevel6?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 6")])],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel6,label:"Select","single-line":"",clearable:""},model:{value:e.level6,callback:function(t){e.level6=t},expression:"level6"}})],1)]:e._e(),e._v(" "),e.showLevel7?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 7")])],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel7,label:"Select","single-line":"",clearable:""},model:{value:e.level7,callback:function(t){e.level7=t},expression:"level7"}})],1)]:e._e(),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),e._v(" "),a("v-tooltip",{attrs:{top:""}},[e.showLevel7?e._e():a("v-btn",{attrs:{slot:"activator",color:"success",icon:""},on:{click:e.showMoreLevel},slot:"activator"},[a("v-icon",[e._v("add")])],1),e._v(" "),a("span",[e._v("Add More Level")])],1)],1)],2)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.e1=1}}},[e._v("Go Back")])],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"primary",disabled:e.$v.$invalid},nativeOn:{click:function(t){e.confirmUpload=!0}}},[e._v("Upload")])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var Pe=a("VU/8")(Ce,ke,!1,function(e){a("ZVZp")},"data-v-1f05e6ac",null).exports,Te={mixins:[De,U],validations:{host:{required:x.required},name:{required:x.required},sourceType:{required:x.required}},data:function(){return{datasetLimitWarn:!1,nameErrors:[]}},methods:{close:function(){Gt.$emit("dataSourceSaved")},performExtraCheck:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Performing extra validations",this.getGeneralConfig(function(){e.datasetLimitWarn=!1,e.$store.state.dynamicProgress=!1,e.canAddDataset?e.addDataSource("syncServer"):e.datasetLimitWarn=!0})},ensureNameUnique:function(){if(this.nameErrors=[],""===this.name)return this.nameErrors.push("Name is required");if(this.name.length>35)return this.nameErrors.push("Name must not exceed 35 characters");var e=!0,t=!1,a=void 0;try{for(var r,s=c()(this.invalidCharacters);!(e=(r=s.next()).done);e=!0){var o=r.value;if(-1!==this.name.indexOf(o))return this.nameErrors.push("Name is invalid")}}catch(e){t=!0,a=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw a}}var i=!0,n=!1,l=void 0;try{for(var u,d=c()(this.$store.state.dataSources);!(i=(u=d.next()).done);i=!0){if(u.value.name===this.name)return this.nameErrors.push("This Name Exists"),!1}}catch(e){n=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(n)throw l}}}}},Ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),e._v(" "),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Add New Remote Source")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.close()}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-select",{attrs:{items:e.$store.state.remoteDataSources,required:"",label:"Source Type"},model:{value:e.sourceType,callback:function(t){e.sourceType=t},expression:"sourceType"}}),e._v(" "),a("v-text-field",{attrs:{box:"",required:"","error-messages":e.nameErrors,color:"deep-purple",label:"Source Name"},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("v-text-field",{attrs:{box:"",required:"",color:"deep-purple",label:"Base URL"},model:{value:e.host,callback:function(t){e.host=t},expression:"host"}}),e._v(" "),a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),a("v-text-field",{staticStyle:{"min-height":"96px"},attrs:{box:"",color:"deep-purple",label:"Password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),[a("v-tooltip",{attrs:{top:""}},[e.$store.state.dhis.user.orgId?a("v-checkbox",{attrs:{slot:"activator",disabled:e.shareWithAll,color:"primary",label:"Share with other users of the same org unit as yours"},slot:"activator",model:{value:e.shareToSameOrgid,callback:function(t){e.shareToSameOrgid=t},expression:"shareToSameOrgid"}}):e._e(),e._v(" "),a("span",[e._v("\n                Share this dataset with all other users that are on the same org unit as you\n              ")])],1),e._v(" "),e.$store.state.config.generalConfig.allowShareToAllForNonAdmin||"Admin"===e.$store.state.auth.role?a("v-checkbox",{attrs:{color:"primary",label:"Share with all other users"},on:{change:e.sharingOptions},model:{value:e.shareWithAll,callback:function(t){e.shareWithAll=t},expression:"shareWithAll"}}):e._e(),e._v(" "),a("v-tooltip",{attrs:{top:""}},[e.shareWithAll&&e.$store.state.dhis.user.orgId?a("v-checkbox",{attrs:{slot:"activator",color:"primary",label:"Limit orgs sharing by user orgid"},slot:"activator",model:{value:e.limitShareByOrgId,callback:function(t){e.limitShareByOrgId=t},expression:"limitShareByOrgId"}}):e._e(),e._v(" "),a("span",[e._v("\n                if activated, other users will see locations (including location children) that has the same location id as their location id\n              ")])],1)]],2),e._v(" "),a("v-divider"),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:e.performExtraCheck}},[e._v("\n            Add\n          ")])],1)],1)],1),e._v(" "),a("v-spacer")],1)],1)},staticRenderFns:[]},Ie=a("VU/8")(Te,Ae,!1,null,null,null).exports,Re={mixins:[U],data:function(){return{helpDialog:!1,datasetLimitWarn:!1,selectedComponent:"",dataSources:[{text:"Upload CSV",value:"upload"},{text:"Remote Source",value:"remote"}],dataSource:"",addDataSource:!0,alertSuccess:!1,alertError:!1,alertMsg:""}},methods:{limitWarnStateChange:function(e){this.datasetLimitWarn=e},sourceSelected:function(e){this.addDataSource=!0,"upload"===e?this.selectedComponent="FacilityReconUpload":"remote"===e&&(this.selectedComponent="FacilityReconRemoteSources")}},computed:{canUseUploadWay:function(){return-1!==this.$store.state.config.generalConfig.datasetsAdditionWays.indexOf("CSV Upload")},canUseRemoteWay:function(){return-1!==this.$store.state.config.generalConfig.datasetsAdditionWays.indexOf("Remote Servers Sync")}},components:{FacilityReconUpload:Pe,FacilityReconRemoteSources:Ie,appDialogs:we},created:function(){var e=this;Gt.$on("dataSourceSaved",function(){e.addDataSource=!1,e.dataSource=""}),Gt.$on("dataSourceAddedSuccessfully",function(){e.alertSuccess=!0,e.alertMsg="Data Source Added Successfully",setTimeout(function(){e.alertSuccess=!1},3e3)}),Gt.$on("remoteServerFailedAdd",function(){e.alertError=!0,e.alertMsg="Data Source Failed To Be Added"})}},Fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("info")]),e._v(" About this page\n        ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[e._v("\n        This page let you load data from various sources into the app for reconciliation\n        "),a("v-list",[e._v("1. Select to add remote source if you have a DHIS2 or FHIR server that you want to use its data on this app")]),e._v(" "),a("v-list",[e._v("2. Select Upload CSV if you have a CSV file and want to upload its data on the app")]),e._v(" "),a("v-list",[e._v("3. The system requires CSV data to have atleast 2 levels above facility")]),e._v(" "),a("v-list",[e._v("4. Level 1 is the highest level on the hierarchy i.e Country")]),e._v(" "),a("v-list",[e._v("\n          5. Base URL under remote sources section refer to the URL i.e http://localhost:3447/fhir and not http://localhost:3447/fhir/Location.\n          Same applies to DHIS2 base URL\n        ")])],1)],1)],1),e._v(" "),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n    "+e._s(e.alertMsg)+"\n  ")]),e._v(" "),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v("\n    "+e._s(e.alertMsg)+"\n  ")]),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v("\n            Choose way to add data source\n          ")]),e._v(" "),a("v-spacer")],1),e._v(" "),a("v-card-text",[a("v-radio-group",{attrs:{row:""},on:{change:e.sourceSelected},model:{value:e.dataSource,callback:function(t){e.dataSource=t},expression:"dataSource"}},[e.canUseUploadWay?a("v-radio",{attrs:{disabled:!e.canAddDataset,color:"primary",label:"Upload CSV",value:"upload"}}):e._e(),e._v(" "),e.canUseRemoteWay?a("v-radio",{attrs:{disabled:!e.canAddDataset,color:"primary",label:"Remote Source",value:"remote"}}):e._e()],1)],1)],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"primary"},on:{click:function(t){e.helpDialog=!0}},slot:"activator"},[a("v-icon",[e._v("help")])],1),e._v(" "),a("span",[e._v("Help")])],1)],1)],1),e._v(" "),a("v-layout",{attrs:{column:""}},[a("v-flex",[e.addDataSource?a(e.selectedComponent,{tag:"component"}):e._e()],1)],1),e._v(" "),a("appDialogs",{attrs:{datasetLimitWarn:e.datasetLimitWarn},on:{limitWarnStateChange:e.limitWarnStateChange}})],1)},staticRenderFns:[]},Me=a("VU/8")(Re,Fe,!1,null,null,null).exports,Le={mixins:[U],data:function(){return{syncType:"",mode:"",loadingPairs:!1,pairs:[],pairsHeaders:[{text:"Pair Name",value:"name"},{text:"Owner",value:"owner"}],helpDialog:!1,deleteConfirm:!1,editDialog:!1,server:{name:"",userID:{}},shareDialog:!1,shareSource:{},users:[],sharedUsers:[],limitLocationId:"",limitLocationName:"No limit",locationTree:[],loadingLocationTree:!1,searchUsers:"",syncServersHeader:[{sortable:!1},{text:"Source Name",value:"name"},{text:"Base URL",value:"host"},{text:"Source Type",value:"sourceType"},{text:"User Name",value:"username"},{text:"Password",value:"password"},{text:"Last Sync",value:"lastsync"},{text:"Owner",value:"owner",sortable:!1},{text:"Shared To",value:"shareStatus"},{text:"Created Time",value:"createdTime"}],uploadSourcesHeader:[{sortable:!1},{text:"Source Name",align:"left",value:"name"},{text:"Owner",value:"owner",sortable:!1},{text:"Shared To",value:"shareStatus"},{text:"Created Time",value:"createdTime"}],dataSources:[{text:"Upload CSV",value:"upload"},{text:"Remote Source",value:"remote"}],usersHeader:[{sortable:!1},{text:"Username",value:"userName",sortable:!0},{text:"Firstname",value:"firstName",sortable:!0},{text:"Surname",value:"surname",sortable:!0}],dataSource:"",addDataSource:!0,syncProgrIndeter:!1,syncProgrPercent:!1,syncStatus:"Waiting for sync status",syncPercent:null,syncProgressTimer:"",syncRunning:!1,alertSuccess:!1,alertError:!1,alertMsg:""}},filters:{mergeUsers:function(e){if(!e||0===e.length)return"";var t="",a=!0,r=!1,s=void 0;try{for(var o,i=c()(e);!(a=(o=i.next()).done);a=!0){var n=o.value;t?t+=", "+n.userName:t=n.userName}}catch(e){r=!0,s=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw s}}return t}},methods:{sourceSelected:function(e){this.addDataSource=!0,"upload"===e?this.selectedComponent="FacilityReconUpload":"remote"===e&&(this.selectedComponent="FacilityReconRemoteSources")},editDataSource:function(e){return this.server.name?this.server.userID._id!==this.$store.state.auth.userID?(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="You are not the owner of this data source, ask the owner to edit any details")):void("upload"!==this.server.source&&(this.editDialog=!0)):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source"))},saveEdit:function(){var e=this,t=new FormData,a=this.$store.state.clientId;t.append("host",this.server.host),t.append("sourceType",this.server.sourceType),t.append("source",this.server.source),t.append("username",this.server.username),t.append("password",this.server.password),t.append("userID",this.server.userID._id),t.append("name",this.server.name),t.append("id",this.server._id),t.append("clientId",a),this.editDialog=!1,g.a.post("/addDataSource",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.server.password=t.data.password})},validateDelete:function(){return this.server.name?this.server.userID._id!==this.$store.state.auth.userID&&"Admin"!==this.$store.state.auth.role?(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="You are not the owner of this data source, ask the owner to remove you from the share")):(this.getPairsToDelete(),void(this.deleteConfirm=!0)):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source"))},deleteDataSource:function(){var e=this;this.deleteConfirm=!1;var t=this.$store.state.auth.userID,a=this.server.userID._id;g.a.get("/deleteDataSource/"+this.server._id+"/"+this.server.name+"/"+a+"/"+t).then(function(t){e.server={},Gt.$emit("getDataSources")})},getPairsToDelete:function(){var e=this;this.loadingPairs=!0,g.a.get("/getPairForDatasource/"+this.server._id).then(function(t){e.loadingPairs=!1,e.pairs=t.data}).catch(function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)})},share:function(e,t){var a=this;if("showDialog"===t)this.limitLocationId="",this.limitLocationName="No limit",this.sharedUsers=[],this.shareSource=e,this.getLocationTree(),e.hasOwnProperty("shared")&&e.shared.users.length>0&&e.shared.users.forEach(function(e){a.sharedUsers.push(e._id)}),this.shareDialog=!0;else if("saveShare"===t){if(0===this.sharedUsers.length)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select atleast one user");var r=new FormData;r.append("shareSource",this.shareSource._id),r.append("users",s()(this.sharedUsers)),r.append("userID",this.$store.state.auth.userID),r.append("role",this.$store.state.auth.role),r.append("orgId",this.$store.state.dhis.user.orgId),r.append("limitLocationId",this.limitLocationId),this.$store.state.loadingServers=!0,this.shareDialog=!1,g.a.post("/shareDataSource",r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a.$store.state.loadingServers=!1,a.$store.state.dataSources=e.data}).catch(function(e){console.log(e),a.$store.state.loadingServers=!1})}},locationSelected:function(e){this.limitLocationId=e.id,"parent"!==e.id?this.limitLocationName=e.data.text:(this.limitLocationName="No limit",this.limitLocationId="")},getLocationTree:function(){var e=this,t=this.shareSource.userID._id;this.loadingLocationTree=!0;var a=this.toTitleCase(this.shareSource.name);g.a.get("/getTree/"+a+"/"+t).then(function(t){t.data&&(e.locationTree=[{text:"Select location to limit sharing",id:"parent",children:t.data}]),e.loadingLocationTree=!1})},getUsers:function(){var e=this;g.a.get("/getUsers").then(function(t){e.users=t.data})},exportCSV:function(){var e=this;if(!this.server.name)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source");var t=this.server.userID._id;g.a.get("/getUploadedCSV/"+t+"/"+this.server.name).then(function(t){var a=new Blob([t.data]);if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(a,e.server.name+".csv");else{var r=window.document.createElement("a");r.href=window.URL.createObjectURL(a,{type:"text/plain"}),r.download=e.server.name+".csv",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}).catch(function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data})},sync:function(e){return this.server.name?this.server.userID._id!==this.$store.state.auth.userID?(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Only data source owner can run the sync")):void("upload"!==this.server.source&&(this.mode=e,"DHIS2"===this.server.sourceType?this.syncType="dhisSync":"FHIR"===this.server.sourceType&&(this.syncType="fhirSync"),setTimeout(function(){Gt.$emit("runRemoteSync")},100))):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source"))}},computed:{remoteServers:function(){var e=[],t=!0,a=!1,r=void 0;try{for(var s,o=c()(this.$store.state.dataSources);!(t=(s=o.next()).done);t=!0){var i=s.value;"syncServer"===i.source&&e.push(i)}}catch(e){a=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw r}}return e},uploadedSources:function(){var e=[],t=!0,a=!1,r=void 0;try{for(var s,o=c()(this.$store.state.dataSources);!(t=(s=o.next()).done);t=!0){var i=s.value;"upload"===i.source&&e.push(i)}}catch(e){a=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw r}}return e}},components:{FacilityReconUpload:Pe,FacilityReconRemoteSources:Ie,appRemoteSync:L,"liquor-tree":re.a},created:function(){var e=this;this.getUsers(),Gt.$on("dataSourceSaved",function(){e.addDataSource=!1,e.dataSource=""}),Gt.$on("dataSourceAddedSuccessfully",function(){e.alertSuccess=!0,e.alertMsg="Data Source Added Successfully",setTimeout(function(){e.alertSuccess=!1},3e3)}),Gt.$on("remoteServerFailedAdd",function(){e.alertError=!0,e.alertMsg="Data Source Failed To Be Added"})}},Ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{width:"630px"},model:{value:e.deleteConfirm,callback:function(t){e.deleteConfirm=t},expression:"deleteConfirm"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v("\n          This will delete the datasource "+e._s(e.server.name)+" from the database\n        ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.deleteConfirm=!1}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[e.loadingPairs||e.pairs.length>0?a("label",[e._v("\n          Below data source pairs (mapping) will also be deleted\n          "),a("v-data-table",{attrs:{headers:e.pairsHeaders,items:e.pairs,"hide-actions":"",loading:e.loadingPairs},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name)+" - "+e._s(t.item.source2Name))]),e._v(" "),a("td",[e._v(e._s(t.item.owner))])]}}],null,!1,1184637600)})],1):a("label",[e._v("\n          There is no any data source pair (mapping) associated with this data source"),a("br")]),e._v(" "),a("br"),e._v(" "),a("b",[e._v("Do you want to proceed and delete?")])]),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.deleteConfirm=!1}}},[e._v("Cancel")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"success"},on:{click:e.deleteDataSource}},[e._v("Yes")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n          Editing "+e._s(e.server.host)+"\n        ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Name",disabled:""},model:{value:e.server.name,callback:function(t){e.$set(e.server,"name",t)},expression:"server.name"}})],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Host"},model:{value:e.server.host,callback:function(t){e.$set(e.server,"host",t)},expression:"server.host"}})],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-select",{attrs:{items:e.$store.state.remoteDataSources,label:"Source Type"},model:{value:e.server.sourceType,callback:function(t){e.$set(e.server,"sourceType",t)},expression:"server.sourceType"}})],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"User Name"},model:{value:e.server.username,callback:function(t){e.$set(e.server,"username",t)},expression:"server.username"}})],1),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Password",type:"password"},model:{value:e.server.password,callback:function(t){e.$set(e.server,"password",t)},expression:"server.password"}})],1)],1)],1),e._v(" "),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("cancel")]),e._v("Cancel\n        ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.saveEdit("match")}}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Save\n        ")],1)],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.shareDialog,callback:function(t){e.shareDialog=t},expression:"shareDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n          Sharing "+e._s(e.shareSource.name)+"\n        ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.shareDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[e.loadingLocationTree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("p",[a("liquor-tree",{ref:"locationTree",attrs:{data:e.locationTree,options:{}},on:{"node:selected":e.locationSelected}})],1)])],e._v(" "),a("v-icon",{attrs:{small:""}},[e._v("lock")]),e._v(" Limiting Sharing to: "),a("b",[e._v(e._s(e.limitLocationName))]),e._v(" "),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}}),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers,"item-key":"firstName"},scopedSlots:e._u([{key:"items",fn:function(t){return[t.item.userName!==e.$store.state.auth.username?a("tr",[a("td",[a("v-checkbox",{attrs:{value:t.item._id},model:{value:e.sharedUsers,callback:function(t){e.sharedUsers=t},expression:"sharedUsers"}})],1),e._v(" "),a("td",[e._v(e._s(t.item.userName))]),e._v(" "),a("td",[e._v(e._s(t.item.firstName))]),e._v(" "),a("td",[e._v(e._s(t.item.surname))])]):e._e()]}}])})],2),e._v(" "),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error",disabled:e.loadingLocationTree},nativeOn:{click:function(t){e.shareDialog=!1}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("cancel")]),e._v("Cancel\n        ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",disabled:e.loadingLocationTree},nativeOn:{click:function(t){return e.share("","saveShare")}}},[a("v-icon",{attrs:{left:""}},[e._v("share")]),e._v("Share\n        ")],1)],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("info")]),e._v(" About this page\n        ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[e._v("\n        This page let you visualize various data sets you have added into the app as well as synchronize remote servers with the app\n        "),a("v-list",[e._v("1. Use Force Full Sync to fetch all data from the remote server and update the app")]),e._v(" "),a("v-list",[e._v("2. Use Sync (Update) to pull updated records from the remote server and update the app")]),e._v(" "),a("v-list",[e._v("3. You may proceed to the 'Data Source Pair' page after you have added atleast two data sources")]),e._v(" "),a("v-list",[e._v("4. You may come back to this page and add more sources at any time")])],1)],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"primary"},on:{click:function(t){e.helpDialog=!0}},slot:"activator"},[a("v-icon",[e._v("help")])],1),e._v(" "),a("span",[e._v("Help")])],1)],1)],1),e._v(" "),a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),e._v(" "),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")])],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),e._v(" "),a("v-flex",[a("v-card",{attrs:{color:"cyan lighten-5"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v("\n            Remote Sources\n          ")]),e._v(" "),a("v-spacer")],1),e._v(" "),a("v-card-actions",[e.remoteServers.length>0?a("v-btn",{attrs:{color:"primary",round:""},on:{click:function(t){return e.sync("full")}}},[a("v-icon",{attrs:{left:""}},[e._v("sync")]),e._v("Force Full Sync\n          ")],1):a("v-btn",{attrs:{color:"primary",round:"",disabled:""},on:{click:function(t){return e.sync("full")}}},[a("v-icon",{attrs:{left:""}},[e._v("sync")]),e._v("Force Full Sync\n          ")],1),e._v(" "),e.remoteServers.length>0?a("v-btn",{attrs:{color:"primary lighten-1",round:""},on:{click:function(t){return e.sync("update")}}},[a("v-icon",{attrs:{left:""}},[e._v("sync")]),e._v("Sync (Update)\n          ")],1):a("v-btn",{attrs:{color:"primary lighten-1",round:"",disabled:""},on:{click:function(t){return e.sync("update")}}},[a("v-icon",{attrs:{left:""}},[e._v("sync")]),e._v("Sync (Update)\n          ")],1),e._v(" "),a("v-spacer"),e._v(" "),e.remoteServers.length>0?a("v-btn",{attrs:{color:"success",round:""},on:{click:e.editDataSource}},[a("v-icon",{attrs:{left:""}},[e._v("edit")]),e._v("Edit\n          ")],1):a("v-btn",{attrs:{color:"success",round:"",disabled:""},on:{click:e.editDataSource}},[a("v-icon",{attrs:{left:""}},[e._v("edit")]),e._v("Edit\n          ")],1),e._v(" "),e.remoteServers.length>0?a("v-btn",{attrs:{color:"error",round:""},on:{click:e.validateDelete}},[a("v-icon",{attrs:{left:""}},[e._v("delete")]),e._v("Delete\n          ")],1):a("v-btn",{attrs:{color:"error",round:"",disabled:""},on:{click:e.validateDelete}},[a("v-icon",{attrs:{left:""}},[e._v("delete")]),e._v("Delete\n          ")],1)],1),e._v(" "),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.syncServersHeader,items:e.remoteServers,dark:"",loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"items",fn:function(t){return[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.server,callback:function(t){e.server=t},expression:"server"}},[a("td",[a("v-radio",{attrs:{value:t.item,color:"blue"}})],1)]),e._v(" "),a("td",[e._v(e._s(t.item.name))]),e._v(" "),a("td",[e._v(e._s(t.item.host))]),e._v(" "),a("td",[e._v(e._s(t.item.sourceType))]),e._v(" "),a("td",[e._v(e._s(t.item.username))]),e._v(" "),t.item.username?a("td",[e._v("*****")]):a("td"),e._v(" "),a("td",[e._v(e._s(t.item.lastUpdate))]),e._v(" "),a("td",[e._v(e._s(t.item.userID.userName))]),e._v(" "),a("td",[e._v("\n                "+e._s(e._f("mergeUsers")(t.item.shared.users))+"\n              ")]),e._v(" "),a("td",[e._v("\n                "+e._s(t.item.createdTime)+"\n              ")]),e._v(" "),t.item.userID._id===e.$store.state.auth.userID?a("td",[a("v-btn",{attrs:{color:"success",flat:""},on:{click:function(a){return e.share(t.item,"showDialog")}}},[a("v-icon",[e._v("share")]),e._v(" Share\n                ")],1)],1):e._e()]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),e._v(" "),a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v("\n            Uploaded Sources\n          ")])],1),e._v(" "),a("v-card-actions",[a("v-tooltip",{attrs:{top:""}},[e.uploadedSources.length>0?a("v-btn",{attrs:{slot:"activator",color:"success",round:""},on:{click:e.exportCSV},slot:"activator"},[a("v-icon",{attrs:{left:""}},[e._v("file_copy")]),e._v("Export\n            ")],1):a("v-btn",{attrs:{slot:"activator",color:"success",round:"",disabled:""},on:{click:e.exportCSV},slot:"activator"},[a("v-icon",{attrs:{left:""}},[e._v("file_copy")]),e._v("Export\n            ")],1),e._v(" "),a("span",[e._v("Export Original CSV")])],1),e._v(" "),a("v-spacer"),e._v(" "),e.uploadedSources.length>0?a("v-btn",{attrs:{color:"error",round:""},on:{click:e.validateDelete}},[a("v-icon",{attrs:{left:""}},[e._v("delete")]),e._v("Delete\n          ")],1):a("v-btn",{attrs:{color:"error",round:"",disabled:""},on:{click:e.validateDelete}},[a("v-icon",{attrs:{left:""}},[e._v("delete")]),e._v("Delete\n          ")],1)],1),e._v(" "),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.uploadSourcesHeader,items:e.uploadedSources,dark:"",loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"items",fn:function(t){return[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.server,callback:function(t){e.server=t},expression:"server"}},[a("td",[a("v-radio",{attrs:{value:t.item,color:"blue"}})],1)]),e._v(" "),a("td",[e._v(e._s(t.item.name))]),e._v(" "),a("td",[e._v(e._s(t.item.userID.userName))]),e._v(" "),a("td",[e._v("\n                "+e._s(e._f("mergeUsers")(t.item.shared.users))+"\n              ")]),e._v(" "),a("td",[e._v("\n                "+e._s(t.item.createdTime)+"\n              ")]),e._v(" "),t.item.userID._id===e.$store.state.auth.userID?a("td",[a("v-btn",{attrs:{color:"success",flat:""},on:{click:function(a){return e.share(t.item,"showDialog")}}},[a("v-icon",[e._v("share")]),e._v(" Share\n                ")],1)],1):e._e()]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)],1),e._v(" "),a("v-spacer")],1),e._v(" "),e.server.name?a("appRemoteSync",{attrs:{syncType:e.syncType,serverName:e.server.name,userID:e.$store.state.auth.userID,sourceOwner:e.server.userID._id,mode:e.mode}}):e._e()],1)},staticRenderFns:[]},Ee=a("VU/8")(Le,Ue,!1,null,null,null).exports,Ne={methods:{createDatasourcePair:function(e,t){var a=this;if(0===p()(e).length||0===p()(t).length)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source");if(e.name===t.name&&e.source===t.source)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Data source pair of the same data source is not allowed, change one of the source");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Creating Data Source Pair";var r=null;this.$store.state.activePair.hasOwnProperty("shared")&&this.$store.state.activePair.shared.hasOwnProperty("activeUsers")&&-1!==this.$store.state.activePair.shared.activeUsers.indexOf(this.$store.state.auth.userID)&&(r=this.$store.state.activePair._id);var o=!1;this.$store.state.dhis.user.orgId&&this.$store.state.config.generalConfig.reconciliation.singlePair&&(o=!0),r||(r=!1);var i=new FormData;i.append("source1",s()(e)),i.append("source2",s()(t)),i.append("userID",this.$store.state.auth.userID),i.append("orgId",this.$store.state.dhis.user.orgId),i.append("singlePair",o),i.append("activePairID",r),g.a.post("/addDataSourcePair",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a.$store.state.levelMapping.source1=JSON.parse(e.data).levelMapping1,a.$store.state.levelMapping.source2=JSON.parse(e.data).levelMapping2,Gt.$emit("getDataSourcePair"),a.$store.state.dynamicProgress=!1}).catch(function(e){a.alertError=!0,a.$store.state.dialogError=!0,e.response.data.error?(a.$store.state.errorDescription=e.response.data.error,a.$store.state.errorTitle="Pair was not created",a.alertMsg=e.response.data.error):a.alertMsg="Something went wrong while saving data source pairs.",a.$store.state.dynamicProgress=!1,console.log(e)})},activateSharedPair:function(e){var t=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Activating Shared Data Source Pair";var a=new FormData;a.append("pairID",e),a.append("userID",this.$store.state.auth.userID),g.a.post("/activateSharedPair",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){Gt.$emit("getDataSourcePair"),t.$store.state.dynamicProgress=!1}).catch(function(e){t.alertError=!0,t.alertMsg="Something went wrong while activating data source pair",t.$store.state.dynamicProgress=!1,console.log(e.response.data)})},activatePair:function(){var e=this;this.activeDataSourcePair.userID._id!==this.$store.state.auth.userID?this.activateSharedPair(this.activeDataSourcePair._id):(this.source1=this.$store.state.dataSources.find(function(t){return t._id===e.activeDataSourcePair.source1._id}),this.source2=this.$store.state.dataSources.find(function(t){return t._id===e.activeDataSourcePair.source2._id}),this.createDatasourcePair(this.source1,this.source2))}}},qe={mixins:[U,Ne],data:function(){return{confirmPairDeleteDialog:!1,helpDialog:!1,alertSuccess:!1,alertError:!1,alertMsg:"",pairLimitWarn:!1,shareDialog:!1,mapSourcePairLevels:!1,pairLevelsMapping:{},sharePair:{},source1:{},source2:{},searchPairs:"",searchSources:"",searchUsers:"",users:[],sharedUsers:[],activeDataSourcePair:{},pairLevelsMappingHeader:[{text:"Source 1 Levels",value:"headerSource1Levels",sortable:!1},{text:"Source 2 Levels",value:"headerSource1Levels",sortable:!1}],source1Headers:[{sortable:!1},{text:"Source 1",value:"headerSource1",sortable:!1}],source2Headers:[{sortable:!1},{text:"Source 2",value:"headerSource2",sortable:!1}],sourcePairHeaders:[{text:"Pair",value:"pair"},{text:"Owner",value:"owner",sortable:!1},{text:"Active",value:"active"},{text:"Shared To",value:"shareStatus"}],usersHeader:[{text:"Username",value:"username",sortable:!0},{text:"Firstname",value:"fname",sortable:!0},{text:"Surname",value:"sname",sortable:!0}],source1Levels:[],source2Levels:[]}},filters:{mergeUsers:function(e){if(!e||0===e.length)return"";var t="",a=!0,r=!1,s=void 0;try{for(var o,i=c()(e);!(a=(o=i.next()).done);a=!0){var n=o.value;t=t?","+n.userName:n.userName}}catch(e){r=!0,s=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw s}}return t}},methods:{confirmDeletePair:function(){this.confirmPairDeleteDialog=!0},deletePair:function(){var e=this;this.confirmPairDeleteDialog=!1;var t="pairId="+this.activeDataSourcePair._id+"&userID="+this.activeDataSourcePair.owner.id+"&source1Name="+this.activeDataSourcePair.source1.name+"&source2Name="+this.activeDataSourcePair.source2.name;g.a.delete("/deleteSourcePair?"+t).then(function(t){e.$store.state.errorTitle="Pair Deletion",e.$store.state.errorDescription="Pair deleted successfully",e.$store.state.dialogError=!0,setTimeout(function(){Gt.$emit("getDataSourcePair")},500)}).catch(function(t){e.$store.state.errorTitle="Pair Deletion",e.$store.state.errorDescription="An error occured while deleting pair, please retry",e.$store.state.errorColor="error",e.$store.state.dialogError=!0,console.log(s()(t))})},reset:function(){var e=this;this.source1={},this.source2={},this.activeDataSourcePair={},this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Reseting Data Source Pairs";var t=this.$store.state.auth.userID;g.a.get("/resetDataSourcePair/"+t).then(function(t){Gt.$emit("getDataSourcePair"),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.alertMsg="Data Source Pair Reseted Successfully"}).catch(function(t){e.alertError=!0,e.alertMsg="Something went wrong while reseting data source pairs",console.log(t)})},checkLevels:function(){var e=this;this.pairLevelsMapping={};var t=this.source1.name,a=this.source2.name;t=this.toTitleCase(t),a=this.toTitleCase(a);var r=s()({source1LimitOrgId:this.getLimitOrgIdOnDataSource(this.source1),source2LimitOrgId:this.getLimitOrgIdOnDataSource(this.source2)}),o=s()({source1Owner:this.source1.userID._id,source2Owner:this.source2.userID._id});g.a.get("/countLevels/"+t+"/"+a+"/"+o+"/"+r).then(function(t){return 1===t.data.totalSource1Levels?(e.$store.state.errorTitle="No data for you",e.$store.state.errorDescription="Cant create this pair, "+e.source1.name+" has no data for you",void(e.$store.state.dialogError=!0)):1===t.data.totalSource2Levels?(e.$store.state.errorTitle="No data for you",e.$store.state.errorDescription="Cant create this pair, "+e.source2.name+" has no data for you",void(e.$store.state.dialogError=!0)):void(t.data.totalSource1Levels>t.data.totalSource2Levels?(e.$store.state.errorTitle="Levels mismatch",e.$store.state.errorDescription="Make sure source1 has the same or less levels as source2",e.$store.state.dialogError=!0):e.createDatasourcePair(e.source1,e.source2))})},mappingSelected:function(e){var t=this;this.source2Levels=this.source2Levels.filter(function(a){return a.value!==t.pairLevelsMapping[e]})},clearMappingSelection:function(e){this.source2Levels.push({text:this.$store.state.levelMapping.source2[this.pairLevelsMapping[e]],value:this.pairLevelsMapping[e]});var t=p()(this.pairLevelsMapping).filter(function(t){return t!==e}),a={},r=!0,s=!1,o=void 0;try{for(var i,n=c()(t);!(r=(i=n.next()).done);r=!0){var l=i.value;a[l]=this.pairLevelsMapping[l]}}catch(e){s=!0,o=e}finally{try{!r&&n.return&&n.return()}finally{if(s)throw o}}this.pairLevelsMapping=a},closeLevelMappingDialog:function(){for(var e in this.pairLevelsMapping)this.source2Levels.push({text:this.$store.state.levelMapping.source2[this.pairLevelsMapping[e]],value:this.pairLevelsMapping[e]});this.mapSourcePairLevels=!1},share:function(e,t){var a=this;if("showDialog"===t)this.sharedUsers=[],this.sharePair=e,e.hasOwnProperty("shared")&&e.shared.users.length>0&&e.shared.users.forEach(function(e){a.sharedUsers.push(e._id)}),this.shareDialog=!0;else if("saveShare"===t){if(0===this.sharedUsers.length)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select atleast one user");var r=new FormData;r.append("sharePair",this.sharePair._id),r.append("users",s()(this.sharedUsers)),r.append("userID",this.$store.state.auth.userID),r.append("orgId",this.$store.state.dhis.user.orgId),this.$store.state.loadingServers=!0,this.shareDialog=!1,g.a.post("/shareSourcePair",r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a.$store.state.loadingServers=!1,a.$store.state.dataSourcePairs=e.data}).catch(function(e){console.log(e),a.$store.state.loadingServers=!1})}},getUsers:function(){var e=this;g.a.get("/getUsers").then(function(t){e.users=t.data})}},computed:{dataSources2:function(){if(this.$store.state.config.generalConfig.reconciliation.fixSource2){var e="",t=!0,a=!1,r=void 0;try{for(var s,o=c()(this.$store.state.dataSources);!(t=(s=o.next()).done);t=!0){var i=s.value;i._id===this.$store.state.config.generalConfig.reconciliation.fixSource2To&&(e=i)}}catch(e){a=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw r}}return[e]}return this.$store.state.dataSources},canCreatePair:function(){return!this.$store.state.dhis.user.orgId||!this.$store.state.config.generalConfig.reconciliation.singlePair||0===this.$store.state.dataSourcePairs.length},canDeletePair:function(){return"{}"!==s()(this.activeDataSourcePair)&&this.activeDataSourcePair.owner.id===this.$store.state.auth.userID}},created:function(){var e=this;for(var t in this.canCreatePair||(this.pairLimitWarn=!0),this.getUsers(),this.source1=this.$store.state.dataSources.find(function(t){return t._id===e.$store.state.activePair.source1.id}),this.source2=this.$store.state.dataSources.find(function(t){return t._id===e.$store.state.activePair.source2.id}),this.activeDataSourcePair=this.getActiveDataSourcePair(),this.source1||(this.source1={}),this.source2||(this.source2={}),this.$store.state.levelMapping.source2)"code"!==t&&this.source2Levels.push({text:this.$store.state.levelMapping.source2[t],value:t});for(var a in this.$store.state.levelMapping.source1)"code"!==a&&this.source1Levels.push({text:this.$store.state.levelMapping.source1[a],value:a})}},Oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("center",[a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.confirmPairDeleteDialog,callback:function(t){e.confirmPairDeleteDialog=t},expression:"confirmPairDeleteDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v("\n            Confirm deleting\n          ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.confirmPairDeleteDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[e._v("\n          Are you sure you want to delete this data source pair\n        ")]),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.confirmPairDeleteDialog=!1}}},[e._v("Cancel")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){return e.deletePair(t)}}},[e._v("Ok")])],1)],1)],1),e._v(" "),a("v-alert",{staticStyle:{width:"1000px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n      "+e._s(e.alertMsg)+"\n    ")]),e._v(" "),a("v-alert",{staticStyle:{width:"1000px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v("\n      "+e._s(e.alertMsg)+"\n    ")]),e._v(" "),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"770px",transition:"dialog-transition"},model:{value:e.pairLimitWarn,callback:function(t){e.pairLimitWarn=t},expression:"pairLimitWarn"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("info")]),e._v(" Pair creation limit\n          ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.pairLimitWarn=!1}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[e._v("\n          You cant create more pairs as this account is limited to one pair only at a time.\n        ")]),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.pairLimitWarn=!1}}},[e._v("Ok")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"770px",transition:"dialog-transition"},model:{value:e.mapSourcePairLevels,callback:function(t){e.mapSourcePairLevels=t},expression:"mapSourcePairLevels"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("info")]),e._v(" Data sources has different level counts, please map Levels to proceed\n          ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeLevelMappingDialog(t)}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[a("v-data-table",{attrs:{headers:e.pairLevelsMappingHeader,items:e.source1Levels},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(t.item.text))]),e._v(" "),a("td",[e.pairLevelsMapping[t.item.value]?[e._v("\n                    "+e._s(e.$store.state.levelMapping.source2[e.pairLevelsMapping[t.item.value]])+"\n                    "),a("v-icon",{attrs:{small:""},on:{click:function(a){return e.clearMappingSelection(t.item.value)}}},[e._v("close")])]:a("v-select",{attrs:{items:e.source2Levels,clearable:""},on:{change:function(a){return e.mappingSelected(t.item.value)}},model:{value:e.pairLevelsMapping[t.item.value],callback:function(a){e.$set(e.pairLevelsMapping,t.item.value,a)},expression:"pairLevelsMapping[props.item.value]"}})],2)])]}}])})],1),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"error",round:""},on:{click:e.closeLevelMappingDialog}},[a("v-icon",{attrs:{left:""}},[e._v("cancel")]),e._v(" Cancel\n          ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",round:""}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Save Mapping\n          ")],1)],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("info")]),e._v(" About this page\n          ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[e._v("\n          This page let you choose a pair of data sources to use for reconciliation\n          "),a("v-list",[e._v("1. Source 1 is the source while source 2 is the target")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.shareDialog,callback:function(t){e.shareDialog=t},expression:"shareDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n            Sharing "),e.sharePair.hasOwnProperty("source1")?[e._v(e._s(e.sharePair.source1.name)+" - "+e._s(e.sharePair.source2.name))]:e._e()],2),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.shareDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}}),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers},scopedSlots:e._u([{key:"items",fn:function(t){return[t.item.userName!==e.$store.state.auth.username?a("tr",[a("td",[a("v-checkbox",{attrs:{value:t.item._id},model:{value:e.sharedUsers,callback:function(t){e.sharedUsers=t},expression:"sharedUsers"}})],1),a("td",[e._v(e._s(t.item.userName))]),e._v(" "),a("td",[e._v(e._s(t.item.firstName))]),e._v(" "),a("td",[e._v(e._s(t.item.surname))])]):e._e()]}}])})],1),e._v(" "),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error"},nativeOn:{click:function(t){e.shareDialog=!1}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("cancel")]),e._v("Cancel\n          ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.share("","saveShare")}}},[a("v-icon",{attrs:{left:""}},[e._v("share")]),e._v("Share\n          ")],1)],1)],1)],1),e._v(" "),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs11:""}},[e._v("\n        Create/Choose a pair of data sources to use for reconciliation. Source 1 is the source while source 2 is the target\n      ")]),e._v(" "),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"primary"},on:{click:function(t){e.helpDialog=!0}},slot:"activator"},[a("v-icon",[e._v("help")])],1),e._v(" "),a("span",[e._v("Help")])],1)],1)],1),e._v(" "),a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-card",{staticStyle:{width:"1000px"},attrs:{color:"cyan lighten-5"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white lighten-2"}},[e._v("\n              Choose Data Source Pair\n            ")])],1),e._v(" "),a("v-card-text",{staticStyle:{float:"center"}},[a("v-layout",{staticStyle:{float:"center"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-data-table",{attrs:{headers:e.source1Headers,items:e.$store.state.dataSources,loading:e.$store.state.loadingServers,dark:""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.source1,callback:function(t){e.source1=t},expression:"source1"}},[a("td",[a("v-radio",{attrs:{value:t.item,color:"blue"}})],1)]),e._v(" "),a("td",[e._v(e._s(t.item.name))])]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),e._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-data-table",{attrs:{headers:e.source2Headers,items:e.dataSources2,"item-key":"id",loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"items",fn:function(t){return[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.source2,callback:function(t){e.source2=t},expression:"source2"}},[a("td",[a("v-radio",{attrs:{value:t.item,color:"blue"}})],1)]),e._v(" "),a("td",[e._v(e._s(t.item.name))])]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"error",round:""},on:{click:e.reset}},[a("v-icon",{attrs:{left:""}},[e._v("refresh")]),e._v(" Reset\n            ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{disabled:!e.canCreatePair,color:"primary",round:""},on:{click:e.checkLevels}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v(" Save\n            ")],1)],1)],1)],1),e._v(" "),a("v-flex",[a("v-card",{staticStyle:{width:"1000px"},attrs:{color:"cyan lighten-4"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white lighten-2"}},[e._v("\n              Existing Data Source Pairs\n              "),a("v-spacer"),e._v(" "),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchPairs,callback:function(t){e.searchPairs=t},expression:"searchPairs"}})],1)],1),e._v(" "),a("v-card-text",{staticStyle:{float:"center"}},[a("v-data-table",{attrs:{headers:e.sourcePairHeaders,items:e.$store.state.dataSourcePairs,search:e.searchPairs,loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1.name)+" - "+e._s(t.item.source2.name))]),e._v(" "),a("td",[e._v(e._s(t.item.userID.userName))]),e._v(" "),a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.activeDataSourcePair,callback:function(t){e.activeDataSourcePair=t},expression:"activeDataSourcePair"}},[a("td",[a("v-radio",{attrs:{value:t.item,color:"blue"}})],1)]),e._v(" "),a("td",[e._v("\n                  "+e._s(e._f("mergeUsers")(t.item.shared.users))+"\n                ")]),e._v(" "),t.item.userID._id===e.$store.state.auth.userID?a("td",[a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(a){return e.share(t.item,"showDialog")}}},[a("v-icon",[e._v("share")]),e._v("Share\n                  ")],1)],1):e._e()]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{disabled:!e.canDeletePair,color:"error",round:""},on:{click:e.confirmDeletePair}},[a("v-icon",{attrs:{left:""}},[e._v("delete")]),e._v("Delete Pair\n            ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",round:""},on:{click:e.activatePair}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Activate Pair\n            ")],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},He=a("VU/8")(qe,Oe,!1,null,null,null).exports,je={mixins:[U],methods:{getDHIS2UserData:function(e){var t=this,a=this.$store.state.dhis.dev.auth;""===a.username&&(a=""),g.a.get(this.$store.state.dhis.host+"api/me",{auth:a}).then(function(r){var s=r.data.organisationUnits;s.length>0&&(t.$store.state.dhis.user.orgId=s.shift().id,g.a.get(t.$store.state.dhis.host+"api/organisationUnits/"+t.$store.state.dhis.user.orgId,{auth:a}).then(function(a){return t.$store.state.dhis.user.orgName=a.data.displayName,e(r)}))}).catch(function(e){t.$store.state.dialogError=!0,t.$store.state.errorTitle="Error",e.response&&e.response.data&&401===e.response.data.httpStatusCode?(t.$store.state.errorDescription="Unauthorized, ensure that your DHIS2 login is active",t.$router.push({name:"Logout"})):t.$store.state.errorDescription="Unauthorized, please reload the app"})}},created:function(){var e=this;this.setDHIS2Credentials(),this.getRoles(),this.getDHIS2UserData(function(t){var a=void 0,r=void 0;if(t.data.userCredentials.userRoles.find(function(t){return t.id===e.$store.state.config.generalConfig.externalAuth.adminRole})){var s=e.roles.find(function(e){return"Admin"===e.text});a=s.value,r=s.text}else{var o=e.roles.find(function(e){return"Data Manager"===e.text});a=o.value,r=o.text}g.a.get("/getUser/"+t.data.userCredentials.username).then(function(s){if(s.data.userID)e.$store.state.auth.username=t.data.userCredentials.username,e.$store.state.auth.userID=s.data.userID,e.$store.state.auth.role=r,e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,Gt.$emit("getConfig");else{var o=new FormData;o.append("firstName",t.data.firstName),o.append("otherName",""),o.append("password",t.data.surname),o.append("userName",t.data.userCredentials.username),o.append("surname",t.data.surname),o.append("role",a),g.a.post("/addUser",o,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){g.a.get("/getUser/"+t.data.userCredentials.username).then(function(a){a.data.userID&&(e.$store.state.auth.username=t.data.userCredentials.username,e.$store.state.auth.userID=a.data.userID,e.$store.state.auth.role=a.data.role,e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,Gt.$emit("getConfig"))})})}})})}},Ve={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},Be=a("VU/8")(je,Ve,!1,null,null,null).exports,We={validations:{name:{required:x.required}},data:function(){return{loadingTree:!1,alertFail:!1,alertSuccess:!1,alertMsg:"",searchJurisdiction:"",activeJurisdiction:{},jurisdictionHierarchy:[],name:"",code:""}},methods:{getTree:function(){var e=this;this.jurisdictionHierarchy=[],this.loadingTree=!0,g.a.get("/FR/getTree").then(function(t){e.loadingTree=!1,t.data&&(e.jurisdictionHierarchy=t.data)})},selectedJurisdiction:function(e){this.activeJurisdiction=e},addLocation:function(){var e=this,t=new FormData;t.append("name",this.name),t.append("code",this.code),this.activeJurisdiction.id&&t.append("parent",this.activeJurisdiction.id),g.a.post("/FR/addJurisdiction",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.alertSuccess=!0,e.alertMsg="Jurisdiction added successfully!",e.$refs.form.reset(),e.getTree()}).catch(function(t){e.alertFail=!0,e.alertMsg="Failed to add Jurisdiction!",console.log(t)})}},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Name is required"),e):e},codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e}},created:function(){this.getTree()},components:{"liquor-tree":re.a}},Ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[[a("v-card",[a("v-card-title",{staticClass:"indigo white--text headline"},[e._v("\n        Jurisdiction Hierarchy\n      ")]),e._v(" "),a("v-layout",{attrs:{"justify-space-between":"","pa-4":""}},[a("v-flex",{attrs:{xs5:""}},[e.loadingTree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:e._e(),e._v(" "),e.jurisdictionHierarchy.length>0?a("v-text-field",{attrs:{"append-icon":"search",label:"Search Jurisdiction","single-line":"","hide-details":""},model:{value:e.searchJurisdiction,callback:function(t){e.searchJurisdiction=t},expression:"searchJurisdiction"}}):e._e(),e._v(" "),e.jurisdictionHierarchy.length>0?a("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,filter:e.searchJurisdiction},on:{"node:selected":e.selectedJurisdiction}}):e._e()],2),e._v(" "),a("v-divider",{attrs:{vertical:""}}),e._v(" "),a("v-flex",{attrs:{"d-flex":"","text-center":""}},[a("v-scroll-y-transition",{attrs:{mode:"out-in"}},[a("v-card",{staticClass:"pt-4 mx-auto",attrs:{flat:"","max-width":"500"}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n                "+e._s(e.alertMsg)+"\n              ")]),e._v(" "),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n                "+e._s(e.alertMsg)+"\n              ")]),e._v(" "),a("v-card-title",{attrs:{"primary-title":""}},[e.activeJurisdiction.id?[a("b",[e._v("Adding New Jurisdiction Under "+e._s(e.activeJurisdiction.text))])]:[a("b",[e._v("Adding New Jurisdiction On Top Level")])]],2),e._v(" "),a("v-card-text",[a("v-card",[a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,box:"",color:"deep-purple",label:"Name"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:"Code"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(t){return e.$refs.form.reset()}}},[a("v-icon",[e._v("clear")]),e._v("Clear\n                    ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addLocation()}}},[a("v-icon",{attrs:{left:""}},[e._v("language")]),e._v("Add\n                    ")],1)],1)],1)],1)],1)],1)],1)],1)],1)]],2)},staticRenderFns:[]},ze=a("VU/8")(We,Ge,!1,null,null,null).exports,Je={validations:{name:{required:x.required}},props:["action","requestType"],data:function(){return{loadingTree:!1,searchJurisdiction:"",activeJurisdiction:{},jurisdictionHierarchy:[],name:"",alt_name:"",code:"",description:"",facilityType:"",types:[{text:"Clinic",value:"CLNC"},{text:"Dispensary",value:"DSPN"},{text:"Health Center",value:"HCNT"},{text:"Health Post",value:"HPST"},{text:"Hospital",value:"HOSP"}],ownerships:[{text:"Concesion",value:"CNCS"},{text:"Public",value:"PBLC"},{text:"Private",value:"PRVT"},{text:"Private Faith Based",value:"PFBO"},{text:"Private Not Profit",value:"PNPR"}],facilityOwnership:"",status:[{text:"Functional",value:"active"},{text:"Not Functional",value:"inactive"},{text:"Suspended",value:"suspended"}],facilityStatus:"",lat:"",long:"",contact:{email:"",phone:"",fax:"",website:""}}},methods:{getTree:function(){var e=this;this.loadingTree=!0,this.jurisdictionHierarchy=[],g.a.get("/FR/getTree").then(function(t){e.loadingTree=!1,t.data&&(e.jurisdictionHierarchy=t.data)})},selectedJurisdiction:function(e){this.activeJurisdiction=e},addLocation:function(){var e=this,t=new FormData;t.append("name",this.name),t.append("alt_name",this.alt_name),t.append("code",this.code),t.append("action",this.action),t.append("requestType",this.requestType),t.append("username",this.$store.state.auth.username),this.facilityType&&t.append("type",this.facilityType),this.facilityStatus&&t.append("status",this.facilityStatus),this.facilityOwnership&&t.append("ownership",this.facilityOwnership),this.lat&&t.append("lat",this.lat),this.long&&t.append("long",this.long),t.append("contact",s()(this.contact)),this.description&&t.append("description",this.description),t.append("parent",this.activeJurisdiction.id),g.a.post("/FR/addBuilding",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="600px",e.$store.state.alert.msg="Facility added successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1}).catch(function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="600px",e.$store.state.alert.msg="Failed to add Facility!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t)})}},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Name is required"),e):e}},created:function(){this.getTree()},components:{"liquor-tree":re.a}},Ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[[a("v-card",[a("v-card-title",{staticClass:"indigo white--text headline"},["request"===e.action?[e._v("\n          Fill Details Below About A New Facility And Submit For Approval\n        ")]:e._e(),e._v(" "),"add"===e.action?[e._v("\n          Fill Details Below To Add A New Facility\n        ")]:e._e()],2),e._v(" "),a("v-layout",{attrs:{"justify-space-between":"","pa-4":""}},[a("v-scroll-y-transition",[a("v-flex",{attrs:{xs5:""}},[e.loadingTree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:e._e(),e._v(" "),e.jurisdictionHierarchy.length>0?a("v-text-field",{attrs:{"append-icon":"search",label:"Search Jurisdiction","single-line":"","hide-details":""},model:{value:e.searchJurisdiction,callback:function(t){e.searchJurisdiction=t},expression:"searchJurisdiction"}}):e._e(),e._v(" "),e.jurisdictionHierarchy.length>0?a("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,filter:e.searchJurisdiction},on:{"node:selected":e.selectedJurisdiction}}):e._e()],2)],1),e._v(" "),a("v-divider",{attrs:{vertical:""}}),e._v(" "),a("v-flex",{attrs:{"d-flex":"","text-center":""}},[a("v-scroll-y-transition",{attrs:{mode:"out-in"}},[e.activeJurisdiction.id?a("v-card",{staticClass:"pt-4 mx-auto",attrs:{flat:""}},[a("v-card-title",{attrs:{"primary-title":""}},[a("b",["request"===e.action?[e._v("\n                    Requesting New Facility Under "+e._s(e.activeJurisdiction.text)+"\n                  ")]:"add"===e.action?[e._v("\n                    Adding New Facility Under "+e._s(e.activeJurisdiction.text)+"\n                  ")]:e._e()],2)]),e._v(" "),a("v-card-text",[a("v-card",[a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,box:"",color:"deep-purple",label:"Name"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Alternative Name"},model:{value:e.alt_name,callback:function(t){e.alt_name=t},expression:"alt_name"}})],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:"Code"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-select",{attrs:{clearable:"",items:e.types,label:"Facility Type"},model:{value:e.facilityType,callback:function(t){e.facilityType=t},expression:"facilityType"}})],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-select",{attrs:{clearable:"",items:e.status,label:"Status"},model:{value:e.facilityStatus,callback:function(t){e.facilityStatus=t},expression:"facilityStatus"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-select",{attrs:{clearable:"",items:e.ownerships,label:"Facility Ownership"},model:{value:e.facilityOwnership,callback:function(t){e.facilityOwnership=t},expression:"facilityOwnership"}})],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Latitude"},model:{value:e.lat,callback:function(t){e.lat=t},expression:"lat"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:"Longitude"},model:{value:e.long,callback:function(t){e.long=t},expression:"long"}})],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                            Contacts Informations\n                          ")]),e._v(" "),a("v-card-text",[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Email"},model:{value:e.contact.email,callback:function(t){e.$set(e.contact,"email",t)},expression:"contact.email"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Phone"},model:{value:e.contact.phone,callback:function(t){e.$set(e.contact,"phone",t)},expression:"contact.phone"}})],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Fax"},model:{value:e.contact.fax,callback:function(t){e.$set(e.contact,"fax",t)},expression:"contact.fax"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Website"},model:{value:e.contact.website,callback:function(t){e.$set(e.contact,"website",t)},expression:"contact.website"}})],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{outline:"",label:"Facility Description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[a("v-icon",[e._v("clear")]),e._v("Clear\n                    ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addLocation()}}},[a("v-icon",{attrs:{left:""}},[e._v("language")]),e._v(" "),"request"===e.action?[e._v("\n                        Send Request\n                      ")]:"add"===e.action?[e._v("\n                        Add\n                      ")]:e._e()],2)],1)],1)],1)],1):["request"===e.action?[a("b",[e._v("Select a location on the left to request a new facility")])]:"add"===e.action?[a("b",[e._v("Select a location on the left to add a facility")])]:e._e()]],2)],1)],1)],1)]],2)},staticRenderFns:[]},Ke=a("VU/8")(Je,Ye,!1,null,null,null).exports,Xe={components:{CreateFacility:Ke}},Ze={render:function(){var e=this.$createElement;return(this._self._c||e)("CreateFacility",{attrs:{action:"add"}})},staticRenderFns:[]},Qe=a("VU/8")(Xe,Ze,!1,null,null,null).exports,et={components:{CreateFacility:Ke}},tt={render:function(){var e=this.$createElement;return(this._self._c||e)("CreateFacility",{attrs:{action:"request",requestType:"add"}})},staticRenderFns:[]},at=a("VU/8")(et,tt,!1,null,null,null).exports,rt={mixins:[U],validations:{name:{required:x.required}},props:["action","requestType","requestCategory"],data:function(){return{facilityId:"",editDialog:!1,loadingTree:!1,loadingBuildings:!1,buildingsHeaders:[{sortable:!1},{text:"Name",value:"name"},{text:"Code",value:"code"},{text:"Parent",value:"parent"},{text:"Facility Type",value:"type"},{text:"Facility Ownership",value:"ownership"},{text:"Status",value:"status"},{text:"Latitude",value:"latitude"},{text:"Longitude",value:"longitude"}],searchJurisdiction:"",searchBuildings:"",activeJurisdiction:{},jurisdictionHierarchy:[],buildings:[],name:"",alt_name:"",code:"",description:"",facilityType:"",types:[{text:"Clinic",value:"CLNC"},{text:"Dispensary",value:"DSPN"},{text:"Health Center",value:"HCNT"},{text:"Health Post",value:"HPST"},{text:"Hospital",value:"HOSP"}],ownerships:[{text:"Concesion",value:"CNCS"},{text:"Public",value:"PBLC"},{text:"Private",value:"PRVT"},{text:"Private Faith Based",value:"PFBO"},{text:"Private Not Profit",value:"PNPR"}],facilityOwnership:"",status:[{text:"Functional",value:"active"},{text:"Not Functional",value:"inactive"},{text:"Suspended",value:"suspended"}],facilityStatus:"",facilityParent:{},lat:"",long:"",contact:{email:"",phone:"",fax:"",website:""},requestStatus:"",confirm:!1,confirmTitle:"",tasksVerification:At}},methods:{changeRequestStatus:function(e,t,a){var r=this;if(a){this.requestStatus=t;var s=void 0;"approved"===t?s="approved":"rejected"===t&&(s="rejected"),this.confirm=!0,this.confirmTitle="Are you sure that you want to mark facility "+e.name+" as "+s,this.facilityId=e.id}else{this.$store.state.progressTitle="Saving new status",this.confirm=!1,this.$store.state.dynamicProgress=!0;var o=new FormData;o.append("id",this.facilityId),o.append("status",this.requestStatus),o.append("requestType",this.requestType),g.a.post("/FR/changeBuildingRequestStatus",o,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){r.$store.state.dynamicProgress=!1,r.$store.state.errorTitle="Info",r.$store.state.errorDescription="Request status changed successfully",r.$store.state.dialogError=!0,r.getBuildings()}).catch(function(e){r.$store.state.errorTitle="Error",r.$store.state.errorDescription="This request was not successfully processed",r.$store.state.dialogError=!0,console.log(e)})}},canChangeRequestStatus:function(e,t){if("request"!==this.action||"request"===this.action&&"requestsList"!==this.requestCategory)return!1;if("approve"===t){if("Approved"===e.requestStatus)return!1}else if("reject"===t&&("Approved"===e.requestStatus||"Rejected"===e.requestStatus))return!1;return!!("update"===this.requestType&&this.tasksVerification.canApprove("FacilitiesUpdateRequestsReport")||"add"===this.requestType&&this.tasksVerification.canApprove("NewFacilitiesRequestsReport")||"update"===this.requestType&&this.tasksVerification.canReject("FacilitiesUpdateRequestsReport")||"add"===this.requestType&&this.tasksVerification.canReject("NewFacilitiesRequestsReport"))},canEditBuilding:function(e){return("Approved"!==e.requestStatus||"requestsList"!==this.requestCategory)&&!(!this.tasksVerification.canEdit("FacilitiesReport")&&!this.tasksVerification.canAdd("RequestUpdateBuildingDetails"))},getBuildings:function(){var e=this;this.facilities=[],this.buildings=[],this.loadingBuildings=!0,g.a.get("/FR/getBuildings",{params:{jurisdiction:this.activeJurisdiction.id,action:this.action,requestType:this.requestType,requestCategory:this.requestCategory}}).then(function(t){e.loadingBuildings=!1,e.buildings=t.data}).catch(function(t){e.loadingBuildings=!1,console.log(t)})},selectedJurisdiction:function(e){this.activeJurisdiction=e,this.getBuildings()},selectedEditJurisdiction:function(e){this.facilityParent=e},edit:function(e){this.facilityId=e.id,this.facilityType=e.type.code,this.facilityStatus=e.status.code,this.facilityParent.id=e.parent.id,this.facilityParent.text=e.parent.name,this.facilityOwnership=e.ownership.code,this.name=e.name,this.alt_name=e.alt_name,this.code=e.code,this.lat=e.lat,this.long=e.long,this.contact.phone=e.phone,this.contact.email=e.email,this.contact.website=e.website,this.contact.fax=e.fax,this.description=e.description,this.editDialog=!0},saveEdit:function(){var e=this,t=new FormData;t.append("id",this.facilityId),t.append("name",this.name),t.append("alt_name",this.alt_name),t.append("code",this.code),t.append("action",this.action),t.append("requestType",this.requestType),this.facilityType&&t.append("type",this.facilityType),this.facilityStatus&&t.append("status",this.facilityStatus),this.facilityOwnership&&t.append("ownership",this.facilityOwnership),this.lat&&t.append("lat",this.lat),this.long&&t.append("long",this.long),t.append("contact",s()(this.contact)),this.description&&t.append("description",this.description),t.append("parent",this.facilityParent.id),this.$store.state.progressTitle="Saving Changes",this.editDialog=!1,this.$store.state.dynamicProgress=!0,g.a.post("/FR/addBuilding",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.dynamicProgress=!1,e.$store.state.errorTitle="Changes Saved",e.$store.state.errorDescription="Changes saved successfully",e.$store.state.dialogError=!0,e.getBuildings()}).catch(function(t){e.$store.state.errorTitle="Failed To Save Changes",e.$store.state.errorDescription="Failed To Save Changes",e.$store.state.dialogError=!0,console.log(t)})}},created:function(){var e=this;this.loadingTree=!0,this.getTree(!1,function(t,a){t?e.loadingTree=!1:(e.loadingTree=!1,e.jurisdictionHierarchy=a)}),"request"===this.action&&"requestsList"===this.requestCategory&&this.buildingsHeaders.push({text:"Request Status",value:"requestStatus"})},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Name is required"),e):e}},components:{"liquor-tree":re.a}},st={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{width:"630px"},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v("\n        Confirmation\n      ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.confirm=!1}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card",[a("v-card-text",[e._v("\n        "+e._s(e.confirmTitle)+"\n      ")]),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.confirm=!1}}},[e._v("Cancel")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:e.changeRequestStatus}},[e._v("Proceed")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"800px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n        Editing "+e._s(e.name)+"\n      ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.editDialog=!1}}},[e._v("close")])],1),e._v(" "),a("v-card",[a("v-card-text",[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,box:"",color:"deep-purple",label:"Name"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Alternative Name"},model:{value:e.alt_name,callback:function(t){e.alt_name=t},expression:"alt_name"}})],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:"Code"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-select",{attrs:{clearable:"",items:e.types,label:"Facility Type"},model:{value:e.facilityType,callback:function(t){e.facilityType=t},expression:"facilityType"}})],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-select",{attrs:{clearable:"",items:e.status,label:"Status"},model:{value:e.facilityStatus,callback:function(t){e.facilityStatus=t},expression:"facilityStatus"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-select",{attrs:{clearable:"",items:e.ownerships,label:"Facility Ownership"},model:{value:e.facilityOwnership,callback:function(t){e.facilityOwnership=t},expression:"facilityOwnership"}})],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Latitude"},model:{value:e.lat,callback:function(t){e.lat=t},expression:"lat"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:"Longitude"},model:{value:e.long,callback:function(t){e.long=t},expression:"long"}})],1)],1)],1),e._v(" "),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                Contacts Informations\n              ")]),e._v(" "),a("v-card-text",[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Email"},model:{value:e.contact.email,callback:function(t){e.$set(e.contact,"email",t)},expression:"contact.email"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Phone"},model:{value:e.contact.phone,callback:function(t){e.$set(e.contact,"phone",t)},expression:"contact.phone"}})],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Fax"},model:{value:e.contact.fax,callback:function(t){e.$set(e.contact,"fax",t)},expression:"contact.fax"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Website"},model:{value:e.contact.website,callback:function(t){e.$set(e.contact,"website",t)},expression:"contact.website"}})],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("v-flex",[a("v-textarea",{attrs:{outline:"",label:"Facility Description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._v(" "),a("v-flex",{attrs:{color:"white"}},[e._v("\n            Selected Parent: "),a("b",[e._v(e._s(e.facilityParent.text))]),a("br"),a("br"),e._v("\n            Choose Different Parent\n            "),e.jurisdictionHierarchy.length>0?a("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,filter:e.searchJurisdiction},on:{"node:selected":e.selectedEditJurisdiction},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node;return a("div",{staticClass:"node-container"},[a("div",{staticClass:"node-text"},[e._v(e._s(r.text))])])}}],null,!1,893252766)}):e._e()],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-toolbar",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:"","text-sm-left":""}},[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("cancel")]),e._v(" Cancel\n                  ")],1)],1),e._v(" "),a("v-flex",{attrs:{xs6:"","text-sm-right":""}},[a("v-btn",{attrs:{color:"primary",disabled:e.$v.$invalid,dark:""},on:{click:function(t){return e.saveEdit()}}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v(" "),"updateRequest"===e.requestCategory?[e._v("\n                      Send Request\n                    ")]:[e._v("\n                      Save\n                    ")]],2)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("v-card",[a("v-card-title",{staticClass:"indigo white--text headline"},["updateRequest"===e.requestCategory?[e._v("\n        Choose Facility To Request Change Of Information\n      ")]:[e._v("\n        Facilities List\n      ")]],2),e._v(" "),a("v-layout",{attrs:{"justify-space-between":""}},[a("v-scroll-y-transition",[a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Search Jurisdiction","single-line":"","hide-details":""},model:{value:e.searchJurisdiction,callback:function(t){e.searchJurisdiction=t},expression:"searchJurisdiction"}}),e._v(" "),e.loadingTree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:e._e(),e._v(" "),e.jurisdictionHierarchy.length>0?a("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,filter:e.searchJurisdiction},on:{"node:selected":e.selectedJurisdiction}}):e._e()],2)],1),e._v(" "),a("v-divider",{attrs:{vertical:""}}),e._v(" "),a("v-flex",{attrs:{"d-flex":"","text-center":""}},[a("v-scroll-y-transition",{attrs:{mode:"out-in"}},[e.activeJurisdiction.id?a("v-card",{attrs:{flat:""}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",[a("b",[a("center",[e._v("Facilities Under "+e._s(e.activeJurisdiction.text))])],1)]),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",[a("v-text-field",{attrs:{"append-icon":"search",label:"Search Facility","single-line":"","hide-details":""},model:{value:e.searchBuildings,callback:function(t){e.searchBuildings=t},expression:"searchBuildings"}})],1)],1)],1),e._v(" "),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{loading:e.loadingBuildings,headers:e.buildingsHeaders,items:e.buildings,search:e.searchBuildings},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[a("v-tooltip",{attrs:{top:""}},[e.canEditBuilding(t.item)?a("v-btn",{attrs:{slot:"activator",icon:"",color:"primary"},on:{click:function(a){return e.edit(t.item)}},slot:"activator"},[a("v-icon",[e._v("edit")])],1):e._e(),e._v(" "),a("span",[e._v("Edit")])],1),e._v(" "),"request"===e.action?a("v-tooltip",{attrs:{top:""}},[e.canChangeRequestStatus(t.item,"approve")?a("v-btn",{attrs:{slot:"activator",icon:"",color:"success"},on:{click:function(a){return e.changeRequestStatus(t.item,"approved",!0)}},slot:"activator"},[a("v-icon",[e._v("check_circle")])],1):e._e(),e._v(" "),a("span",[e._v("Approve")])],1):e._e(),e._v(" "),"request"===e.action?a("v-tooltip",{attrs:{top:""}},[e.canChangeRequestStatus(t.item,"reject")?a("v-btn",{attrs:{slot:"activator",icon:"",color:"error"},on:{click:function(a){return e.changeRequestStatus(t.item,"rejected",!0)}},slot:"activator"},[a("v-icon",[e._v("cancel")])],1):e._e(),e._v(" "),a("span",[e._v("Reject")])],1):e._e()],1),e._v(" "),a("td",[e._v(e._s(t.item.name))]),e._v(" "),a("td",[e._v(e._s(t.item.code))]),e._v(" "),a("td",[e._v(e._s(t.item.parent.name))]),e._v(" "),a("td",[e._v(e._s(t.item.type.text))]),e._v(" "),a("td",[e._v(e._s(t.item.ownership.text))]),e._v(" "),a("td",[e._v(e._s(t.item.status.text))]),e._v(" "),a("td",[e._v(e._s(t.item.lat))]),e._v(" "),a("td",[e._v(e._s(t.item.long))]),e._v(" "),"request"===e.action&&"requestsList"===e.requestCategory?a("td",[e._v("\n                    "+e._s(t.item.requestStatus)+"\n                  ")]):e._e()]}}],null,!1,2362305556)})],1)],1):e.loadingBuildings?e._e():[a("b",[e._v("Select a jurisdiction on the left to display its facilities")])]],2)],1)],1)],1)],1)},staticRenderFns:[]},ot=a("VU/8")(rt,st,!1,null,null,null).exports,it={components:{FacilitiesReport:ot}},nt={render:function(){var e=this.$createElement;return(this._self._c||e)("FacilitiesReport",{attrs:{action:"request",requestType:"update",requestCategory:"updateRequest"}})},staticRenderFns:[]},lt=a("VU/8")(it,nt,!1,null,null,null).exports,ct={props:["action","requestType","requestCategory"],components:{FacilitiesReport:ot}},ut={render:function(){var e=this.$createElement;return(this._self._c||e)("FacilitiesReport",{attrs:{action:"request",requestType:"add",requestCategory:"requestsList"}})},staticRenderFns:[]},dt=a("VU/8")(ct,ut,!1,null,null,null).exports,vt={props:["action","requestType","requestCategory"],components:{FacilitiesReport:ot}},pt={render:function(){var e=this.$createElement;return(this._self._c||e)("FacilitiesReport",{attrs:{action:"request",requestType:"update",requestCategory:"requestsList"}})},staticRenderFns:[]},ht=a("VU/8")(vt,pt,!1,null,null,null).exports,gt=a("PJh5"),ft=a.n(gt),mt={data:function(){return{panel:[],expand:!1,viewDialog:!1,searchServices:"",services:[],service:{},loadingServices:!1,servicesHeaders:[{sortable:!1},{text:"Name",value:"name"},{text:"Code",value:"code"},{text:"Service Types",value:"type"},{text:"Facilities Offering Service",value:"locations"},{text:"Active",value:"active"}],serviceHeader:[{name:"Name",value:"name"},{name:"Code",value:"code"},{name:"Facilities Offering Service",value:"facility"},{name:"Active",value:"active"},{name:"Appointment Required",value:"appointment"},{name:"Service Types",value:"type"},{name:"Service Categories",value:"category"},{name:"Required Specialty",value:"specialty"},{name:"Service Time Availability",value:"availableTime"},{name:"Service Unavailability",value:"notAvailable"},{name:"Contacts",value:"telecom"},{name:"Service Provision Conditions",value:"serviceProvisionCode"},{name:"Eligibility",value:"eligibility"},{name:"Referral Methods",value:"referralMethod"},{name:"Communication Language",value:"communication"},{name:"Program",value:"program"},{name:"Characteristics",value:"characteristics"},{name:"Comments",value:"comments"},{name:"Extra Details",value:"details"},{name:"Photo",value:"photo"}]}},filters:{limitCharacters:function(e){return e.substring(0,40)},displayId:function(e){if(e){var t=void 0,a=!0,r=!1,s=void 0;try{for(var o,i=c()(e);!(a=(o=i.next()).done);a=!0){var n=o.value;t?t+=", "+n.value:t=n.value}}catch(e){r=!0,s=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw s}}return t}},translateDays:function(e){var t=[],a=!0,r=!1,s=void 0;try{for(var o,i=c()(e);!(a=(o=i.next()).done);a=!0){var n=o.value;"mon"===n&&t.push("Monday"),"tue"===n&&t.push("Tuesday"),"wed"===n&&t.push("Wednesday"),"thu"===n&&t.push("Thursday"),"fri"===n&&t.push("Friday"),"sat"===n&&t.push("Saturday"),"sun"===n&&t.push("Sunday")}}catch(e){r=!0,s=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw s}}return t.join(", ")},formatDate:function(e){return ft()(e).format("Do MMMM YYYY")}},methods:{expandAll:function(e){this.expand?this.panel=[].concat(I()(Array(20).keys())).map(function(e){return!0}):this.panel=[]},formatCodeableConcept:function(e){if(!e||!Array.isArray(e))return"";var t=void 0,a=!0,r=!1,s=void 0;try{for(var o,i=c()(e);!(a=(o=i.next()).done);a=!0){var n=o.value,l=void 0;l=n.hasOwnProperty("code")?n.code.text:n.text,t?t+="<br>"+l:t=l}}catch(e){r=!0,s=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw s}}return t},getServices:function(e,t){var a={getResource:e.getResource,id:e.id};g.a.get("/FR/getServices",{params:a}).then(function(e){return t(e)}).catch(function(e){console.log(e)})},view:function(e){var t=this;this.getServices({id:e,getResource:!0},function(e){e.data&&e.data.entry&&e.data.entry.length>0&&(t.service=e.data.entry[0].resource),t.viewDialog=!0})},closeViewDialog:function(){this.viewDialog=!1,this.expand=!1}},created:function(){var e=this;this.loadingServices=!0,this.getServices({},function(t){e.loadingServices=!1,e.services=t.data})}},_t={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[e.viewDialog?a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"950px"},model:{value:e.viewDialog,callback:function(t){e.viewDialog=t},expression:"viewDialog"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-spacer"),e._v(" "),a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:e.closeViewDialog}},[e._v("close")])],1),e._v(" "),a("v-card",[a("v-card-text",[a("v-switch",{attrs:{label:"Expand All"},on:{change:e.expandAll},model:{value:e.expand,callback:function(t){e.expand=t},expression:"expand"}}),e._v(" "),a("v-expansion-panel",{attrs:{expand:""},model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Name")])]},proxy:!0}],null,!1,4004223849)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e._v(e._s(e.service.name))])],1)],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Code")])]},proxy:!0}],null,!1,896836835)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e._v(e._s(e._f("displayId")(e.service.identifier)))])],1)],1)],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Active")])]},proxy:!0}],null,!1,1023682178)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e.service.active?[e._v("\n                          Yes\n                        ")]:[e._v("\n                          No\n                        ")]],2)],1)],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Appointment Required")])]},proxy:!0}],null,!1,2098729288)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e.service.appointment?[e._v("\n                          Yes\n                        ")]:[e._v("\n                          No\n                        ")]],2)],1)],1)],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Service Time Availability")])]},proxy:!0}],null,!1,130211255)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e._l(e.service.availableTime,function(t,r){return[e._v("\n                          Days of the week: "+e._s(e._f("translateDays")(t.daysOfWeek))+" "),a("br"),e._v("\n                          Available All Day:\n                          "),t.allDay?a("label",{key:"allDayYes"+r},[e._v("\n                            Yes\n                          ")]):a("label",{key:"allDayNo"+r},[e._v("\n                            No\n                          ")]),a("br"),e._v(" "),t.availableStartTime?a("label",{key:"startTime"+r},[e._v("\n                            Available Start Time: "+e._s(t.availableStartTime)+" "),a("br")]):e._e(),e._v(" "),t.availableEndTime?a("label",{key:"endTime"+r},[e._v("\n                            Available End Time: "+e._s(t.availableEndTime)+" "),a("br")]):e._e(),e._v(" "),a("v-divider")]})],2)],1)],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Service Unavailability")])]},proxy:!0}],null,!1,913906681)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e._l(e.service.notAvailable,function(t,r){return[e._v("\n                          Description: "+e._s(t.description)+" "),a("br"),e._v(" "),t.during&&(t.during.start||t.during.end)?a("label",{key:"unavailable"+r},[e._v("\n                            Dates Unavailable: "+e._s(e._f("formatDate")(t.during.start))+" to "+e._s(e._f("formatDate")(t.during.end))+"\n                          ")]):e._e(),e._v(" "),a("v-divider",{key:"unAvDivider"+r})]})],2)],1)],1)],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Service Types")])]},proxy:!0}],null,!1,2068889432)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.type))}})])],1)],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Service Category")])]},proxy:!0}],null,!1,1665262723)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.category))}})])],1)],1)],1)],1)],1),e._v(" "),a("v-flex",[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Facilities Offering Service")])]},proxy:!0}],null,!1,2224861096)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e._l(e.service.location,function(t){return[e._v("\n                      "+e._s(t.name)),a("br")]})],2)],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Required Specialty")])]},proxy:!0}],null,!1,1169077963)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.specialty))}})])],1)],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Eligibility")])]},proxy:!0}],null,!1,1814976707)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.eligibility))}})])],1)],1)],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Contacts")])]},proxy:!0}],null,!1,4171370397)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e._l(e.service.telecom,function(t,r){return["url"===t.system?a("label",{key:r},[e._v("website")]):a("label",{key:r},[e._v(e._s(t.system))]),e._v("\n                          : "+e._s(t.value)+" "),a("br")]})],2)],1)],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Communication Language")])]},proxy:!0}],null,!1,2765979932)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.communication))}})])],1)],1)],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Service Provision Conditions")])]},proxy:!0}],null,!1,2942230810)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.serviceProvisionCode))}})])],1)],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Referral Methods")])]},proxy:!0}],null,!1,751530875)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.referralMethod))}})])],1)],1)],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Characteristics")])]},proxy:!0}],null,!1,874600544)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.characteristic))}})])],1)],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Programs")])]},proxy:!0}],null,!1,3542767689)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.program))}})])],1)],1)],1)],1)],1),e._v(" "),a("v-flex",[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Comments")])]},proxy:!0}],null,!1,1180182606)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e._v("\n                    "+e._s(e.service.comment)+"\n                  ")])],1)],1)],1),e._v(" "),a("v-flex",[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Extra Details")])]},proxy:!0}],null,!1,3274642518)},[e._v(" "),a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e._v("\n                    "+e._s(e.service.extraDetails)+"\n                  ")])],1)],1)],1),e._v(" "),a("v-flex",[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Photo")])]},proxy:!0}],null,!1,4281668386)},[e._v(" "),a("v-card",[a("v-card-text",[a("img",{attrs:{src:e.service.photo}})])],1)],1)],1)],1)],1)],1)],1)],1):e._e(),e._v(" "),a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"1200px"}},[a("v-card-title",{staticClass:"indigo white--text headline"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",[e._v("\n          Services List\n        ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",[a("v-text-field",{attrs:{"append-icon":"search",label:"Search Service","single-line":"","hide-details":""},model:{value:e.searchServices,callback:function(t){e.searchServices=t},expression:"searchServices"}})],1)],1)],1),e._v(" "),a("v-scroll-y-transition",{attrs:{mode:"out-in"}},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{loading:e.loadingServices,headers:e.servicesHeaders,items:e.services,search:e.searchServices},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[a("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(a){return e.view(t.item.id)}}},[a("v-icon",[e._v("list")])],1)],1),e._v(" "),a("td",[e._v(e._s(t.item.name))]),e._v(" "),a("td",[e._v(e._s(t.item.code))]),e._v(" "),a("td",[e._v(e._s(e._f("limitCharacters")(t.item.type.join(","))))]),e._v(" "),a("td",[e._v(e._s(t.item.locations))]),e._v(" "),a("td",[e._v(e._s(t.item.active))])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]},yt=a("VU/8")(mt,_t,!1,null,null,null).exports,xt={validations:{name:{required:x.required}},props:["codeSystemType","displayText"],data:function(){return{name:"",code:""}},methods:{addServiceType:function(){var e=this,t=new FormData;t.append("name",this.name),t.append("code",this.code),t.append("codeSystemType",this.codeSystemType),g.a.post("/FR/addCodeSystem",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="Code system added successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1}).catch(function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="Failed to add code system!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t)})}},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Name is required"),e):e}}},bt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",{staticClass:"pt-4 mx-auto",attrs:{flat:"","max-width":"500"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("b",[e._v("Adding New "+e._s(e.displayText))])]),e._v(" "),a("v-card-text",[a("v-card",[a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,box:"",color:"deep-purple",label:"Name"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:"Code"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[a("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addServiceType()}}},[a("v-icon",{attrs:{left:""}},[e._v("add")]),e._v("Add\n          ")],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},St=a("VU/8")(xt,bt,!1,null,null,null).exports,$t={mixins:[U],validations:{name:{required:x.required}},data:function(){return{dateRangeErrors:[],timeRangeErrors:[],unavailabilityDescrErr:[],name:"",code:"",comment:"",extraDetails:"",serviceTypes:[],serviceCharacteristics:[],serviceProvisionConditions:[],programs:[],languages:[],serviceCategories:[],specialties:[],referralMethods:[],serviceEligibilities:[],serviceTypesConcept:[],serviceCategoriesConcept:[],specialtiesConcept:[],referralMethodsConcept:[],serviceEligibilitiesConcept:[],languagesConcept:[],serviceCharacteristicsConcept:[],serviceProvisionConditionsConcept:[],programsConcept:[],locations:[],contact:{email:"",phone:"",fax:"",website:""},availableTime:[{mainFields:{daysOfWeek:[],allDay:!1,availableStartTime:"",availableEndTime:""},otherFields:{timeMenuStart:!1,timeMenuEnd:!1}}],notAvailable:[{mainFields:{description:"",during:{start:"",end:"",startDisplay:"",endDisplay:""}},otherFields:{dateMenuStart:!1,dateMenuEnd:!1}}],active:!0,appointmentRequired:!1,locationHierarchy:[],searchLocation:"",days:[{text:"Monday",value:"mon"},{text:"Tuesday",value:"tue"},{text:"Wednesday",value:"wed"},{text:"Thursday",value:"thu"},{text:"Friday",value:"fri"},{text:"Saturday",value:"sat"},{text:"Sunday",value:"sun"}],imageData:""}},methods:{addAvailableTime:function(){this.availableTime.push({mainFields:{daysOfWeek:[],allDay:!1,availableStartTime:"",availableEndTime:""},otherFields:{timeMenuStart:!1,timeMenuEnd:!1}})},addUnavailableTime:function(){this.notAvailable.push({mainFields:{description:"",during:{start:"",end:"",startDisplay:"",endDisplay:""}},otherFields:{dateMenuStart:!1,dateMenuEnd:!1}})},clearEndTime:function(e){this.availableTime[e].mainFields.availableEndTime="",this.validateStartTime(e)},clearStartTime:function(e){this.availableTime[e].mainFields.availableStartTime="",this.validateEndTime(e)},clearEndDate:function(e){this.notAvailable[e].mainFields.during.end="",this.notAvailable[e].mainFields.during.endDisplay="",this.validateStartDate(e)},clearStartDate:function(e){this.notAvailable[e].mainFields.during.start="",this.notAvailable[e].mainFields.during.startDisplay="",this.validateEndDate(e)},previewImage:function(e){var t=this,a=e.target;if(a.files&&a.files[0]){var r=new FileReader;r.onload=function(e){t.imageData=e.target.result},r.readAsDataURL(a.files[0])}},locationSelected:function(e){"bu"===e.data.locType&&this.locations.push(e.id)},locationUnSelected:function(e){-1!==this.locations.indexOf(e.id)&&this.locations.splice(this.locations.indexOf(e.id),1)},addService:function(){var e=this,t=new FormData;t.append("name",this.name),t.append("code",this.code),t.append("category",s()(this.serviceCategories)),t.append("type",s()(this.serviceTypes)),t.append("referralMethod",s()(this.referralMethods)),t.append("specialty",s()(this.specialties)),t.append("eligibility",s()(this.serviceEligibilities)),t.append("communication",s()(this.languages)),t.append("program",s()(this.programs)),t.append("characteristic",s()(this.serviceCharacteristics)),t.append("serviceProvisionCode",s()(this.serviceProvisionConditions)),t.append("location",s()(this.locations)),t.append("comment",this.comment),t.append("extraDetails",this.extraDetails),t.append("photo",this.imageData),t.append("availableTime",s()(this.availableTime)),t.append("notAvailable",s()(this.notAvailable)),t.append("telecom",s()(this.contact)),t.append("appointmentRequired",this.appointmentRequired),t.append("active",this.active),g.a.post("/FR/addService",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="800px",e.$store.state.alert.msg="Service added successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1}).catch(function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="800px",e.$store.state.alert.msg="Failed to add service!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t)})},validateEndTime:function(e){if(this.$refs.timeMenuEnd[e].save(this.availableTime[e].mainFields.availableEndTime+":00"),this.timeRangeErrors.splice(e,1,""),!this.availableTime[e].mainFields.availableStartTime&&this.availableTime[e].mainFields.availableEndTime)return this.timeRangeErrors.splice(e,1,"Start time is missing"),!1;if(this.availableTime[e].mainFields.availableStartTime||this.availableTime[e].mainFields.availableEndTime){var t=this.availableTime[e].mainFields.availableStartTime.split(":");(new Date).setHours(t[0],t[1],"00");var a=this.availableTime[e].mainFields.availableEndTime.split(":");(new Date).setHours(a[0],a[1],"00"),a<=t&&this.timeRangeErrors.splice(e,1,"End time must be after start time")}},validateStartTime:function(e){if(this.$refs.timeMenuStart[e].save(this.availableTime[e].mainFields.availableStartTime+":00"),this.timeRangeErrors.splice(e,1,""),!this.availableTime[e].mainFields.availableEndTime&&this.availableTime[e].mainFields.availableStartTime)return this.timeRangeErrors.splice(e,1,"End time is missing"),!1;if(this.availableTime[e].mainFields.availableStartTime||this.availableTime[e].mainFields.availableEndTime){var t=this.availableTime[e].mainFields.availableStartTime.split(":");(new Date).setHours(t[0],t[1],"00");var a=this.availableTime[e].mainFields.availableEndTime.split(":");(new Date).setHours(a[0],a[1],"00"),a<=t&&this.timeRangeErrors.splice(e,1,"End time must be after start time")}},validateStartDate:function(e){this.dateRangeErrors.splice(e,1,"");var t=ft()(this.notAvailable[e].mainFields.during.start).format("Do MMMM YYYY");if(this.$refs.dateMenuStart[e].save(t),this.validateUnavailabilityDescr(e),!this.notAvailable[e].mainFields.during.end&&this.notAvailable[e].mainFields.during.start)return this.dateRangeErrors.splice(e,1,"End date is missing"),!1;this.notAvailable[e].mainFields.during.end<this.notAvailable[e].mainFields.during.start&&this.dateRangeErrors.splice(e,1,"End date must be after start date")},validateEndDate:function(e){this.dateRangeErrors.splice(e,1,"");var t=ft()(this.notAvailable[e].mainFields.during.end).format("Do MMMM YYYY");if(this.$refs.dateMenuEnd[e].save(t),this.validateUnavailabilityDescr(e),!this.notAvailable[e].mainFields.during.start&&this.notAvailable[e].mainFields.during.end)return this.dateRangeErrors.splice(e,1,"Start date is missing"),!1;this.notAvailable[e].mainFields.during.end<this.notAvailable[e].mainFields.during.start&&this.dateRangeErrors.splice(e,1,"End date must be after start date")},validateUnavailabilityDescr:function(e){if(this.unavailabilityDescrErr.splice(e,1,""),(this.notAvailable[e].mainFields.during.start||this.notAvailable[e].mainFields.during.end)&&!this.notAvailable[e].mainFields.description)return this.unavailabilityDescrErr.splice(e,1,"Description is missing")}},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Name is required"),e):e},codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},hasTimeRangeErrors:function(){if(0===this.timeRangeErrors.length)return!1;var e=!0,t=!1,a=void 0;try{for(var r,s=c()(this.timeRangeErrors);!(e=(r=s.next()).done);e=!0){if(r.value)return!0}}catch(e){t=!0,a=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw a}}return!1},hasDateRangeErrors:function(){if(0===this.dateRangeErrors.length)return!1;var e=!0,t=!1,a=void 0;try{for(var r,s=c()(this.dateRangeErrors);!(e=(r=s.next()).done);e=!0){if(r.value)return!0}}catch(e){t=!0,a=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw a}}return!1},hasUnAvDescrErrors:function(){if(0===this.unavailabilityDescrErr.length)return!1;var e=!0,t=!1,a=void 0;try{for(var r,s=c()(this.unavailabilityDescrErr);!(e=(r=s.next()).done);e=!0){if(r.value)return!0}}catch(e){t=!0,a=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw a}}return!1}},created:function(){var e=this;this.getTree(!0,function(t,a){t||(e.locationHierarchy=a)}),this.getCodeSystem("serviceTypes",function(t,a){t||(e.serviceTypesConcept=a)}),this.getCodeSystem("serviceCategories",function(t,a){t||(e.serviceCategoriesConcept=a)}),this.getCodeSystem("specialties",function(t,a){t||(e.specialtiesConcept=a)}),this.getCodeSystem("serviceEligibilities",function(t,a){t||(e.serviceEligibilitiesConcept=a)}),this.getCodeSystem("languages",function(t,a){t||(e.languagesConcept=a)}),this.getCodeSystem("referralMethods",function(t,a){t||(e.referralMethodsConcept=a)}),this.getCodeSystem("programs",function(t,a){t||(e.programsConcept=a)}),this.getCodeSystem("serviceCharacteristics",function(t,a){t||(e.serviceCharacteristicsConcept=a)}),this.getCodeSystem("serviceProvisionConditions",function(t,a){t||(e.serviceProvisionConditionsConcept=a)})},components:{"liquor-tree":re.a}},wt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-card",{staticClass:"pt-4 mx-auto",attrs:{flat:"","max-width":"1000"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("b",[e._v("Adding New Service")])]),e._v(" "),a("v-card-text",[a("v-card",[a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,box:"",color:"deep-purple",label:"Name *"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"",box:"",color:"deep-purple",label:"Code"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.serviceCategoriesConcept,label:"Service Category"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),e._v(" "),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.serviceCategories.length-2)+" others)")]):e._e()]}}]),model:{value:e.serviceCategories,callback:function(t){e.serviceCategories=t},expression:"serviceCategories"}}),e._v(" "),a("span",[e._v("Broad category of service being performed or delivered")])],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.serviceTypesConcept,label:"Service Type"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),e._v(" "),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.serviceTypes.length-2)+" others)")]):e._e()]}}]),model:{value:e.serviceTypes,callback:function(t){e.serviceTypes=t},expression:"serviceTypes"}}),e._v(" "),a("span",[e._v("Type of service that may be delivered or performed")])],1)],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.referralMethodsConcept,label:"Referral Methods"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),e._v(" "),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.referralMethods.length-2)+" others)")]):e._e()]}}]),model:{value:e.referralMethods,callback:function(t){e.referralMethods=t},expression:"referralMethods"}}),e._v(" "),a("span",[e._v("Ways that the service accepts referrals")])],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.specialtiesConcept,label:"Specialties"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),e._v(" "),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.specialties.length-2)+" others)")]):e._e()]}}]),model:{value:e.specialties,callback:function(t){e.specialties=t},expression:"specialties"}}),e._v(" "),a("span",[e._v("Specialties handled by the HealthcareService")])],1)],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.serviceEligibilitiesConcept,label:"Service Eligibility"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),e._v(" "),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.serviceEligibilities.length-2)+" others)")]):e._e()]}}]),model:{value:e.serviceEligibilities,callback:function(t){e.serviceEligibilities=t},expression:"serviceEligibilities"}}),e._v(" "),a("span",[e._v("Specific eligibility requirements required to use the service")])],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.languagesConcept,label:"Communication Language"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),e._v(" "),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.languages.length-2)+" others)")]):e._e()]}}]),model:{value:e.languages,callback:function(t){e.languages=t},expression:"languages"}}),e._v(" "),a("span",[e._v("The language that this service is offered in")])],1)],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.programsConcept,label:"Programs"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),e._v(" "),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.programs.length-2)+" others)")]):e._e()]}}]),model:{value:e.programs,callback:function(t){e.programs=t},expression:"programs"}}),e._v(" "),a("span",[e._v("Programs that this service is applicable to")])],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.serviceCharacteristicsConcept,label:"Characteristics"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),e._v(" "),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.serviceCharacteristics.length-2)+" others)")]):e._e()]}}]),model:{value:e.serviceCharacteristics,callback:function(t){e.serviceCharacteristics=t},expression:"serviceCharacteristics"}}),e._v(" "),a("span",[e._v("Collection of characteristics (attributes)")])],1)],1)],1)],1),e._v(" "),a("v-flex",[a("v-tooltip",{attrs:{top:""}},[a("v-select",{attrs:{slot:"activator",multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.serviceProvisionConditionsConcept,label:"Service Provision Conditions"},slot:"activator",scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),e._v(" "),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.serviceProvisionConditions.length-2)+" others)")]):e._e()]}}]),model:{value:e.serviceProvisionConditions,callback:function(t){e.serviceProvisionConditions=t},expression:"serviceProvisionConditions"}}),e._v(" "),a("span",[e._v("Conditions under which service is available/offered")])],1)],1),e._v(" "),a("v-flex",[e._v("\n              Facility where service is provided\n              "),e.locationHierarchy.length>0?a("liquor-tree",{ref:"locationHierarchyRef",attrs:{data:e.locationHierarchy,filter:e.searchLocation,options:{checkbox:!0}},on:{"node:checked":e.locationSelected,"node:unchecked":e.locationUnSelected},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node;return a("div",{staticClass:"node-container"},[a("div",{staticClass:"node-text"},[e._v(e._s(r.text))])])}}],null,!1,893252766)}):e._e()],1),e._v(" "),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                  Service time availability\n                ")]),e._v(" "),a("v-card-text",[e._l(e.availableTime,function(t,r){return a("div",{key:r},[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-select",{attrs:{multiple:"","multi-line":"","item-text":"text","item-value":"value",items:e.days,label:"Available days of the week"},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item;return t.index,[a("v-chip",[a("span",[e._v(e._s(r.text))])])]}}],null,!0),model:{value:e.availableTime[r].mainFields.daysOfWeek,callback:function(t){e.$set(e.availableTime[r].mainFields,"daysOfWeek",t)},expression:"availableTime[key].mainFields.daysOfWeek"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-switch",{attrs:{label:"Always available (24 hr service)"},model:{value:e.availableTime[r].mainFields.allDay,callback:function(t){e.$set(e.availableTime[r].mainFields,"allDay",t)},expression:"availableTime[key].mainFields.allDay"}})],1)],1)],1),e._v(" "),e.availableTime[r].mainFields.allDay?e._e():a("v-flex",[a("div",{staticStyle:{color:"red"}},[e._v("\n                          "+e._s(e.timeRangeErrors[r])+"\n                        ")])]),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-menu",{ref:"timeMenuStart",refInFor:!0,attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.availableTime[r].mainFields.availableStartTime,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.availableTime[r].mainFields,"availableStartTime",t)},"update:return-value":function(t){return e.$set(e.availableTime[r].mainFields,"availableStartTime",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-text-field",e._g({attrs:{disabled:e.availableTime[r].mainFields.allDay,label:"Available start time","prepend-icon":"access_time",clearable:"",readonly:""},on:{"click:clear":function(t){return e.clearStartTime(r)}},model:{value:e.availableTime[r].mainFields.availableStartTime,callback:function(t){e.$set(e.availableTime[r].mainFields,"availableStartTime",t)},expression:"availableTime[key].mainFields.availableStartTime"}},s))]}}],null,!0),model:{value:e.availableTime[r].otherFields.timeMenuStart,callback:function(t){e.$set(e.availableTime[r].otherFields,"timeMenuStart",t)},expression:"availableTime[key].otherFields.timeMenuStart"}},[e._v(" "),e.availableTime[r].otherFields.timeMenuStart?a("v-time-picker",{attrs:{format:"24hr","full-width":""},on:{"click:minute":function(t){return e.validateStartTime(r)}},model:{value:e.availableTime[r].mainFields.availableStartTime,callback:function(t){e.$set(e.availableTime[r].mainFields,"availableStartTime",t)},expression:"availableTime[key].mainFields.availableStartTime"}}):e._e()],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-menu",{ref:"timeMenuEnd",refInFor:!0,attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.availableTime[r].mainFields.availableEndTime,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.availableTime[r].mainFields,"availableEndTime",t)},"update:return-value":function(t){return e.$set(e.availableTime[r].mainFields,"availableEndTime",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-text-field",e._g({attrs:{disabled:e.availableTime[r].mainFields.allDay,label:"Available end time","prepend-icon":"access_time",clearable:"",readonly:""},on:{"click:clear":function(t){return e.clearEndTime(r)}},model:{value:e.availableTime[r].mainFields.availableEndTime,callback:function(t){e.$set(e.availableTime[r].mainFields,"availableEndTime",t)},expression:"availableTime[key].mainFields.availableEndTime"}},s))]}}],null,!0),model:{value:e.availableTime[r].otherFields.timeMenuEnd,callback:function(t){e.$set(e.availableTime[r].otherFields,"timeMenuEnd",t)},expression:"availableTime[key].otherFields.timeMenuEnd"}},[e._v(" "),e.availableTime[r].otherFields.timeMenuEnd?a("v-time-picker",{attrs:{format:"24hr","full-width":""},on:{"click:minute":function(t){return e.validateEndTime(r)}},model:{value:e.availableTime[r].mainFields.availableEndTime,callback:function(t){e.$set(e.availableTime[r].mainFields,"availableEndTime",t)},expression:"availableTime[key].mainFields.availableEndTime"}}):e._e()],1)],1)],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-divider")],1)}),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",color:"primary"},on:{click:e.addAvailableTime},slot:"activator"},[a("v-icon",[e._v("add")])],1),e._v(" "),a("span",[e._v("Add more availability for this service")])],1)],1)],1)],2)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-divider"),e._v(" "),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                  Service un availability\n                ")]),e._v(" "),a("v-card-text",[e._l(e.notAvailable,function(t,r){return a("div",{key:r},[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("div",{staticStyle:{color:"red"}},[e._v("\n                          "+e._s(e.unavailabilityDescrErr[r])+"\n                        ")])]),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",[a("v-tooltip",{attrs:{top:""}},[a("v-text-field",{attrs:{slot:"activator",label:"Description",id:"id"},on:{input:function(t){return e.validateUnavailabilityDescr(r)}},slot:"activator",model:{value:e.notAvailable[r].mainFields.description,callback:function(t){e.$set(e.notAvailable[r].mainFields,"description",t)},expression:"notAvailable[key].mainFields.description"}}),e._v(" "),a("span",[e._v("Reason presented to the user explaining why time not available")])],1)],1)],1)],1),e._v(" "),a("v-flex",[a("div",{staticStyle:{color:"red"}},[e._v("\n                          "+e._s(e.dateRangeErrors[r])+"\n                        ")])]),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-menu",{ref:"dateMenuStart",refInFor:!0,attrs:{"return-value":e.notAvailable[r].mainFields.during.startDisplay,"close-on-content-click":!1,"full-width":"","max-width":"290"},on:{"update:returnValue":function(t){return e.$set(e.notAvailable[r].mainFields.during,"startDisplay",t)},"update:return-value":function(t){return e.$set(e.notAvailable[r].mainFields.during,"startDisplay",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-text-field",e._g({attrs:{value:e.notAvailable[r].mainFields.during.startDisplay,clearable:"",label:"Start Date",readonly:""},on:{"click:clear":function(t){return e.clearStartDate(r)}}},s))]}}],null,!0),model:{value:e.notAvailable[r].otherFields.dateMenuStart,callback:function(t){e.$set(e.notAvailable[r].otherFields,"dateMenuStart",t)},expression:"notAvailable[key].otherFields.dateMenuStart"}},[e._v(" "),a("v-date-picker",{on:{change:function(t){e.notAvailable[r].otherFields.dateMenuStart=!1},input:function(t){return e.validateStartDate(r)}},model:{value:e.notAvailable[r].mainFields.during.start,callback:function(t){e.$set(e.notAvailable[r].mainFields.during,"start",t)},expression:"notAvailable[key].mainFields.during.start"}})],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-menu",{ref:"dateMenuEnd",refInFor:!0,attrs:{"return-value":e.notAvailable[r].mainFields.during.endDisplay,"close-on-content-click":!1,"full-width":"","max-width":"290"},on:{"update:returnValue":function(t){return e.$set(e.notAvailable[r].mainFields.during,"endDisplay",t)},"update:return-value":function(t){return e.$set(e.notAvailable[r].mainFields.during,"endDisplay",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-text-field",e._g({attrs:{value:e.notAvailable[r].mainFields.during.endDisplay,clearable:"",label:"End Date",readonly:""},on:{"click:clear":function(t){return e.clearEndDate(r)}}},s))]}}],null,!0),model:{value:e.notAvailable[r].otherFields.dateMenuEnd,callback:function(t){e.$set(e.notAvailable[r].otherFields,"dateMenuEnd",t)},expression:"notAvailable[key].otherFields.dateMenuEnd"}},[e._v(" "),a("v-date-picker",{on:{change:function(t){e.notAvailable[r].otherFields.dateMenuEnd=!1},input:function(t){return e.validateEndDate(r)}},model:{value:e.notAvailable[r].mainFields.during.end,callback:function(t){e.$set(e.notAvailable[r].mainFields.during,"end",t)},expression:"notAvailable[key].mainFields.during.end"}})],1)],1)],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-divider")],1)}),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",color:"primary"},on:{click:e.addUnavailableTime},slot:"activator"},[a("v-icon",[e._v("add")])],1),e._v(" "),a("span",[e._v("Add more service un availability")])],1)],1)],1)],2)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-divider"),e._v(" "),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v("\n                  Contacts Informations\n                ")]),e._v(" "),a("v-card-text",[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Email"},model:{value:e.contact.email,callback:function(t){e.$set(e.contact,"email",t)},expression:"contact.email"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Phone"},model:{value:e.contact.phone,callback:function(t){e.$set(e.contact,"phone",t)},expression:"contact.phone"}})],1)],1)],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Fax"},model:{value:e.contact.fax,callback:function(t){e.$set(e.contact,"fax",t)},expression:"contact.fax"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Website"},model:{value:e.contact.website,callback:function(t){e.$set(e.contact,"website",t)},expression:"contact.website"}})],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-divider"),e._v(" "),a("v-divider"),e._v(" "),a("v-flex",[a("v-tooltip",{attrs:{top:""}},[a("v-textarea",{attrs:{slot:"activator",outline:"",label:"Comment about this service"},slot:"activator",model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),e._v(" "),a("span",[e._v("Additional description and/or any specific issues not covered elsewhere")])],1)],1),e._v(" "),a("v-flex",[a("v-tooltip",{attrs:{top:""}},[a("v-textarea",{attrs:{slot:"activator",outline:"",label:"Extra details about this service"},slot:"activator",model:{value:e.extraDetails,callback:function(t){e.extraDetails=t},expression:"extraDetails"}}),e._v(" "),a("span",[e._v("Extra details about the service that can't be placed in the other fields")])],1)],1),e._v(" "),a("v-flex",[a("v-tooltip",{attrs:{top:""}},[a("label",{attrs:{slot:"activator"},slot:"activator"},[e._v("Photo for a service")]),e._v(" "),a("input",{attrs:{slot:"activator",type:"file",accept:"image/*"},on:{change:e.previewImage},slot:"activator"}),e._v(" "),a("span",[e._v("Facilitates quick identification of the service")])]),e._v(" "),e.imageData.length>0?a("div",{staticClass:"image-preview"},[a("img",{staticClass:"preview",attrs:{src:e.imageData}})]):e._e()],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-switch",{attrs:{slot:"activator",label:"Appointment Required"},slot:"activator",model:{value:e.appointmentRequired,callback:function(t){e.appointmentRequired=t},expression:"appointmentRequired"}}),e._v(" "),a("span",[e._v("If an appointment is required for access to this service")])],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-switch",{attrs:{label:"Active"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}})],1)],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[a("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid||(e.hasTimeRangeErrors||e.hasDateRangeErrors||e.hasUnAvDescrErrors)&&!e.availableTime.allDay,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addService()}}},[a("v-icon",{attrs:{left:""}},[e._v("add")]),e._v("Add\n          ")],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var Dt=a("VU/8")($t,wt,!1,function(e){a("4hxi")},"data-v-9db4cfec",null).exports;o.default.use(y.a);var Ct=new y.a({routes:[{path:"/",name:"FacilityReconHome",component:he},{path:"/addUser",name:"AddUser",component:J},{path:"/UsersList",name:"UsersList",component:W},{path:"/RolesManagement",name:"RolesManagement",component:X},{path:"/ChangePassword",name:"ChangePassword",component:ee},{path:"/login",name:"Login",component:C},{path:"dhis2Auth",name:"DHIS2Auth",component:Be},{path:"/Signup",name:"Signup",component:T},{path:"/Configure",name:"Configure",component:q},{path:"/logout",name:"Logout",component:j},{path:"/ViewDataSources",name:"ViewDataSources",component:Ee},{path:"/AddDataSources",name:"AddDataSources",component:Me},{path:"/dataSourcesPair",name:"DataSourcesPair",component:He},{path:"/view",name:"FacilityReconView",component:le},{path:"/scores",name:"FacilityReconScores",component:he},{path:"/recoStatus",name:"FacilityRecoStatus",component:me},{path:"/dbAdmin",name:"FacilityReconDbAdmin",component:xe},{path:"/RequestBuildingAddition",name:"RequestBuildingAddition",component:at,beforeEnter:function(e,t,a){if(At.canAdd(e.name))return a();Pt.state.dialogError=!0,Pt.state.errorTitle="Info",Pt.state.errorColor="error",Pt.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/RequestUpdateBuildingDetails",name:"RequestUpdateBuildingDetails",component:lt,props:function(e){return{action:e.query.action,requestCategory:e.query.requestCategory,requestType:e.query.requestType}},beforeEnter:function(e,t,a){if(At.canAdd(e.name))return a();Pt.state.dialogError=!0,Pt.state.errorTitle="Info",Pt.state.errorColor="error",Pt.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/FacilitiesUpdateRequestsReport",name:"FacilitiesUpdateRequestsReport",component:ht,props:function(e){return{action:e.query.action,requestCategory:e.query.requestCategory,requestType:e.query.requestType}},beforeEnter:function(e,t,a){if(At.canView(e.name))return a();Pt.state.dialogError=!0,Pt.state.errorTitle="Info",Pt.state.errorColor="error",Pt.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/AddJurisdiction",name:"AddJurisdiction",component:ze,beforeEnter:function(e,t,a){if(At.canAdd(e.name))return a();Pt.state.dialogError=!0,Pt.state.errorTitle="Info",Pt.state.errorColor="error",Pt.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/AddFacility",name:"AddFacility",component:Qe,beforeEnter:function(e,t,a){if(At.canAdd(e.name))return a();Pt.state.dialogError=!0,Pt.state.errorTitle="Info",Pt.state.errorColor="error",Pt.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/FacilitiesReport",name:"FacilitiesReport",component:ot,beforeEnter:function(e,t,a){if(At.canView(e.name))return a();Pt.state.dialogError=!0,Pt.state.errorTitle="Info",Pt.state.errorColor="error",Pt.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/NewFacilitiesRequestsReport",name:"NewFacilitiesRequestsReport",component:dt,props:function(e){return{action:e.query.action,requestCategory:e.query.requestCategory,requestType:e.query.requestType}},beforeEnter:function(e,t,a){if(At.canView(e.name))return a();Pt.state.dialogError=!0,Pt.state.errorTitle="Info",Pt.state.errorColor="error",Pt.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/ServicesReport",name:"ServicesReport",component:yt,beforeEnter:function(e,t,a){if(At.canView(e.name))return a();Pt.state.dialogError=!0,Pt.state.errorTitle="Info",Pt.state.errorColor="error",Pt.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/AddCodeSystem",name:"AddCodeSystem",component:St,props:function(e){return{codeSystemType:e.query.type,displayText:e.query.displayText}},beforeEnter:function(e,t,a){if(At.canAdd(e.name))return a();Pt.state.dialogError=!0,Pt.state.errorTitle="Info",Pt.state.errorColor="error",Pt.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/AddService",name:"AddService",component:Dt,beforeEnter:function(e,t,a){if(At.canAdd(e.name))return a();Pt.state.dialogError=!0,Pt.state.errorTitle="Info",Pt.state.errorColor="error",Pt.state.errorDescription="You dont have permission to access this page",a({path:t.path})}}]});Ct.beforeEach(function(e,t,a){if(Pt.state.alert.show=!1,Pt.state.auth.token||S.a.get("token")&&"null"!==S.a.get("token")&&S.a.get("userID")&&"null"!==S.a.get("userID"))a();else{if("/Login"===e.path||"/Signup"===e.path||Pt.state.config.generalConfig.authDisabled)return a();a({path:"/Login"})}});var kt=Ct;o.default.use(_.a);var Pt=new _.a.Store({state:{baseRouterViewKey:0,alert:{width:"800px",show:!1,msg:"",type:"success",dismisible:!0,transition:"scale-transition"},auth:{username:"",userID:"",role:"",token:""},levelMapping:{source1:{},source2:{}},config:{userConfig:{reconciliation:{useCSVHeader:!0}},generalConfig:{reconciliation:{parentConstraint:{enabled:!0,idAutoMatch:!0,nameAutoMatch:!1},singlePair:!1,singleDataSource:!1,fixSource2To:null,fixSource2:!1},recoProgressNotification:{enabled:!1},allowShareToAllForNonAdmin:!1,selfRegistration:{enabled:!1,requiresApproval:!1},datasetsAdditionWays:["CSV Upload","Remote Servers Sync"],datasetsAutosyncTime:"*/15 * * * *",authDisabled:!1,authMethod:"dhis2",externalAuth:{pullOrgUnits:!0,shareOrgUnits:!0,shareByOrgId:!0,datasetName:null,adminRole:null}}},signupFields:{},customSignupFields:{},recoStatus:{status:"in-progress"},recalculateScores:!1,dialogError:!1,errorTitle:"",errorDescription:"",errorColor:"primary",clientId:null,denyAccess:!0,source2Hierarchy:"",source1Hierarchy:"",uploadRunning:!1,dhis:{user:{orgId:"",orgName:""},host:"",dev:{auth:{username:"",password:""}}},dataSourcePairs:[],activePair:{source1:{},source2:{}},source1TotalAllRecords:0,source2TotalAllRecords:0,totalAllMapped:0,totalAllFlagged:0,totalAllNoMatch:0,totalAllIgnore:0,source1TotalAllNotMapped:0,source2TotalRecords:0,recoLevel:2,totalSource1Levels:"",totalSource2Levels:"",matchedContent:[],noMatchContent:[],ignoreContent:[],flagged:[],source1Parents:[],source2UnMatched:[],source1UnMatched:[],scoreResults:[],levelArray:[],scoresProgressData:{scoreDialog:!1,scoreProgressTitle:"Waiting for progress status",stage:"not final",scoreProgressPercent:null,progressType:"",scoreProgressTimer:!1,progressReqTimer:"",requestCancelled:!1,cancelTokenSource:""},scoreSavingProgressData:{percent:null,savingMatches:!1,savingProgressTimer:!1,progressReqTimer:"",requestCancelled:!1,cancelTokenSource:""},uploadProgressData:{},dataSources:[],remoteDataSources:["DHIS2","FHIR"],loadingServers:!1,dynamicProgress:!1,initializingApp:!1}});g.a.interceptors.request.use(function(e){var t=Pt.state.auth.token;return t&&(e.headers.Authorization="Bearer "+t),e},function(e){return m.a.reject(e)}),g.a.interceptors.response.use(function(e){return e},function(e){return 401===e.response.status&&(Pt.state.auth.token="",S.a.remove("token"),kt.push("login")),m.a.reject(e)});var Tt=[{component:"AddService",addTasks:["facility_registry_can_add_service"],viewTasks:[],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]},{component:"AddFacility",addTasks:["facility_registry_can_add_facility"],viewTasks:[],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]},{component:"AddJurisdiction",addTasks:["facility_registry_can_add_jurisdiction"],viewTasks:[],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]},{component:"AddCodeSystem",addTasks:["facility_registry_can_add_terminologies"],viewTasks:[],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]},{component:"ServicesReport",addTasks:[],viewTasks:["facility_registry_can_view_service"],editTasks:["facility_registry_can_edit_service"],deleteTasks:["facility_registry_can_delete_service"],approveTasks:[],rejectTasks:[]},{component:"FacilitiesReport",addTasks:[],viewTasks:["facility_registry_can_view_facility"],editTasks:["facility_registry_can_edit_facility"],deleteTasks:["facility_registry_can_delete_facility"],approveTasks:[],rejectTasks:[]},{component:"NewFacilitiesRequestsReport",addTasks:[],viewTasks:["facility_registry_can_view_new_facility_requests_report"],editTasks:["facility_registry_can_edit_new_facility_request"],deleteTasks:["facility_registry_can_delete_new_facility_request"],approveTasks:["facility_registry_can_approve_new_facility_request"],rejectTasks:["facility_registry_can_reject_new_facility_request"]},{component:"FacilitiesUpdateRequestsReport",addTasks:[],viewTasks:["facility_registry_can_view_update_facility_details_requests_report"],editTasks:["facility_registry_can_edit_update_facility_details_request"],deleteTasks:["facility_registry_can_delete_update_facility_details_request"],approveTasks:["facility_registry_can_approve_update_facility_details_requests"],rejectTasks:["facility_registry_can_reject_update_facility_details_requests"]},{component:"RequestUpdateBuildingDetails",addTasks:["facility_registry_can_request_update_of_facility_details"],viewTasks:["facility_registry_can_request_update_of_facility_details"],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]},{component:"RequestBuildingAddition",addTasks:["facility_registry_can_request_new_facility"],viewTasks:[],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]}],At={canAdd:function(e){if("Admin"===Pt.state.auth.role)return!0;var t=Pt.state.auth.tasks,a=[],r=!0,s=!1,o=void 0;try{for(var i,n=c()(Tt);!(r=(i=n.next()).done);r=!0){var l=i.value;if(l.component===e){a=l.addTasks;break}}}catch(e){s=!0,o=e}finally{try{!r&&n.return&&n.return()}finally{if(s)throw o}}if(0===a.length)return!0;var u=!1,d=!0,v=!1,p=void 0;try{for(var h,g=c()(a);!(d=(h=g.next()).done);d=!0){var f=h.value,m=!0,_=!1,y=void 0;try{for(var x,b=c()(t);!(m=(x=b.next()).done);m=!0){if(x.value.name===f){u=!0;break}}}catch(e){_=!0,y=e}finally{try{!m&&b.return&&b.return()}finally{if(_)throw y}}}}catch(e){v=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw p}}return u},canView:function(e){if("Admin"===Pt.state.auth.role)return!0;var t=Pt.state.auth.tasks,a=[],r=!0,s=!1,o=void 0;try{for(var i,n=c()(Tt);!(r=(i=n.next()).done);r=!0){var l=i.value;if(l.component===e){a=l.viewTasks;break}}}catch(e){s=!0,o=e}finally{try{!r&&n.return&&n.return()}finally{if(s)throw o}}if(0===a.length)return!0;var u=!1,d=!0,v=!1,p=void 0;try{for(var h,g=c()(a);!(d=(h=g.next()).done);d=!0){var f=h.value,m=!0,_=!1,y=void 0;try{for(var x,b=c()(t);!(m=(x=b.next()).done);m=!0){if(x.value.name===f){u=!0;break}}}catch(e){_=!0,y=e}finally{try{!m&&b.return&&b.return()}finally{if(_)throw y}}}}catch(e){v=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw p}}return u},canEdit:function(e){if("Admin"===Pt.state.auth.role)return!0;var t=Pt.state.auth.tasks,a=[],r=!0,s=!1,o=void 0;try{for(var i,n=c()(Tt);!(r=(i=n.next()).done);r=!0){var l=i.value;if(l.component===e){a=l.editTasks;break}}}catch(e){s=!0,o=e}finally{try{!r&&n.return&&n.return()}finally{if(s)throw o}}if(0===a.length)return!0;var u=!1,d=!0,v=!1,p=void 0;try{for(var h,g=c()(a);!(d=(h=g.next()).done);d=!0){var f=h.value,m=!0,_=!1,y=void 0;try{for(var x,b=c()(t);!(m=(x=b.next()).done);m=!0){if(x.value.name===f){u=!0;break}}}catch(e){_=!0,y=e}finally{try{!m&&b.return&&b.return()}finally{if(_)throw y}}}}catch(e){v=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw p}}return u},canDelete:function(e){if("Admin"===Pt.state.auth.role)return!0;var t=Pt.state.auth.tasks,a=[],r=!0,s=!1,o=void 0;try{for(var i,n=c()(Tt);!(r=(i=n.next()).done);r=!0){var l=i.value;if(l.component===e){a=l.deleteTasks;break}}}catch(e){s=!0,o=e}finally{try{!r&&n.return&&n.return()}finally{if(s)throw o}}if(0===a.length)return!0;var u=!1,d=!0,v=!1,p=void 0;try{for(var h,g=c()(a);!(d=(h=g.next()).done);d=!0){var f=h.value,m=!0,_=!1,y=void 0;try{for(var x,b=c()(t);!(m=(x=b.next()).done);m=!0){if(x.value.name===f){u=!0;break}}}catch(e){_=!0,y=e}finally{try{!m&&b.return&&b.return()}finally{if(_)throw y}}}}catch(e){v=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw p}}return u},canApprove:function(e){if("Admin"===Pt.state.auth.role)return!0;var t=Pt.state.auth.tasks,a=[],r=!0,s=!1,o=void 0;try{for(var i,n=c()(Tt);!(r=(i=n.next()).done);r=!0){var l=i.value;if(l.component===e){a=l.approveTasks;break}}}catch(e){s=!0,o=e}finally{try{!r&&n.return&&n.return()}finally{if(s)throw o}}if(0===a.length)return!0;var u=!1,d=!0,v=!1,p=void 0;try{for(var h,g=c()(a);!(d=(h=g.next()).done);d=!0){var f=h.value,m=!0,_=!1,y=void 0;try{for(var x,b=c()(t);!(m=(x=b.next()).done);m=!0){if(x.value.name===f){u=!0;break}}}catch(e){_=!0,y=e}finally{try{!m&&b.return&&b.return()}finally{if(_)throw y}}}}catch(e){v=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw p}}return u},canReject:function(e){if("Admin"===Pt.state.auth.role)return!0;var t=Pt.state.auth.tasks,a=[],r=!0,s=!1,o=void 0;try{for(var i,n=c()(Tt);!(r=(i=n.next()).done);r=!0){var l=i.value;if(l.component===e){a=l.rejectTasks;break}}}catch(e){s=!0,o=e}finally{try{!r&&n.return&&n.return()}finally{if(s)throw o}}if(0===a.length)return!0;var u=!1,d=!0,v=!1,p=void 0;try{for(var h,g=c()(a);!(d=(h=g.next()).done);d=!0){var f=h.value,m=!0,_=!1,y=void 0;try{for(var x,b=c()(t);!(m=(x=b.next()).done);m=!0){if(x.value.name===f){u=!0;break}}}catch(e){_=!0,y=e}finally{try{!m&&b.return&&b.return()}finally{if(_)throw y}}}}catch(e){v=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(v)throw p}}return u}},It={data:function(){return{tasksVerification:At}}},Rt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{attrs:{id:"menu"}},[a("li",{staticClass:"parent"},[a("a",{attrs:{href:"#"}},[a("v-icon",[e._v("spellcheck")]),e._v(" "+e._s(e.$t("App.menu.facilityRecon.msg"))+"\n    ")],1),e._v(" "),a("ul",{staticClass:"child"},[a("li",{staticClass:"parent"},[a("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"#"}},[a("v-icon",{attrs:{color:"black",left:""}},[e._v("sync")]),e._v(e._s(e.$t("App.menu.dataSourcesParent.msg"))+" "),a("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("play_arrow")])],1),e._v(" "),a("ul",{staticClass:"child"},[a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[a("v-list-tile",{attrs:{slot:"activator",to:"AddDataSources"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("cloud_upload")]),e._v("\n                  "+e._s(e.$t("App.menu.addDataSources.msg"))+"\n                ")],1)],1),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.addDataSources.tooltip")))])],1)],1),e._v(" "),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[a("v-list-tile",{attrs:{slot:"activator",to:"ViewDataSources"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("list")]),e._v(e._s(e.$t("App.menu.viewDataSources.msg"))+"\n                ")],1)],1),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.viewDataSources.tooltip")))])],1)],1)],1)]),e._v(" "),a("v-list",{class:{disabledMenu:0===Object.keys(e.$store.state.activePair.source1).length,lastMenu:!0}},[a("v-tooltip",{attrs:{right:""}},[a("v-list-tile",{attrs:{slot:"activator",to:"view",color:"white",disabled:0===Object.keys(e.$store.state.activePair.source1).length},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("list")]),e._v(e._s(e.$t("App.menu.view.msg"))+"\n            ")],1)],1),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.view.tooltip")))])],1)],1),e._v(" "),a("li",{staticClass:"parent"},[a("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"#"}},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("compare_arrows")]),e._v(e._s(e.$t("App.menu.reconcile.msg"))+" "),a("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("play_arrow")])],1),e._v(" "),a("ul",{staticClass:"child"},[a("v-list",{class:{disabledMenu:e.$store.state.dataSources.length<=1||e.$store.state.dataSourcePairs.length<=0,lastMenu:!0}},[a("v-tooltip",{attrs:{right:""}},[a("v-list-tile",{attrs:{slot:"activator",to:"dataSourcesPair",disabled:e.$store.state.dataSources.length<=1||e.$store.state.dataSourcePairs.length<=0},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("filter_2")]),e._v(e._s(e.$t("App.menu.createPair.msg"))+"\n                ")],1)],1),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.createPair.tooltip")))])],1)],1),e._v(" "),a("v-list",{class:{disabledMenu:0===Object.keys(e.$store.state.activePair.source1).length,lastMenu:!0}},[a("v-tooltip",{attrs:{right:""}},[a("v-list-tile",{attrs:{slot:"activator",to:"scores",disabled:0===Object.keys(e.$store.state.activePair.source1).length},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("find_in_page")]),e._v(e._s(e.$t("App.menu.reconcile.msg"))+"\n                ")],1)],1),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.reconcile.tooltip")))])],1)],1),e._v(" "),a("v-list",{class:{disabledMenu:0===Object.keys(e.$store.state.activePair.source1).length,lastMenu:!0}},[a("v-tooltip",{attrs:{right:""}},[a("v-list-tile",{attrs:{slot:"activator",to:"recoStatus",disabled:0===Object.keys(e.$store.state.activePair.source1).length},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("dashboard")]),e._v(" "+e._s(e.$t("App.menu.recoStatus.msg"))+"\n                ")],1)],1),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.recoStatus.tooltip")))])],1)],1)],1)])],1)]),e._v(" "),a("li",{staticClass:"parent"},[a("a",{attrs:{href:"#"}},[a("v-icon",[e._v("location_on")]),e._v(e._s(e.$t("App.menu.facilityRegistry.msg"))+"\n    ")],1),e._v(" "),a("ul",{staticClass:"child"},[e.tasksVerification.canAdd("AddJurisdiction")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[a("v-list-tile",{attrs:{slot:"activator",to:"AddJurisdiction"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("home_work")]),e._v(e._s(e.$t("App.menu.addJurisdiction.msg"))+"\n            ")],1)],1),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.addJurisdiction.tooltip")))])],1)],1):e._e(),e._v(" "),e.tasksVerification.canAdd("AddFacility")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[a("v-list-tile",{attrs:{slot:"activator",to:"AddFacility"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("house")]),e._v(e._s(e.$t("App.menu.addFacility.msg"))+"\n            ")],1)],1),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.addFacility.tooltip")))])],1)],1):e._e(),e._v(" "),e.tasksVerification.canAdd("AddService")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[a("v-list-tile",{attrs:{slot:"activator",to:"AddService"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("room_service")]),e._v(e._s(e.$t("App.menu.addService.msg"))+"\n            ")],1)],1),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.addService.tooltip")))])],1)],1):e._e(),e._v(" "),e.tasksVerification.canAdd("AddCodeSystem")?a("li",{staticClass:"parent"},[a("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"#"}},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("add")]),e._v("\n          "+e._s(e.$t("App.menu.healthServiceTerminologies.msg"))+"\n          "),a("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("play_arrow")])],1),e._v(" "),a("ul",{staticClass:"child"},[a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[e.tasksVerification.canAdd("AddCodeSystem")?a("v-list-tile",{attrs:{slot:"activator",to:"/AddCodeSystem?type=serviceCategories&displayText=Service Categorie"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("add")]),e._v(e._s(e.$t("App.menu.addServiceCategory.msg"))+"\n                ")],1)],1):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.addServiceCategory.tooltip")))])],1)],1),e._v(" "),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[e.tasksVerification.canAdd("AddCodeSystem")?a("v-list-tile",{attrs:{slot:"activator",to:"/AddCodeSystem?type=serviceTypes&displayText=Service Type"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("add")]),e._v(e._s(e.$t("App.menu.addServiceType.msg"))+"\n                ")],1)],1):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.addServiceType.tooltip")))])],1)],1),e._v(" "),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[e.tasksVerification.canAdd("AddCodeSystem")?a("v-list-tile",{attrs:{slot:"activator",to:"/AddCodeSystem?type=specialties&displayText=Specialty"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("add")]),e._v(e._s(e.$t("App.menu.addServiceSpecialty.msg"))+"\n                ")],1)],1):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.addServiceSpecialty.tooltip")))])],1)],1),e._v(" "),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[e.tasksVerification.canAdd("AddCodeSystem")?a("v-list-tile",{attrs:{slot:"activator",to:"/AddCodeSystem?type=serviceEligibilities&displayText=Service Eligibility"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("add")]),e._v(e._s(e.$t("App.menu.addServiceEligibility.msg"))+"\n                ")],1)],1):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.addServiceEligibility.tooltip")))])],1)],1),e._v(" "),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[e.tasksVerification.canAdd("AddCodeSystem")?a("v-list-tile",{attrs:{slot:"activator",to:"/AddCodeSystem?type=languages&displayText=Language"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("add")]),e._v(e._s(e.$t("App.menu.addLanguage.msg"))+"\n                ")],1)],1):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.addLanguage.tooltip")))])],1)],1),e._v(" "),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[e.tasksVerification.canAdd("AddCodeSystem")?a("v-list-tile",{attrs:{slot:"activator",to:"/AddCodeSystem?type=referralMethods&displayText=Referral Methods"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("add")]),e._v(e._s(e.$t("App.menu.addReferralMethod.msg"))+"\n                ")],1)],1):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.addReferralMethod.tooltip")))])],1)],1),e._v(" "),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[e.tasksVerification.canAdd("AddCodeSystem")?a("v-list-tile",{attrs:{slot:"activator",to:"/AddCodeSystem?type=programs&displayText=Program"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("add")]),e._v(e._s(e.$t("App.menu.addProgram.msg"))+"\n                ")],1)],1):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.addProgram.tooltip")))])],1)],1),e._v(" "),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[e.tasksVerification.canAdd("AddCodeSystem")?a("v-list-tile",{attrs:{slot:"activator",to:"/AddCodeSystem?type=serviceCharacteristics&displayText=Service Characteristics"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("add")]),e._v(e._s(e.$t("App.menu.addCharacteristic.msg"))+"\n                ")],1)],1):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.addCharacteristic.tooltip")))])],1)],1),e._v(" "),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[e.tasksVerification.canAdd("AddCodeSystem")?a("v-list-tile",{attrs:{slot:"activator",to:"/AddCodeSystem?type=serviceProvisionConditions&displayText=Service Provision Condition"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("add")]),e._v(e._s(e.$t("App.menu.addServiceProvisionCondition.msg"))+"\n                ")],1)],1):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.addServiceProvisionCondition.tooltip")))])],1)],1)],1)]):e._e(),e._v(" "),a("li",{staticClass:"parent"},[a("a",{attrs:{href:"#"}},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("call_made")]),e._v("\n          "+e._s(e.$t("App.menu.facilityRequests.msg"))+"\n          "),a("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("play_arrow")])],1),e._v(" "),a("ul",{staticClass:"child"},[a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[e.tasksVerification.canAdd("RequestBuildingAddition")?a("v-list-tile",{attrs:{slot:"activator",to:"RequestBuildingAddition"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("call_made")]),e._v(e._s(e.$t("App.menu.requestNewFacility.msg"))+"\n                ")],1)],1):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.requestNewFacility.tooltip")))])],1)],1),e._v(" "),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[e.tasksVerification.canAdd("RequestUpdateBuildingDetails")?a("v-list-tile",{attrs:{slot:"activator",to:"RequestUpdateBuildingDetails"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("call_made")]),e._v(e._s(e.$t("App.menu.requestUpdateFacility.msg"))+"\n                ")],1)],1):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.requestUpdateFacility.tooltip")))])],1)],1)],1)]),e._v(" "),a("li",{staticClass:"parent"},[a("a",{attrs:{href:"#"}},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("list")]),e._v("\n          "+e._s(e.$t("App.menu.facilityRegReports.msg"))+"\n          "),a("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("play_arrow")])],1),e._v(" "),a("ul",{staticClass:"child"},[e.tasksVerification.canView("FacilitiesReport")?a("v-list",{staticClass:"lastMenu"},[a("v-list-tile",{attrs:{to:"FacilitiesReport"}},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("list")]),e._v(e._s(e.$t("App.menu.facilitiesReport.msg"))+"\n              ")],1)],1)],1):e._e(),e._v(" "),e.tasksVerification.canView("NewFacilitiesRequestsReport")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[a("v-list-tile",{attrs:{slot:"activator",to:"NewFacilitiesRequestsReport"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("list")]),e._v(e._s(e.$t("App.menu.newFacilitiesRequestsReport.msg"))+"\n                ")],1)],1),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.newFacilitiesRequestsReport.tooltip")))])],1)],1):e._e(),e._v(" "),e.tasksVerification.canView("FacilitiesUpdateRequestsReport")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},[a("v-list-tile",{attrs:{slot:"activator",to:"FacilitiesUpdateRequestsReport"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("list")]),e._v(e._s(e.$t("App.menu.facilitiesUpdateRequestsReport.msg"))+"\n                ")],1)],1),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.facilitiesUpdateRequestsReport.tooltip")))])],1)],1):e._e(),e._v(" "),e.tasksVerification.canView("ServicesReport")?a("v-list",{staticClass:"lastMenu"},[a("v-list-tile",{attrs:{to:"ServicesReport"}},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("list")]),e._v(e._s(e.$t("App.menu.servicesReport.msg"))+"\n              ")],1)],1)],1):e._e()],1)])],1)]),e._v(" "),a("li",{staticClass:"parent"},[a("a",{attrs:{href:"#"}},[a("v-icon",[e._v("perm_identity")]),e._v(e._s(e.$t("App.menu.account.msg"))+"\n    ")],1),e._v(" "),a("ul",{staticClass:"child"},[a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},["Admin"===e.$store.state.auth.role?a("v-list-tile",{attrs:{slot:"activator",to:"addUser"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("perm_identity")]),e._v(e._s(e.$t("App.menu.addUser.msg"))+"\n            ")],1)],1):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.addUser.tooltip")))])],1)],1),e._v(" "),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},["Admin"===e.$store.state.auth.role?a("v-list-tile",{attrs:{slot:"activator",to:"usersList"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("perm_identity")]),e._v(e._s(e.$t("App.menu.usersList.msg"))+"\n            ")],1)],1):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.usersList.tooltip")))])],1)],1),e._v(" "),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""}},["Admin"===e.$store.state.auth.role?a("v-list-tile",{attrs:{slot:"activator",to:"rolesManagement"},slot:"activator"},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("perm_identity")]),e._v(e._s(e.$t("App.menu.rolesManagement.msg"))+"\n            ")],1)],1):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("App.menu.rolesManagement.tooltip")))])],1)],1),e._v(" "),a("v-list",{staticClass:"lastMenu"},[a("v-list-tile",{attrs:{to:"changePassword"}},[a("v-list-tile-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("perm_identity")]),e._v(e._s(e.$t("App.menu.changePassword.msg"))+"\n          ")],1)],1)],1)],1)]),e._v(" "),a("li",{staticClass:"parent"},[e.$store.state.denyAccess?e._e():a("v-list-tile",{staticClass:"newClass",attrs:{slot:"activator",to:"configure"},slot:"activator"},[a("v-icon",[e._v("settings")]),e._v(" "+e._s(e.$t("App.menu.configure.msg"))+"\n    ")],1)],1),e._v(" "),a("li",{staticClass:"parent"},[e.$store.state.denyAccess||e.$store.state.config.generalConfig.authDisabled?e._e():a("v-list-tile",{staticClass:"newClass",attrs:{slot:"activator",to:"logout"},slot:"activator"},[a("v-list-tile-title",[a("v-icon",[e._v("logout")]),e._v(" "+e._s(e.$t("App.menu.logout.msg"))+"\n      ")],1)],1)],1)])},staticRenderFns:[]};var Ft={mixins:[Ne,oe,U],props:["generalConfig"],data:function(){return{items:[{title:"Click Me"},{title:"Click Me"},{title:"Click Me"},{title:"Click Me 2"}],fixed:!1,title:this.$t("App.title"),locale:"en",locales:[{text:"English",value:"en"},{text:"French",value:"fr"}],activeDataSourcePair:{},tasksVerification:At}},watch:{locale:function(e){this.$i18n.locale=e}},methods:{closeDialogError:function(){this.$store.state.errorColor="primary",this.$store.state.dialogError=!1},renderInitialPage:function(){var e=this,t=this.$store.state.activePair.source1.name,a=this.$store.state.activePair.source2.name;if(t&&a||!(this.$store.state.dataSources.length>1||this.$store.state.dataSourcePairs.length>0))if(t&&a){t=this.toTitleCase(t),a=this.toTitleCase(a);var r=this.getDatasourceOwner();g.a.get("/uploadAvailable/"+t+"/"+a+"/"+r.source1Owner+"/"+r.source2Owner).then(function(t){e.$store.state.initializingApp=!1,t.data.dataUploaded?(e.$store.state.recalculateScores=!0,e.$router.push({name:"FacilityReconScores"})):e.$router.push({name:"AddDataSources"})}).catch(function(t){console.log(t),e.$router.push({name:"AddDataSources"})})}else this.$router.push({name:"AddDataSources"});else this.$router.push({name:"DataSourcesPair"})},getTotalLevels:function(){var e=this,t=this.$store.state.activePair.source1.name,a=this.$store.state.activePair.source2.name;if(!t||!a)return this.$store.state.totalSource1Levels=5,this.$store.state.totalSource2Levels=5,this.$store.state.initializingApp=!1,this.renderInitialPage(),this.$store.state.recoLevel=2,void this.getRecoStatus();t=this.toTitleCase(t),a=this.toTitleCase(a);var r=s()(this.getDatasourceOwner()),o=s()(this.getLimitOrgIdOnActivePair());g.a.get("/countLevels/"+t+"/"+a+"/"+r+"/"+o).then(function(t){e.$store.state.levelMapping.source1=t.data.levelMapping.levelMapping1,e.$store.state.levelMapping.source2=t.data.levelMapping.levelMapping2,e.$store.state.totalSource1Levels=t.data.totalSource1Levels,e.$store.state.totalSource2Levels=t.data.totalSource2Levels,e.$store.state.recoLevel=2,e.renderInitialPage(),e.getRecoStatus()}).catch(function(t){console.log(t),e.$store.state.recoLevel=2,e.renderInitialPage(),e.getRecoStatus()})},getRecoStatus:function(){var e=this;if(0!==p()(this.$store.state.activePair.source1).length&&0!==p()(this.$store.state.activePair.source2).length){var t=this.toTitleCase(this.$store.state.activePair.source1.name),a=this.toTitleCase(this.$store.state.activePair.source2.name),r=this.$store.state.activePair.userID._id;g.a.get("/recoStatus/"+t+"/"+a+"/"+r).then(function(s){s.data.status?e.$store.state.recoStatus=s.data.status:g.a.get("/markRecoUnDone/"+t+"/"+a+"/"+r).then(function(t){t.data.status&&(e.$store.state.recoStatus=t.data.status)}).catch(function(e){console.log(e.response.data.error)})}).catch(function(e){console.log(e.response.data.error)})}},getDataSources:function(){var e=this;this.$store.state.loadingServers=!0,this.$store.state.dataSources=[];var t=this.$store.state.auth.userID,a=this.$store.state.auth.role,r=this.$store.state.dhis.user.orgId;g.a.get("/getDataSources/"+t+"/"+a+"/"+r).then(function(t){e.$store.state.loadingServers=!1,e.$store.state.dataSources=t.data.servers,e.getDataSourcePair()}).catch(function(t){e.$store.state.loadingServers=!1,console.log(s()(t))})},getUserConfig:function(){var e=this,t=this.$store.state.auth.userID;g.a.get("/getUserConfig/"+t).then(function(t){t.data&&(e.$store.state.config.userConfig=d()({},e.$store.state.config.userConfig,t.data)),e.getGeneralConfig(function(){e.getDataSources()})}).catch(function(){e.getGeneralConfig(function(){e.getDataSources()})})},getDataSourcePair:function(){var e=this;this.$store.state.activePair.source1={},this.$store.state.activePair.source2={};var t=this.$store.state.auth.userID;this.$store.state.initializingApp||(this.$store.state.initializingApp=!0),g.a.get("/getDataSourcePair/"+t+"/"+this.$store.state.dhis.user.orgId).then(function(t){e.$store.state.dataSourcePairs=t.data;var a=e.getActiveDataSourcePair();p()(a).length>0&&(e.$store.state.activePair.source1.id=a.source1._id,e.$store.state.activePair.source1.name=a.source1.name,e.$store.state.activePair.source1.userID=a.source1.userID,e.$store.state.activePair.source2.id=a.source2._id,e.$store.state.activePair.source2.name=a.source2.name,e.$store.state.activePair.source2.userID=a.source2.userID,e.$store.state.activePair._id=a._id,e.$store.state.activePair.shared=a.shared,e.$store.state.activePair.userID=a.userID),e.autoActivateDatasourcePair(function(t){t||e.autoCreateDatasourcePair()}),e.getTotalLevels()}).catch(function(t){console.log(s()(t)),e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription="An error occured while getting data source pairs, reload the app to retry",e.getTotalLevels()})},autoCreateDatasourcePair:function(){var e=this;if(this.$store.state.config.generalConfig.reconciliation.singleDataSource){var t=function(){if(p()(e.$store.state.activePair.source1).length>0)return{v:!1};var t=e.$store.state.config.generalConfig.reconciliation.fixSource2To,a={},r={},s=e.$store.state.auth.userID,o=e.$store.state.dhis.user.orgId,i=[],n=!0,l=!1,u=void 0;try{for(var d,v=c()(e.$store.state.dataSources);!(n=(d=v.next()).done);n=!0){var h=d.value,g=h.shared.users.find(function(e){return e._id===s}),f=h.owner.id===s,m=!0===h.shareToAll.activated,_=!1;h.owner.orgId&&h.owner.orgId===o&&(_=!0),(f||g||m||_)&&(h._id===t?r=h:a=h,i.push(h))}}catch(e){l=!0,u=e}finally{try{!n&&v.return&&v.return()}finally{if(l)throw u}}if(i.length>2||0===p()(a).length||0===p()(r).length)return{v:!1};e.createDatasourcePair(a,r)}();if("object"===(void 0===t?"undefined":n()(t)))return t.v}},autoActivateDatasourcePair:function(e){if(p()(this.$store.state.activePair.source1).length>0){return e(!1)}if(this.$store.state.dataSourcePairs.length>1||0===this.$store.state.dataSourcePairs.length){return e(!1)}if(this.$store.state.dhis.user.orgId&&this.$store.state.config.generalConfig.reconciliation.singlePair){this.$store.state.dataSourcePairs.status="active",this.activeDataSourcePair=this.$store.state.dataSourcePairs[0];e(!0),this.activatePair()}else{e(!1)}}},computed:{dhisLink:function(){return!!this.$store.state.dhis.user.orgId&&window.location.protocol+"//"+window.location.hostname}},components:{appMenu:a("VU/8")(It,Rt,!1,function(e){a("WkBR")},"data-v-2bc01564",null).exports},created:function(){var e=this;this.$router.push({name:"AddDataSources"}),this.$store.state.config.generalConfig=this.generalConfig,S.a.get("token")&&S.a.get("userID")&&(this.$store.state.auth.token=S.a.get("token"),this.$store.state.auth.userID=S.a.get("userID"),this.$store.state.auth.username=S.a.get("username"),this.$store.state.auth.role=S.a.get("role"),this.$store.state.auth.tasks=JSON.parse(S.a.get("tasks")),this.$store.state.signupFields=S.a.get("signupFields"),this.$store.state.customSignupFields=S.a.get("customSignupFields"),this.$store.state.config.generalConfig.authDisabled?this.$router.push("login"):g.a.get("/isTokenActive/").then(function(t){e.$store.state.clientId=$.a.v4(),e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,e.getUserConfig()})),Gt.$on("refreshApp",function(){e.getDataSources()}),Gt.$on("recalculateScores",function(){e.$store.state.recalculateScores=!0,e.$router.push({name:"FacilityReconScores"})}),Gt.$on("getDataSources",function(){e.getDataSources()}),Gt.$on("getConfig",function(){e.getUserConfig()}),Gt.$on("getGeneralConfig",function(){e.getGeneralConfig()}),Gt.$on("getDataSourcePair",function(){e.getDataSourcePair()})},name:"App"},Mt={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-toolbar",{attrs:{color:"primary",dark:"",app:""}},[r("v-toolbar-title",{domProps:{textContent:e._s(e.title)}}),e._v(" "),r("v-spacer"),e._v(" "),e.$store.state.auth.token||e.$store.state.config.generalConfig.authDisabled?r("v-toolbar-items",[e.dhisLink?r("v-btn",{attrs:{flat:"",href:e.dhisLink}},[r("img",{attrs:{src:a("wxqd")}})]):e._e(),e._v(" "),r("appMenu")],1):e._e(),e._v(" "),r("v-spacer"),e._v(" "),r("v-toolbar-items")],1),e._v(" "),r("v-content",[r("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.$store.state.dynamicProgress,callback:function(t){e.$set(e.$store.state,"dynamicProgress",t)},expression:"$store.state.dynamicProgress"}},[r("v-card",{attrs:{color:"primary",dark:""}},[r("v-card-text",[e._v("\n          "+e._s(e.$store.state.progressTitle)+"\n          "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.$store.state.dialogError,callback:function(t){e.$set(e.$store.state,"dialogError",t)},expression:"$store.state.dialogError"}},[r("v-card",[r("v-toolbar",{attrs:{color:e.$store.state.errorColor,dark:""}},[r("v-toolbar-title",[e._v("\n            "+e._s(e.$store.state.errorTitle)+"\n          ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.$store.state.dialogError=!1}}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[e._v("\n          "+e._s(e.$store.state.errorDescription)+"\n        ")]),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){return e.closeDialogError(t)}}},[e._v("Ok")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.$store.state.initializingApp,callback:function(t){e.$set(e.$store.state,"initializingApp",t)},expression:"$store.state.initializingApp"}},[r("v-card",{attrs:{color:"primary",dark:""}},[r("v-card-text",[e._v("\n          "+e._s(e.$t("App.initApp"))+"\n          "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:""}},[Object.keys(e.$store.state.activePair.source1).length>0&&!e.$store.state.denyAccess?[e._v("\n          "+e._s(e.$t("App.source"))+" 1: "),r("b",[e._v(e._s(e.$store.state.activePair.source1.name))]),e._v(",   "+e._s(e.$t("App.source"))+" 2: "),r("b",[e._v(e._s(e.$store.state.activePair.source2.name))]),e._v(",\n            Recon Status: "),"in-progress"===e.$store.state.recoStatus?r("v-icon",{attrs:{small:""}},[e._v("lock_open")]):r("v-icon",{attrs:{small:""}},[e._v("lock")]),e._v(" "),r("b",[e._v(e._s(e.$store.state.recoStatus))])]:e._e()],2),e._v(" "),r("v-spacer"),e._v(" "),r("v-flex",{attrs:{xs1:""}},[r("v-select",{attrs:{items:e.locales},model:{value:e.locale,callback:function(t){e.locale=t},expression:"locale"}})],1)],1),e._v(" "),r("v-alert",{style:{width:e.$store.state.alert.width},attrs:{type:e.$store.state.alert.type,dismissible:e.$store.state.alert.dismisible,transition:e.$store.state.alert.transition},model:{value:e.$store.state.alert.show,callback:function(t){e.$set(e.$store.state.alert,"show",t)},expression:"$store.state.alert.show"}},[e._v("\n      "+e._s(e.$store.state.alert.msg)+"\n    ")]),e._v(" "),r("router-view",{key:"baseRouterViewKey"+e.$store.state.baseRouterViewKey})],1),e._v(" "),r("v-footer",{attrs:{dark:"",color:"primary",fixed:e.fixed,app:""}})],1)},staticRenderFns:[]},Lt=a("VU/8")(Ft,Mt,!1,null,null,null).exports,Ut=a("3EgV"),Et=a.n(Ut),Nt=a("ESwS"),qt=a.n(Nt),Ot=(a("7zck"),a("J/Fn")),Ht=a.n(Ot),jt=a("TXmL");o.default.use(jt.a);var Vt,Bt,Wt=new jt.a({locale:Object({NODE_ENV:"production",BACKEND_SERVER:""}).VUE_APP_I18N_LOCALE||"en",fallbackLocale:Object({NODE_ENV:"production",BACKEND_SERVER:""}).VUE_APP_I18N_FALLBACK_LOCALE||"en",messages:(Vt=a("hFeb"),Bt={},Vt.keys().forEach(function(e){var t=e.match(/([A-Za-z0-9-_]+)\./i);if(t&&t.length>1){var a=t[1];Bt[a]=Vt(e)}}),Bt)});a.d(t,"eventBus",function(){return Gt}),o.default.use(qt.a),o.default.use(Et.a,{theme:{primary:"#3F51B5",secondary:"#7986CB",accent:"#9c27b0",error:"#f44336",warning:"#ffeb3b",info:"#2196f3",success:"#4caf50"}}),o.default.config.productionTip=!1;var Gt=new o.default;function zt(e){var t=location.href.split("api").shift();g.a.post(t+"api/dataStore/GOFR/config",e)}!function(e){if(!(location.href.split("api").length>=2))return e(!1);var t=location.href.split("api").shift();g.a.get(t+"api/dataStore/GOFR/config").then(function(t){e(t.data),t.data.BACKEND_SERVER||zt({BACKEND_SERVER:Ht.a.BACKEND_SERVER})}).catch(function(t){return console.log(s()(t)),zt({BACKEND_SERVER:Ht.a.BACKEND_SERVER}),e(!1)})}(function(e){e&&e.BACKEND_SERVER?g.a.defaults.baseURL=e.BACKEND_SERVER:("."===Ht.a.BACKEND_HOST&&(Ht.a.BACKEND_HOST=window.location.hostname,Ht.a.BACKEND_PROTOCOL=window.location.protocol.replace(":","")),g.a.defaults.baseURL=Ht.a.BACKEND_PROTOCOL+"://"+Ht.a.BACKEND_HOST+":"+Ht.a.BACKEND_PORT);var t=s()(Pt.state.config.generalConfig);g.a.get("/getGeneralConfig?defaultGenerConfig="+t).then(function(e){e||(e.data={}),new o.default({el:"#app",router:kt,store:Pt,components:{App:Lt},data:function(){return{config:e.data}},i18n:Wt,template:'<App :generalConfig="config" />'})})})},NuBg:function(e,t){e.exports={App:{title:"Global Open Facility Registry",initApp:"Initializing App",source:"Source",menu:{facilityRecon:{msg:"Facility Reconciliation",tooltip:"Facility Reconciliation"},createPair:{msg:"Create and Manage Data Source Pair",tooltip:"Select data sources to start mathing"},reconcile:{msg:"Reconcile",tooltip:"Perform location matching of your selected data sources"},recoStatus:{msg:"Reconciliation Status",tooltip:"Matching Status"},facilityRegistry:{msg:"Facility Registry",tooltip:"Facility Registry"},createOrgHier:{msg:"Create Hierarchy",tooltip:"Add Facility And Jurisdition"},healthService:{msg:"Healthcare Services",tooltip:"Add services and define service terminologies"},healthServiceTerminologies:{msg:"Add Terminologies",tooltip:"Add service based terminologies"},facilityRegReports:{msg:"Reports",tooltip:"View Reports"},addJurisdiction:{msg:"Add Jurisdiction",tooltip:"Add Counties/Districts"},addFacility:{msg:"Add Facility",tooltip:"Add Facility"},facilitiesReport:{msg:"Facilities",tooltip:"Facilities"},servicesReport:{msg:"Services",tooltip:"Services"},newFacilitiesRequestsReport:{msg:"New Facilities Requests",tooltip:"Report on requests made to create new facilities"},facilitiesUpdateRequestsReport:{msg:"Requested Facilities Updates",tooltip:"Report about requests to update details of facilities"},facilityRequests:{msg:"Requests",tooltip:"Send requests about addition of new facilities or update of facility details"},requestNewFacility:{msg:"Request Addition of New Facility",tooltip:"Request Addition of New Facility"},requestUpdateFacility:{msg:"Request Update of Facility Details",tooltip:"Request Update of Facility Details"},addServiceType:{msg:"Add Service Type",tooltip:"Add Service Type"},addServiceCategory:{msg:"Add Service Category",tooltip:"Add Service Category"},addServiceSpecialty:{msg:"Add Service Specialty",tooltip:"Add Service Specialty"},addServiceEligibility:{msg:"Add Service Eligibility",tooltip:"Add Service Eligibility"},addLanguage:{msg:"Add Language",tooltip:"Add Language"},addReferralMethod:{msg:"Add Referral Methods",tooltip:"Add Referral Methods"},addProgram:{msg:"Add Programs",tooltip:"Add Programs"},addCharacteristic:{msg:"Add Characteristics",tooltip:"Add Characteristics"},addServiceProvisionCondition:{msg:"Add Service Provision Condition",tooltip:"Add Service Provision Condition"},addService:{msg:"Add Service",tooltip:"Add Service offered by health facilities"},services:{msg:"Services",tooltip:"Services"},archive:{msg:"Archived Uploads",tooltip:"Access to backup data"},account:{msg:"Account"},addUser:{msg:"Add User",tooltip:"Create new user account"},usersList:{msg:"Users List",tooltip:"Manage user accounts"},rolesManagement:{msg:"Roles Management",tooltip:"Add or remove specific tasks on roles"},changePassword:{msg:"Change Password"},logout:{msg:"Logout"},configure:{msg:"configure System"},dataSourcesParent:{msg:"Data Sources",tooltip:"Upload CSV data and add remote DHIS2 or FHIR servers"},viewDataSources:{msg:"View Data Sources",tooltip:"View datasets that can be used for reconciliation"},addDataSources:{msg:"Add Data Sources",tooltip:"Add a new dataset that you want to reconcile"},view:{msg:"View",tooltip:"Explore data sources contents"},recoParent:{msg:"Reconcile"}}}}},VPxq:function(e,t){},WkBR:function(e,t){},ZVZp:function(e,t){},hFeb:function(e,t,a){var r={"./en.json":"NuBg","./fr.json":"oBab"};function s(e){return a(o(e))}function o(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}s.keys=function(){return Object.keys(r)},s.resolve=o,e.exports=s,s.id="hFeb"},oBab:function(e,t){e.exports={App:{title:"Facility Reconciliation",initApp:"Initialisation de l'App",source:"la source",menu:{facilityRecon:{msg:"rapprochement des installations",tooltip:"rapprochement des installations"},createPair:{msg:"Crer et grer une paire de sources de donnes",tooltip:"Select data sources to start mathing"},reconcile:{msg:"Rconcilier",tooltip:"Effectuer une correspondance d'emplacement de vos sources de donnes slectionnes"},recoStatus:{msg:"tat de rapprochement",tooltip:"Statut de correspondance"},facilityRegistry:{msg:"registre des installations",tooltip:"registre des installations"},createOrgHier:{msg:"Crer une hirarchie",tooltip:"Ajouter une installation et une dition"},healthService:{msg:"Services de sant",tooltip:"Ajouter des services et dfinir des terminologies de service"},healthServiceTerminologies:{msg:"Ajouter des terminologies",tooltip:"Ajouter des terminologies bases sur le service"},facilityRegReports:{msg:"Rapports",tooltip:"Voir les rapports"},addJurisdiction:{msg:"Ajouter une juridiction",tooltip:"Ajouter des comts / districts"},addFacility:{msg:"Add Facility",tooltip:"Add Facility"},facilitiesReport:{msg:"Facilities Report",tooltip:"Facilities Report"},servicesReport:{msg:"Services Report",tooltip:"Services Report"},facilitiesRequestsReport:{msg:"Facilities Requests Report",tooltip:"Report on requests made to create new facilities"},facilitiesUpdateRequestsReport:{msg:"Facilities Updates Requests Report",tooltip:"Report about requests to update details of facilities"},requestNewFacility:{msg:"Request Addition of New Facility",tooltip:"Request Addition of New Facility"},requestUpdateFacility:{msg:"Request Update of Facility Details",tooltip:"Request Update of Facility Details"},addServiceType:{msg:"Add Service Type",tooltip:"Add Service Type"},addServiceCategory:{msg:"Add Service Category",tooltip:"Add Service Category"},addServiceSpecialty:{msg:"Add Service Specialty",tooltip:"Add Service Specialty"},addServiceEligibility:{msg:"Add Service Eligibility",tooltip:"Add Service Eligibility"},addLanguage:{msg:"Add Language",tooltip:"Add Language"},addReferralMethod:{msg:"Add Referral Methods",tooltip:"Add Referral Methods"},addProgram:{msg:"Add Programs",tooltip:"Add Programs"},addCharacteristic:{msg:"Add Characteristics",tooltip:"Add Characteristics"},addServiceProvisionCondition:{msg:"Add Service Provision Condition",tooltip:"Add Service Provision Condition"},addService:{msg:"Ajouter un service",tooltip:"Ajouter le service offert par les tablissements de sant"},services:{msg:"Prestations de service",tooltip:"Prestations de service"},archive:{msg:"Tlchargements archivs",tooltip:"Accs aux donnes de sauvegarde"},account:{msg:"Compte"},addUser:{msg:"Ajouter un utilisateur",tooltip:"Crer un nouveau compte d'utilisateur"},usersList:{msg:"Liste des utilisateurs",tooltip:"Grer les comptes d'utilisateurs"},rolesManagement:{msg:"Gestion des rles",tooltip:"Ajouter ou supprimer des tches spcifiques sur les rles"},changePassword:{msg:"Changer le mot de passe"},logout:{msg:"Connectez - Out"},configure:{msg:"configurer le systme"},dataSourcesParent:{msg:"Les sources de donnes",tooltip:"Tlcharger des donnes CSV et ajouter des serveurs DHIS2 ou FHIR distants"},viewDataSources:{msg:"Afficher les sources de donnes",tooltip:"Afficher les jeux de donnes pouvant tre utiliss pour la rconciliation"},addDataSources:{msg:"Ajouter des sources de donnes",tooltip:"Ajouter un nouveau jeu de donnes que vous souhaitez rconcilier"},view:{msg:"Vue",tooltip:"Explorer le contenu des sources de donnes"},recoParent:{msg:"Rconcilier"}}}}},uslO:function(e,t,a){var r={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-SG":"oYA3","./en-SG.js":"oYA3","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function s(e){return a(o(e))}function o(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}s.keys=function(){return Object.keys(r)},s.resolve=o,e.exports=s,s.id="uslO"},wxqd:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEMAAAAbCAYAAAAnFzLpAAAGGklEQVRYR+1YaVCTVxQ9BBLWEBYRGhAjFPetVRRoQVnFZRQtYq1Tl6kzij/q2k7dZtTSxW3sVGeqVtHOuLXQYnFBFscNFwqIYikKRRkpq2GRGJCEJJ37RV6SJhBQ63Qs59/7ct9795137vJi4bNktwa94Biw6CVDp4ReMvSiopeMXjJMJ8leZTyPMoQ2AhxePoNNzbx9H3vP5bPxByHD8V7gEDb++MA5VNbLelSnlkaPgf+bYtyrrMfe9Hw0t7T1aP6LGndbGc72NsjbuZjt92N2EdYducDGa2ICER89ho2jNh1FWU1jt/0LGOiJo6tmMvsvk7NxMOtWt+ebMrQSCOAt8YWnxAcOIhFsbe2gULShqaEeTVIp7v1+G0qFjvD/DBmerkJcTJgPnoUFd66l350Fqe954SXxwdtBwbC2sel0CfkTGa5lZaCpQdqzPuPfVgZ5493HEWO4MJHijwqtg88De6EQkTFx4POt2HSNRoMnzY9hLxSBx9MSTmh72obUYz8A0Jhuuuhy+rs5QWRnzcXvU2U7BFaWKN4T3+0wCV57GFWNT7ib9vVwhoOtAA8fPUa9rNXk+cjO3oavc1LZDkW72sjWVmAFD2cHuDnaQdGuwqPmFtQ2ytGuNrR18xAjZNJUtLbIUZh3AzUVFWhvV4LPFyAwLBLunl5s7Utpp1FXXWlMBsX9ssljYWetdUyl1iCnpBKrEjNwZuNcuAptue/mcsa4Tw6C8siMcYNgzbdkG9/9S4otP13h1tSHv58YJ1bPYp8SkrJx6LwuZ0j6irByegCiRvtwF6MPeZsSV4oeYn/GTdwur2U/iVxcIWtqglqtMrAXe0vwTsQk9u1WznWUFhUakrF1QThi9SqC/gq1TXLwrSzh4qCNQXNkFJbXYaSkr0kV0I1OSzhhkGC7IoMuIHX9+/Bwsu80ajQaYMrnx1BS1WA2siR+A+EfHMrsLpxNhbSmWkfGiP59cXJtHDMg2R2/XISymgYM8eqD2KChsNSLNXNk0EJ0S2fySiGys0Hcu0M5aXfgdF4plh9IZ+OuyKALoovqwL70m0i7+SccbARcCIaPHIBWhRLL9qWZJYJnyUPE9FiInJ052xa5HGnJx6FWqXRk7FwUiZjxg9hiaw5nIeXGXTaODRqCrfN1DpkjI7+sGnN3/sKFGYGcztg0j61HZZfKbwe6ImNR2ChsiAtmtt9nFmBHynWjPGGWCVhg/IRQePv6aU01wKX006ir0oYsK60pn8UxWVOSC/g0EWrS3jNY8Xi48+0SFq/myFh9KBMnc+4Z+Hf5iwWgEkqQPVVg9Ir93SKDVEv+Pau63BxpcwuSrhXjyMVC1DTJzfJgYUFEhKOfjy+zvZP3G+4WFrAxIyN3x2KWD0jes75OMtpA/zDmyIjb/jNIHfo4sjIGgYO0WbwnZJD9/NCR2DA72CBU6btSpcap3BJ8cyqn046Xx+MhYGIEPCUDtILQaJB/9TIelOiUb6AM6i6plyAU3K9B7LZkIzLOb/kQlNUJ5siI3nwMpdWGyexFyKA9vVwdsTjyLVDIUonVR1WDDLO3JRuphM/nIzA8Gu5iMWeuUqlw40IWqh6WG52PKSN1/RwM6+fGGVDtpjDRByXPot3x4FvyukWGqXb8Rcno8EdoK+CqXvzksazU02+7UnOw52wuc9va1g4hUVPg5OrKfWtrbUV25jk0SOuMiDBQxq6PojDdfyAzWnEwHadyS9l4ZsBg7FgYwcbmlPEyyXC0szb5aHN3skf2VwtZC085inIVwcHRESGTpoG6UQK9R65mpnHVozMwZQz3dsOv6+YwOyqtSVeL8aC2EX5vuCAmYDBTRXfC5GWSsXpGALd/RkEZiiukqGzQvoYnDu/PhU0HtqVcA5VdepSFTY0xeJfIZTIolYpOicg8mWzYdCXMC8Xc4GEmJ+SVVUPsIoTY2eGVhwmRQV1xVyive4y47clcu0+JMigsqkv7f/6YlLjPuB2nmq4fi7JWBahB2nziEuZNGIGNz+r9qwyT0BESjoxREnejakKHp34o8fwtUJdMeGlk9IjO18y42/9nvGbn7rqa/B8Oa+6MvcrQY+hvaNExIn99uskAAAAASUVORK5CYII="}},["NHnr"]);
//# sourceMappingURL=app.8f01ec64fb641b38f8a4.js.map